<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>time-series | Matthew Smith R Shenanigans</title>
    <link>http://lf0.com/tags/time-series/</link>
      <atom:link href="http://lf0.com/tags/time-series/index.xml" rel="self" type="application/rss+xml" />
    <description>time-series</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><lastBuildDate>Tue, 24 Sep 2019 00:00:00 +0000</lastBuildDate>
    <image>
      <url>http://lf0.com/img/icon-192.png</url>
      <title>time-series</title>
      <link>http://lf0.com/tags/time-series/</link>
    </image>
    
    <item>
      <title>Series of Hackerrank Competitions</title>
      <link>http://lf0.com/post/hackerrank-competitions/hackerrank-compeitions/</link>
      <pubDate>Tue, 24 Sep 2019 00:00:00 +0000</pubDate>
      <guid>http://lf0.com/post/hackerrank-competitions/hackerrank-compeitions/</guid>
      <description>
&lt;script src=&#34;http://lf0.com/rmarkdown-libs/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;


&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(knitr)
library(kableExtra)
library(ggplot2)
library(tidyquant)
library(dplyr)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;problem-1-battery-life-prediction-problem&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Problem 1: Battery Life Prediction Problem&lt;/h4&gt;
&lt;p&gt;The first problem was to predict how long a laptop would last given the number of hours it was charged. The problem is &lt;a href=&#34;https://www.hackerrank.com/challenges/battery/problem&#34;&gt;here&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;We can read in the data directly from the hackerrank website using the following:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;BatteryData &amp;lt;- read.table(file = url(&amp;quot;https://s3.amazonaws.com/hr-testcases/399/assets/trainingdata.txt&amp;quot;), strip.white = TRUE, sep = &amp;#39;,&amp;#39;, header = FALSE, skip = 0)&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table table-striped table-hover table-condensed table-responsive&#34; style=&#34;font-size: 12px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;caption style=&#34;font-size: initial !important;&#34;&gt;
&lt;span id=&#34;tab:unnamed-chunk-3&#34;&gt;Table 1: &lt;/span&gt;Battery Life Data
&lt;/caption&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
V1
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
V2
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2.81
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5.62
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
7.14
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
8.00
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2.72
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5.44
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.87
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
7.74
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.90
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.80
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
7.82
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
8.00
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;At first thought I applied a simple time series model to the data and obtained poor predictions. I then took a closer look at the actual data by plotting it and it told a different story.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;BatteryData %&amp;gt;%
  ggplot(aes(x = V1, y = V2)) + 
  geom_point() +
  stat_smooth(method = &amp;quot;lm&amp;quot;, col = &amp;quot;red&amp;quot;) +
  geom_vline(xintercept = 4) +
  theme_tq()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;http://lf0.com/post/hackerrank-competitions/hackerrank-compeitions_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;I drew a horizontal line at 4 hours of battery life and plotted a linear regression line - quite clearly it performs badely and I needed to find a different model or better yet set a threshold and predict all observations whose battery had been charging for 4 or more hours to be fully charged.&lt;/p&gt;
&lt;p&gt;The model:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;LinearPredictionModel &amp;lt;- function(TestData){
  TrainData &amp;lt;- read.table(file = url(&amp;quot;https://s3.amazonaws.com/hr-testcases/399/assets/trainingdata.txt&amp;quot;), strip.white = TRUE, sep = &amp;#39;,&amp;#39;, header = FALSE, skip = 0)
  
  TrainData$LessThanFour &amp;lt;- ifelse(TrainData[, 2] &amp;lt; 4, 1, 0)
  
  LMData &amp;lt;- TrainData %&amp;gt;%
    filter(LessThanFour == 1)
  
  LinearModel &amp;lt;- lm(V1 ~ V2, data = LMData) 
  
  TestData &amp;lt;- data.frame(V2 = TestData)
  
  STDOUT &amp;lt;- ifelse(TestData &amp;lt; 4, predict(LinearModel, newdata = TestData), 8)
  
  return(cat(STDOUT))
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The model basically tells us that if the data is less than 4, then fit a simple linear regression model if it is greater or equal to 4 then just apply an 8 prediction.&lt;/p&gt;
&lt;p&gt;We can input some new data as follows:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;TestData &amp;lt;- c(5, 8, 1, 0.2, 3.5, 5.6, 4.32)
LinearPredictionModel(TestData)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 8 8 0.5 0.1 1.75 8 8&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;problem-2-house-price-prediction-problem-using-xgboost&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Problem 2: House Price Prediction Problem using XGBoost&lt;/h4&gt;
&lt;p&gt;In this problem I want to train an XGBoost (Extreme Gradient Boosting) model to predict what a house is going to be based on some characteristics. There is a house price prediction problem on Hackerrank &lt;a href=&#34;https://www.hackerrank.com/challenges/predicting-house-prices/problem&#34;&gt;here&lt;/a&gt; but I used the pre-installed base R house prices data.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(AER)
library(car)
library(dplyr)
library(xgboost)
library(tidyquant)
library(Metrics)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Load in the data and set factors to numeric for easier pre-processing.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data(&amp;quot;HousePrices&amp;quot;)

data &amp;lt;- HousePrices %&amp;gt;%
  mutate_if(is.factor, as.numeric)&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table table-striped table-hover table-condensed table-responsive&#34; style=&#34;font-size: 12px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;caption style=&#34;font-size: initial !important;&#34;&gt;
&lt;span id=&#34;tab:unnamed-chunk-9&#34;&gt;Table 2: &lt;/span&gt;House Price Data
&lt;/caption&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
price
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
lotsize
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
bedrooms
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
bathrooms
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
stories
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
driveway
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
recreation
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
fullbase
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
gasheat
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
aircon
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
garage
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
prefer
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
42000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5850
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
38500
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
49500
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3060
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
60500
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
6650
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
61000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
6360
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
66000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4160
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Split the data between 80% train and 20% testing.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;####################################################################################
# For this example split between train and test
smp_size &amp;lt;- floor(nrow(data) * 0.80)

train_ind &amp;lt;- sample(seq_len(nrow(data)), size = smp_size)

train &amp;lt;- data[train_ind, ]
test &amp;lt;- data[-train_ind, ]

paste(&amp;quot;Train Dimensions&amp;quot;); dim(train)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Train Dimensions&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 436  12&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;paste(&amp;quot;Test Dimensions&amp;quot;); dim(test)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Test Dimensions&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 110  12&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I create the function to take the training and testing data, train a model and output the predictions. I omit the cross-validation and hype-parameter tuning here but I will write a post detailing how I use a grid search to find the optimal parameters of an XGBoost model soon, (it takes some explaining of the functions I create).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;####################################################################################
predictHouseSales &amp;lt;- function(train_data, test_data){
  x_train &amp;lt;- subset(train_data, select = c(-price))
  y_train &amp;lt;- subset(train_data, select = c(price)) %&amp;gt;% pull(price)
  
  x_test &amp;lt;- subset(test_data, select = c(-price))
  y_test &amp;lt;- subset(test_data, select = c(price)) %&amp;gt;% pull(price)
  
  dtrain &amp;lt;- xgb.DMatrix(data = as.matrix(x_train), label = y_train, missing = &amp;quot;NaN&amp;quot;)
  dtest &amp;lt;- xgb.DMatrix(data = as.matrix(x_test), missing = &amp;quot;NaN&amp;quot;)
  
  params &amp;lt;- list(
    &amp;quot;eta&amp;quot; = 0.1, 
    &amp;quot;max_depth&amp;quot; = 5, 
    &amp;quot;objective&amp;quot; = &amp;quot;reg:linear&amp;quot;,
    &amp;quot;eval_metric&amp;quot;= &amp;quot;rmse&amp;quot;
    )
  
  xgb.model &amp;lt;- xgb.train(params, dtrain, nrounds = 100)
  
  return(predict(xgb.model, newdata = dtest))
  
}

myPredictions &amp;lt;- predictHouseSales(train, test)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can inspect some of the predictions and compare them to the actual preditions below:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;####################################################################################
myPredictions %&amp;gt;%
  data.frame() %&amp;gt;%
  setNames(c(&amp;quot;myPreds&amp;quot;)) %&amp;gt;%
  mutate(myPreds = round(myPreds, 0)) %&amp;gt;%
  bind_cols(test) %&amp;gt;%
  select(myPreds, price) %&amp;gt;%
  sample_n(5) %&amp;gt;%
  kable(caption = &amp;quot;Compare predictions to the observed&amp;quot;) %&amp;gt;%
  kable_styling(bootstrap_options = c(&amp;quot;striped&amp;quot;, &amp;quot;hover&amp;quot;, &amp;quot;condensed&amp;quot;, &amp;quot;responsive&amp;quot;), font_size = 12)&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table table-striped table-hover table-condensed table-responsive&#34; style=&#34;font-size: 12px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;caption style=&#34;font-size: initial !important;&#34;&gt;
&lt;span id=&#34;tab:unnamed-chunk-12&#34;&gt;Table 3: &lt;/span&gt;Compare predictions to the observed
&lt;/caption&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
myPreds
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
price
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
60737
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
83000
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
69119
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
52000
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
83527
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
98000
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
62875
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
60000
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
84798
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
99000
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Compute the Root Mean Square Error:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;####################################################################################
myPredictions %&amp;gt;%
  data.frame() %&amp;gt;%
  setNames(c(&amp;quot;myPreds&amp;quot;)) %&amp;gt;%
  mutate(myPreds = round(myPreds, 0)) %&amp;gt;%
  bind_cols(test) %&amp;gt;%
  select(myPreds, price) %&amp;gt;%
  summarise(rmse(myPreds, price)) %&amp;gt;%
  kable(caption = &amp;quot;Compute the RMSE&amp;quot;) %&amp;gt;%
  kable_styling(bootstrap_options = c(&amp;quot;striped&amp;quot;, &amp;quot;hover&amp;quot;, &amp;quot;condensed&amp;quot;, &amp;quot;responsive&amp;quot;), font_size = 12)&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table table-striped table-hover table-condensed table-responsive&#34; style=&#34;font-size: 12px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;caption style=&#34;font-size: initial !important;&#34;&gt;
&lt;span id=&#34;tab:unnamed-chunk-13&#34;&gt;Table 4: &lt;/span&gt;Compute the RMSE
&lt;/caption&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
rmse(myPreds, price)
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
15209.84
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;We can also plot the predictions against the observed using &lt;code&gt;ggplot2&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;####################################################################################
myPredictions %&amp;gt;%
  data.frame() %&amp;gt;%
  setNames(c(&amp;quot;myPreds&amp;quot;)) %&amp;gt;%
  mutate(myPreds = round(myPreds, 0)) %&amp;gt;%
  bind_cols(test) %&amp;gt;%
  select(myPreds, price) %&amp;gt;%
  ggplot(aes(x = price, y = myPreds)) +
  geom_point() +
  geom_smooth(method = &amp;#39;lm&amp;#39;) +
  ggtitle(&amp;quot;My predictions vs Actual Price&amp;quot;) +
  theme_tq()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;http://lf0.com/post/hackerrank-competitions/hackerrank-compeitions_files/figure-html/unnamed-chunk-14-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;The model does &lt;em&gt;okay&lt;/em&gt; without any feature engineering or parameter optimisation using a grid search method.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;problem-3-imputing-missing-values---cross-section&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Problem 3: Imputing missing values - cross section&lt;/h4&gt;
&lt;p&gt;For simplicity I load in the &lt;code&gt;iris&lt;/code&gt; dataset and I create some random missing values since the &lt;code&gt;iris&lt;/code&gt; data doesn’t have any.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Load in the data
library(missForest)
data(iris)
data &amp;lt;- iris&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table table-striped table-hover table-condensed table-responsive&#34; style=&#34;font-size: 12px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;caption style=&#34;font-size: initial !important;&#34;&gt;
&lt;span id=&#34;tab:unnamed-chunk-16&#34;&gt;Table 5: &lt;/span&gt;Iris dataset
&lt;/caption&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
Sepal.Length
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
Sepal.Width
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
Petal.Length
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
Petal.Width
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
Species
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5.1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.5
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.4
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
setosa
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4.9
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.4
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
setosa
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4.7
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
setosa
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4.6
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.5
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
setosa
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5.0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.6
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.4
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
setosa
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5.4
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.9
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.7
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.4
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
setosa
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;I generate some random missing data, i.e. 20% of the data is missing at random (MaR) or Missing Completely at Random (MCaR). This is an important issue for economists since much of the data we collect contains missing values, due to surveys not being filled correctly, or simply data not being very well colelcted. The below model allows us to &lt;em&gt;impute&lt;/em&gt; the missing values using machine learning, avoiding simple averaging or simply removing the values all together.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Create some random missing data&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table table-striped table-hover table-condensed table-responsive&#34; style=&#34;font-size: 12px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;caption style=&#34;font-size: initial !important;&#34;&gt;
&lt;span id=&#34;tab:unnamed-chunk-17&#34;&gt;Table 6: &lt;/span&gt;Iris dataset with random missing values
&lt;/caption&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
Sepal.Length
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
Sepal.Width
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
Petal.Length
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
Petal.Width
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
Species
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5.1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.5
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.4
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
NA
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
setosa
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4.9
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
NA
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
setosa
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4.7
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
NA
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4.6
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
NA
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
setosa
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
NA
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.6
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.4
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
setosa
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5.4
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.9
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.7
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
NA
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
setosa
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Okay now we can train a series of simple missing value imputation models on the data.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;model-1-randomforest-imputation&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Model 1: randomForest Imputation:&lt;/h1&gt;
&lt;p&gt;I won’t discuss the models here but random forests uses a collection of decision trees and averages the results across all trees, which results it some powerful predictions.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;##   missForest iteration 1 in progress...done!
##   missForest iteration 2 in progress...done!
##   missForest iteration 3 in progress...done!
##   missForest iteration 4 in progress...done!
##   missForest iteration 5 in progress...done!
##   missForest iteration 6 in progress...done!&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table table-striped table-hover table-condensed table-responsive&#34; style=&#34;font-size: 12px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;caption style=&#34;font-size: initial !important;&#34;&gt;
&lt;span id=&#34;tab:unnamed-chunk-19&#34;&gt;Table 7: &lt;/span&gt;Iris dataset
&lt;/caption&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
Sepal.Length
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
Sepal.Width
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
Petal.Length
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
Petal.Width
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
Species
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5.100000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.5
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.400000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.2627262
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
setosa
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4.900000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.460455
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.2000000
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
setosa
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4.700000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.300000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.2000000
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
setosa
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4.600000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.377753
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.2000000
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
setosa
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5.125221
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.6
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.400000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.2000000
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
setosa
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5.400000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.9
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.700000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.3170000
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
setosa
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Lets combine all the data together, filter it down to the actual data, the missing data and the predicted data.&lt;/p&gt;
&lt;div id=&#34;for-the-sepal.length-data&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;For the Sepal.Length data&lt;/h3&gt;
&lt;table class=&#34;table table-striped table-hover table-condensed table-responsive&#34; style=&#34;font-size: 12px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;caption style=&#34;font-size: initial !important;&#34;&gt;
&lt;span id=&#34;tab:unnamed-chunk-20&#34;&gt;Table 8: &lt;/span&gt;Compare Sepal Observations
&lt;/caption&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
Predicted_Sepal
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
Actual_Sepal
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5.7
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
6.1
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
7.1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
6.3
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5.9
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
6.2
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
6.7
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5.9
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5.9
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
6.3
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
6.8
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
6.7
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4.9
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5.0
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
6.7
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
6.9
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5.2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5.7
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
6.2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
6.1
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Which isn’t bad! given that we only had 436 observations to train on and only 110 observations to test on. Using &lt;code&gt;randomForest&lt;/code&gt; models to impute the data is better than averaging the data on some datasets, of course we have errors the actual observations are somewhat close to the predicted data. I only analyse the &lt;code&gt;Sepal.Length&lt;/code&gt; data but substitute the values to find the missing values for the &lt;code&gt;Sepal.Width&lt;/code&gt;, &lt;code&gt;Petal.Length&lt;/code&gt;, &lt;code&gt;Petal.Width&lt;/code&gt; and &lt;code&gt;Species&lt;/code&gt; values since &lt;code&gt;missorest&lt;/code&gt; imputes categorical variables as well.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Kalman Smoothing for Time Series Missing Value Imputation</title>
      <link>http://lf0.com/post/kalman-smoothing/kalman-smoothing-time-series-imputation/</link>
      <pubDate>Sun, 22 Sep 2019 00:00:00 +0000</pubDate>
      <guid>http://lf0.com/post/kalman-smoothing/kalman-smoothing-time-series-imputation/</guid>
      <description>
&lt;script src=&#34;http://lf0.com/rmarkdown-libs/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;


&lt;p&gt;I was recently given a task to impute some time series missing values for a prediction problem. Python has the &lt;code&gt;TSFRESH&lt;/code&gt; package which is pretty well documented but I wanted to apply something using R. I opted for a model from statistics and control theory, called Kalman Smoothing which is available in the &lt;code&gt;imputeTS&lt;/code&gt; package in R.&lt;/p&gt;
&lt;p&gt;I went with smoothing over filtering since the Kalman filter takes a forward pass through the data and uses all the data upto the current time point and can be done in real time. Kalman smoothing &lt;strong&gt;adds&lt;/strong&gt; a backward pass through the data and thus uses all the data. I guess it can be considered an extention to filtering.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; I use stock prices here only for easy time series data collection and to just apply Kalman Smoothing to a time series problem, you cannot build a trading strategy using smoothing for the reason given. You can check out a Kalman Filtering Pairs Trading Strategy &lt;a href=&#34;https://www.quantstart.com/articles/kalman-filter-based-pairs-trading-strategy-in-qstrader&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;div id=&#34;download-some-data&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Download some data:&lt;/h4&gt;
&lt;p&gt;I just collect some simple data for &lt;code&gt;Google&lt;/code&gt; and &lt;code&gt;Walmart&lt;/code&gt;. I end up with 3 parts, the actual observations, the predicted observation and the randomly generated &lt;em&gt;missing&lt;/em&gt; time series.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(knitr)
library(kableExtra)
library(quantmod)
library(imputeTS)
library(Metrics)

symbols &amp;lt;- c(&amp;quot;GOOG&amp;quot;, &amp;quot;WMT&amp;quot;)

myenv &amp;lt;- new.env()
symnames &amp;lt;- getSymbols(symbols, env = myenv)

li &amp;lt;- eapply(myenv, function(x) x) 
ts &amp;lt;- do.call(merge, eapply(myenv, Ad)[symnames])

actual &amp;lt;-as.data.frame(ts)
names(actual) &amp;lt;- paste(symbols, &amp;quot;actual&amp;quot;, sep = &amp;quot;_&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;actual-observations&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Actual observations:&lt;/h4&gt;
&lt;table class=&#34;table table-striped table-hover table-condensed table-responsive&#34; style=&#34;font-size: 12px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;caption style=&#34;font-size: initial !important;&#34;&gt;
&lt;span id=&#34;tab:unnamed-chunk-2&#34;&gt;Table 1: &lt;/span&gt;Actual Observations
&lt;/caption&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
GOOG_actual
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
WMT_actual
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2007-01-03
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
232.9220
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
35.17886
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2007-01-04
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
240.7277
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
35.34902
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2007-01-05
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
242.6853
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
35.06050
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2007-01-08
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
240.8871
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
34.77196
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2007-01-09
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
241.8435
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
35.06050
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2007-01-10
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
243.8161
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
34.97911
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Here I create the 100 random missing values that we want to predcit /impute.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;create-some-na-values&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Create some NA values:&lt;/h4&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ts[sample(nrow(ts), 100), ] &amp;lt;- NA
names(ts) &amp;lt;- paste(symbols, &amp;quot;missing&amp;quot;, sep = &amp;quot;_&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table table-striped table-hover table-condensed table-responsive&#34; style=&#34;font-size: 12px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;caption style=&#34;font-size: initial !important;&#34;&gt;
&lt;span id=&#34;tab:unnamed-chunk-4&#34;&gt;Table 2: &lt;/span&gt;Data with random missing observations
&lt;/caption&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
GOOG_missing
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
WMT_missing
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
232.9220
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
35.17886
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
240.7277
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
35.34902
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
242.6853
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
35.06050
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
240.8871
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
34.77196
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
241.8435
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
35.06050
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
243.8161
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
34.97911
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;I wrap the &lt;code&gt;na_kalman&lt;/code&gt; into a function to apply &lt;code&gt;lapply&lt;/code&gt; which is useful should I want to apply the model to multivariate time series data. That is you might have a data set with many explanatory variables for each time stamp and one or more variables will have missing values. The function should impute across the columns of your data frame.&lt;/p&gt;
&lt;p&gt;I use a state space representation of an ARIMA model here but I suggest taking a look at the &lt;code&gt;auto.arima&lt;/code&gt; model from the &lt;code&gt;forecast&lt;/code&gt; package for the best model.There is also a model available for a strucutred model fitted by maximum likelihood. I just use a simple ARIMA model for this example.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;run-the-model&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Run the model&lt;/h4&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Model 1:
# Kalman Smoothing missing value imputation in a state space representation of an ARIMA model
KalmanSmoothing &amp;lt;- function(data){
  df &amp;lt;- data
  arima_model &amp;lt;- arima(df[, ], order = c(1, 0, 1))$model
  KalmanImputation &amp;lt;- na_kalman(df[, ], model = arima_model)
  return(KalmanImputation)
}

results &amp;lt;- lapply(ts, KalmanSmoothing)
results &amp;lt;- as.data.frame(results)
names(results) &amp;lt;- paste(symbols, &amp;quot;predictions&amp;quot;, sep = &amp;quot;_&amp;quot;)

ts &amp;lt;- as.data.frame(ts)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;compute-the-rmse-for-both-time-series&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Compute the RMSE for both time series:&lt;/h4&gt;
&lt;p&gt;I subset the first 10 predictions for each observation but we will have &lt;code&gt;100&lt;/code&gt; predictions (one for each NA value we randomly generated earlier).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;final &amp;lt;- cbind(ts, results, actual)

GOOG_error &amp;lt;- subset(final, is.na(GOOG_missing), select = c(&amp;quot;GOOG_predictions&amp;quot;, &amp;quot;GOOG_actual&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table table-striped table-hover table-condensed table-responsive&#34; style=&#34;font-size: 12px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;caption style=&#34;font-size: initial !important;&#34;&gt;
&lt;span id=&#34;tab:unnamed-chunk-7&#34;&gt;Table 3: &lt;/span&gt;Predictions vs Observed
&lt;/caption&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
GOOG_predictions
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
GOOG_actual
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2007-04-18
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
235.1070
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
237.1162
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2007-06-13
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
250.8735
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
251.6767
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2007-09-24
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
281.2974
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
282.9494
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2007-10-31
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
348.2663
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
352.1799
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2007-11-30
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
343.3643
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
345.2061
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2007-12-20
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
342.2341
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
343.5573
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2008-01-14
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
317.9094
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
325.6892
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2008-03-11
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
212.4316
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
219.0988
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2008-04-03
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
233.2543
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
226.7102
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2008-06-24
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
273.2377
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
270.1375
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div id=&#34;print-the-rmse-for-google&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Print the RMSE for Google&lt;/h4&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;rmse(GOOG_error$GOOG_actual, GOOG_error$GOOG_predictions)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 10.15679&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;apply-the-same-to-the-walmart-predictions&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Apply the same to the Walmart predictions:&lt;/h4&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;WMT_error &amp;lt;- subset(final, is.na(WMT_missing), select = c(&amp;quot;WMT_predictions&amp;quot;, &amp;quot;WMT_actual&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table table-striped table-hover table-condensed table-responsive&#34; style=&#34;font-size: 12px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;caption style=&#34;font-size: initial !important;&#34;&gt;
&lt;span id=&#34;tab:unnamed-chunk-10&#34;&gt;Table 4: &lt;/span&gt;Predictions vs Observed
&lt;/caption&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
WMT_predictions
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
WMT_actual
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2007-04-18
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
35.90075
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
35.65949
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2007-06-13
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
36.68838
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
36.96761
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2007-09-24
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
32.80370
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
33.00339
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2007-10-31
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
33.54558
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
33.93412
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2007-11-30
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
35.80596
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
35.95321
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2007-12-20
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
36.31553
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
36.07756
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2008-01-14
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
35.73070
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
35.94184
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2008-03-11
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
37.49653
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
37.88709
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2008-04-03
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
41.21812
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
41.61236
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2008-06-24
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
43.61165
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
43.60572
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div id=&#34;print-the-rmse-for-walmart&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Print the RMSE for Walmart&lt;/h4&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;rmse(WMT_error$WMT_actual, WMT_error$WMT_predictions)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 0.5358089&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Scraping Yahoo Finance IPO Data</title>
      <link>http://lf0.com/post/yahoo-finance-ipo/</link>
      <pubDate>Sat, 21 Sep 2019 00:00:00 +0000</pubDate>
      <guid>http://lf0.com/post/yahoo-finance-ipo/</guid>
      <description>
&lt;script src=&#34;http://lf0.com/rmarkdown-libs/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;


&lt;p&gt;I wrote a script a while back when I was working on a project which required the analysis of IPO data, of course I used the IPO data from the bloomberg terminal but I wanted a free source also. Yahoo Finance collects IPO data for a number of worldwide markets, its not clean data but it goes as far back as the year 2000.&lt;/p&gt;
&lt;p&gt;I wanted to follow on from some research by J.R.Ritter &lt;a href=&#34;https://site.warrington.ufl.edu/ritter/files/2019/08/Monnew.pdf&#34;&gt;here&lt;/a&gt;. The goal is to try and compute the &lt;em&gt;money left on the table&lt;/em&gt; from IPO’s and extend the research up until 2018.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Quote:&lt;/strong&gt; &lt;em&gt;In the 1980s, the average first-day return on initial public offerings (IPOs) was 7%. The average first-day return doubled to almost 15% during 1990-1998, before jumping to 65% during the internet bubble years of 1999-2000 and then reverting to 12% during 2001-2003.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;The code is not clean and if I had to re-write it today I would do so very differently but it works. I just re-download a small sample of the data as it takes some time to process all years but changing &lt;code&gt;from&lt;/code&gt; to the year 2000 should get you all the data.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(rvest)
library(naniar)
library(tidyverse)
library(tidyquant)
library(lubridate)
library(knitr)
library(kableExtra)
from = &amp;quot;2019-09-01&amp;quot;
to = &amp;quot;2019-09-19&amp;quot;
s &amp;lt;- seq(as.Date(from), as.Date(to), &amp;quot;days&amp;quot;)
url &amp;lt;- &amp;quot;https://finance.yahoo.com/calendar/ipo?from=&amp;quot;
links &amp;lt;- gsub(&amp;quot; &amp;quot;, &amp;quot;&amp;quot;, paste(url,from,&amp;quot;&amp;amp;to=&amp;quot;,to,&amp;quot;&amp;amp;day=&amp;quot;,format(s, &amp;quot;%Y-%m-%d&amp;quot;)))
store &amp;lt;- NULL
tbl &amp;lt;- NULL
for(i in links){
  store[[i]] = read_html(i)
  tbl[[i]] = html_table(store[[i]])
}
list &amp;lt;- unlist(tbl, recursive = FALSE)
df &amp;lt;- do.call(&amp;quot;rbind&amp;quot;, list)
df &amp;lt;- df %&amp;gt;%
  replace_with_na_all(condition = ~.x == &amp;quot;-&amp;quot;)
data &amp;lt;- df[!is.na(df$Price), ]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I get a nice data frame which looks like:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data %&amp;gt;%
  head() %&amp;gt;%
  kable() %&amp;gt;%
  kable_styling(bootstrap_options = c(&amp;quot;striped&amp;quot;, &amp;quot;hover&amp;quot;, &amp;quot;condensed&amp;quot;, &amp;quot;responsive&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table table-striped table-hover table-condensed table-responsive&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
Symbol
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
Company
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
Exchange
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
Date
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
Price Range
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
Price
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
Currency
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
Shares
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
Actions
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
VG8.AX
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
VGI Partners Asian Invests Ltd
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ASX
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Aug 04, 2019
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N/A
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N/A
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
AUD
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N/A
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Amended
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
VG8.AX
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
VGI Partners Asian Invests Ltd
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ASX
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Aug 04, 2019
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N/A
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N/A
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
AUD
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N/A
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Amended
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
VG8.AX
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
VGI Partners Asian Invests Ltd
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ASX
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Aug 04, 2019
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N/A
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N/A
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
AUD
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N/A
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Amended
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
China Merchants Coml Reit
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
HKSE
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Sep 02, 2019
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N/A
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N/A
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
USD
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N/A
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Amended
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Immunotech Biopharm Ltd
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
HKSE
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Sep 02, 2019
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N/A
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N/A
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
USD
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N/A
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Amended
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Nusantara Almazia PT
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Jakarta
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Aug 12, 2019
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N/A
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N/A
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
IDR
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
461530000
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Amended
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Theres lot of missing IPO price data and many duplicate results since this is just a calendar and thus reports on any news about an IPO.&lt;/p&gt;
&lt;p&gt;I next get the stock price information: - which can take some time so I suggest saving the results.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;symbols &amp;lt;- df$Symbol
symbols &amp;lt;- symbols[symbols != &amp;quot;&amp;quot;] 
stocks &amp;lt;- symbols %&amp;gt;%
  tq_get(&amp;quot;stock.prices&amp;quot;,
         from = from,
         to = to)
stocks %&amp;gt;%
  head() %&amp;gt;%
  kable() %&amp;gt;%
  kable_styling(bootstrap_options = c(&amp;quot;striped&amp;quot;, &amp;quot;hover&amp;quot;, &amp;quot;condensed&amp;quot;, &amp;quot;responsive&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table table-striped table-hover table-condensed table-responsive&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
symbol
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
date
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
open
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
high
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
low
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
close
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
volume
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
adjusted
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
SDC
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2019-09-12
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
20.59
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
21.10
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
16.28
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
16.67
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
55416800
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
16.67
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
SDC
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2019-09-13
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
16.81
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
18.71
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
16.81
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
18.68
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
19119100
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
18.68
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
SDC
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2019-09-16
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
18.46
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
19.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
17.81
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
18.90
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5573000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
18.90
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
SDC
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2019-09-17
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
19.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
19.30
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
18.65
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
19.07
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4415200
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
19.07
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
SDC
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2019-09-18
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
19.17
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
19.70
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
18.90
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
19.48
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
10533900
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
19.48
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
TXG
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2019-09-12
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
54.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
58.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
51.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
52.75
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
7326300
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
52.75
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Next I join the daily stock price data with the IPO data, clean it up a little and compute the returns. I also split the data into different markets such as NYSE, LSE, Frankfurt etc. and compute the average daily returns. You can find everything along with the &lt;a href=&#34;https://github.com/msmith01/IPO_Web_Scraping_Yahoo/blob/master/yahoo_finance_IPOs_2000_2018.csv&#34;&gt;excel&lt;/a&gt; file collecting IPOs since 2000 &lt;a href=&#34;https://github.com/msmith01/IPO_Web_Scraping_Yahoo&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Heres how the final data looks with the calculated one day price returns:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;read.csv(&amp;quot;https://raw.githubusercontent.com/msmith01/IPO_Web_Scraping_Yahoo/master/yahoo_finance_IPOs_2000_2018.csv&amp;quot;, nrows = 10) %&amp;gt;%
  kable() %&amp;gt;%
  kable_styling(bootstrap_options = c(&amp;quot;striped&amp;quot;, &amp;quot;hover&amp;quot;, &amp;quot;condensed&amp;quot;, &amp;quot;responsive&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table table-striped table-hover table-condensed table-responsive&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
X
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
symbol
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
company
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
exchange
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
date.x
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
price
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
currency
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
actions
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
date.y
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
open
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
close
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
adjusted
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
returns
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
year
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
EVD.F
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
CTS Eventim AG
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Frankfurt
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2000-01-31
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
21.50
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
EUR
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Priced
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2000-02-01
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
6.37500
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
6.30000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4.990930
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
-0.7069767
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2000
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
SLAB
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Silicon Laboratories Inc
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
NasdaqGM
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2000-03-24
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
31.00
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
USD
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Priced
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2000-03-24
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
63.00000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
69.37500
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
69.375000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.2379032
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2000
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
0764.HK
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Ocean Shores Group Ltd
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
HKSE
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2000-02-10
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.33
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
HKD
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Priced
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2005-09-29
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
9984.20996
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
9984.20996
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
9946.558594
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
7505.9247827
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2000
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
MTB.V
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Mountain Boy Minerals Ltd
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
TSXV
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2000-07-12
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.35
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
CAD
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Priced
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2000-07-12
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.35000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.35000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.350000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.0000000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2000
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
IAG.TO
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Industrial-Alliance Life
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Toronto
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2000-02-10
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
15.75
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
CAD
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Priced
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2000-02-10
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
8.50000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
8.70000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5.096976
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
-0.4476190
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2000
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
6
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2457.TW
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Phihong Enterprises Co Ltd
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Taiwan
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2000-02-15
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
111.00
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
TWD
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Priced
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2000-02-16
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
55.19920
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
55.19920
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
28.781498
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
-0.5027099
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2000
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
7
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
IFX.F
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Infineon Technologies AG
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Frankfurt
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2000-03-14
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
35.00
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
EUR
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Priced
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2000-03-14
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
71.50000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
79.00000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
69.923615
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.2571429
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2000
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
8
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
BRC.V
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
BRC Development Corp
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
TSXV
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2000-02-24
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.50
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
CAD
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Priced
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2000-07-20
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.35000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.40000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.400000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
-0.2000000
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2000
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
9
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
PTR
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
PetroChina Co Ltd
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
NYSE
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2000-04-07
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
16.44
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
USD
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Priced
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2000-04-06
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
16.43750
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
16.43750
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
7.569896
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
-0.0001521
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2000
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
10
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
0643.HK
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Carry Wealth Holdings Ltd
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
HKSE
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2000-03-09
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.00
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
HKD
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Priced
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2000-03-14
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.78389
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.70833
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.332258
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
-0.2916700
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2000
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;I try to recreate some of the plots on J.R.Ritters website for each of the countries.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;knitr::include_graphics(&amp;quot;Monthly_bloomberg_graphs.png&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;Monthly_bloomberg_graphs.png&#34; width=&#34;1000&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;knitr::include_graphics(&amp;quot;Monthly_bloomberg_graphs2.png&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;Monthly_bloomberg_graphs2.png&#34; width=&#34;1000&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;knitr::include_graphics(&amp;quot;Monthly_bloomberg_graphs3.png&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;Monthly_bloomberg_graphs3.png&#34; width=&#34;1000&#34; /&gt;&lt;/p&gt;
&lt;p&gt;The returns seem reasonable given some exchanges are growth exchanges and others are mature exchanges. I would take caution here however since Yahoo is somewhat unreliable (at least in my experience of getting stock prices and fundamental data).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;References&lt;/strong&gt;
See J.R.Ritter for other &lt;a href=&#34;https://site.warrington.ufl.edu/ritter/ipo-data/&#34;&gt;IPO data.&lt;/a&gt;
See Tim Loughran and Jay Ritter &lt;a href=&#34;https://site.warrington.ufl.edu/ritter/files/2016/06/why-has-IPO-Underpricing-Increased-Over-Time.pdf&#34;&gt;IPO returns:&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
