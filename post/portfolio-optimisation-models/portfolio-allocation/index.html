<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.5.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Matthew Smith">

  
  
  
    
  
  <meta name="description" content="I write up a Global Minimum Variance Portfolio and a Markowitz Mean-Variance Portfolio using a time series rolling window portfolio investment strategy which updates the mean-variance portfolio monthly.">

  
  <link rel="alternate" hreflang="en-us" href="/post/portfolio-optimisation-models/portfolio-allocation/">

  


  
  
  
  <meta name="theme-color" content="#3f51b5">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.css" integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ==" crossorigin="anonymous">
    

    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  <link rel="stylesheet" href="/css/academic.min.5949897e171a43c4edc8bc03336e8676.css">

  

  
  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-151949400-1', 'auto');
      
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="https://www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon-32.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/post/portfolio-optimisation-models/portfolio-allocation/">

  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="twitter:site" content="@MatthewSmith786">
  <meta property="twitter:creator" content="@MatthewSmith786">
  
  <meta property="og:site_name" content="Matthew Smith R Shenanigans">
  <meta property="og:url" content="/post/portfolio-optimisation-models/portfolio-allocation/">
  <meta property="og:title" content="Quantitative Analytics: Optimal Portfolio Allocation | Matthew Smith R Shenanigans">
  <meta property="og:description" content="I write up a Global Minimum Variance Portfolio and a Markowitz Mean-Variance Portfolio using a time series rolling window portfolio investment strategy which updates the mean-variance portfolio monthly."><meta property="og:image" content="/img/icon-192.png">
  <meta property="twitter:image" content="/img/icon-192.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2019-11-18T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2019-11-18T00:00:00&#43;00:00">
  

  


    






  






<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/portfolio-optimisation-models/portfolio-allocation/"
  },
  "headline": "Quantitative Analytics: Optimal Portfolio Allocation",
  
  "datePublished": "2019-11-18T00:00:00Z",
  "dateModified": "2019-11-18T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Matthew Smith"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Matthew Smith R Shenanigans",
    "logo": {
      "@type": "ImageObject",
      "url": "/img/icon-512.png"
    }
  },
  "description": "I write up a Global Minimum Variance Portfolio and a Markowitz Mean-Variance Portfolio using a time series rolling window portfolio investment strategy which updates the mean-variance portfolio monthly."
}
</script>

  

  


  


  





  <title>Quantitative Analytics: Optimal Portfolio Allocation | Matthew Smith R Shenanigans</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0 compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">Matthew Smith R Shenanigans</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav ml-auto">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Posts</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/courses/"><span>Courses</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contact</span></a>
        </li>

        
        

      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>


  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Quantitative Analytics: Optimal Portfolio Allocation</h1>

  
  <p class="page-subtitle">A quantitative finance optimal portfolio allocation strategy using two popular methods from the literature.</p>
  

  
    



<div class="article-metadata">

  
  
  
  
  <div>
    



  <span><a href="/authors/admin/">Matthew Smith</a></span>

  </div>
  
  

  
  <span class="article-date">
    
    
      
    
    Nov 18, 2019
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    12 min read
  </span>
  

  
  
  
  <span class="middot-divider"></span>
  <a href="/post/portfolio-optimisation-models/portfolio-allocation/#disqus_thread"></a>
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/categories/mathematical-finance/">Mathematical Finance</a>, <a href="/categories/econometrics/">Econometrics</a></span>
  

  
    
<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/post/portfolio-optimisation-models/portfolio-allocation/&amp;text=Quantitative%20Analytics:%20Optimal%20Portfolio%20Allocation" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/post/portfolio-optimisation-models/portfolio-allocation/&amp;t=Quantitative%20Analytics:%20Optimal%20Portfolio%20Allocation" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook-f"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Quantitative%20Analytics:%20Optimal%20Portfolio%20Allocation&amp;body=/post/portfolio-optimisation-models/portfolio-allocation/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/post/portfolio-optimisation-models/portfolio-allocation/&amp;title=Quantitative%20Analytics:%20Optimal%20Portfolio%20Allocation" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=Quantitative%20Analytics:%20Optimal%20Portfolio%20Allocation%20/post/portfolio-optimisation-models/portfolio-allocation/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=/post/portfolio-optimisation-models/portfolio-allocation/&amp;title=Quantitative%20Analytics:%20Optimal%20Portfolio%20Allocation" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>


  

</div>

    













<div class="btn-links mb-3">
  
  








  









  
    
  











</div>


  
</div>



  <div class="article-container">

    <div class="article-style">
      
<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>


<p>I show two different portfolio allocation models from the literature in finance, the <em>Global Minimum-Variance Portfolio</em> and the <em>Markowitz Mean-Variance Portfolio</em> there are others but I just wanted to play around with the Convex Optimisation Package <code>library(CVXR)</code> and the <code>rolling_origin</code> function from the package <code>library(rsample)</code> in R.</p>
<div id="minimum-variance-portfolio" class="section level3">
<h3>Minimum-Variance Portfolio</h3>
<p>PAGE 15 OF THE PAPER
<a href="https://www.rmetrics.org/sites/default/files/2014-04-portfolioAllocation.pdf" class="uri">https://www.rmetrics.org/sites/default/files/2014-04-portfolioAllocation.pdf</a></p>
<p>The global minimum-variance portfolio <span class="math inline">\(w^{gmv}\)</span> is a portfolio of assets with gives us the lowest possible return variance or portfolio volatility. Volatility here is used as a replacement for risk, thus with less variance in volatility correlates to less risk in an asset. The portfolio focuses only on risk and ignores expected returns.</p>
<p>The objective function is;</p>
<p><span class="math display">\[\begin{eqnarray} \min_{w} w^{T} \Sigma w \\
\text{subject to } 1^{T}w = 1 \\
w \ge 0 \end{eqnarray}\]</span></p>
<p>For a two asset portfolio <span class="math inline">\(w_{1}\)</span> and <span class="math inline">\(w_{2}\)</span> we have <span class="math inline">\((w_{1} - {w_{2})^T\Sigma w = 0}\)</span></p>
<p>Since <span class="math inline">\(\Sigma\)</span> is unknown we can estimate it as <span class="math inline">\(\hat{\Sigma}\)</span> with the covariance matrix. In which the convex solution becomes:</p>
<p><span class="math display">\[W = \dfrac{1}{1^{T}\hat{\Sigma}^{-1}1}\hat{\Sigma}^{-1}1\]</span></p>
<p>As an example we can take in 5 synthetic assets covariances <span class="math inline">\(A = c(A_1, \dots, A_5)\)</span> and the assets expected return <span class="math inline">\(R_{i}\)</span>.</p>
<pre class="r"><code>data &lt;- data.frame(
  A_1 = c(2.3, 0.93, 0.62, 0.74, -0.23),
  A_2 = c(0.93, 1.40, 0.2, 0.56, 0.26),
  A_3 = c(0.62, 0.2, 1.80, 0.78, -0.27),
  A_4 = c(0.74, 0.56, 0.78, 3.4, -0.56),
  A_5 = c(-0.23, 0.26, -0.27, -0.56, 2.60),
  Security = c(1, 2, 3, 4, 5),
  R_i = c(15.1, 12.5, 14.7, 9.02, 17.68)
)</code></pre>
<p>Which looks like:</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
A_1
</th>
<th style="text-align:right;">
A_2
</th>
<th style="text-align:right;">
A_3
</th>
<th style="text-align:right;">
A_4
</th>
<th style="text-align:right;">
A_5
</th>
<th style="text-align:right;">
Security
</th>
<th style="text-align:right;">
R_i
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
2.30
</td>
<td style="text-align:right;">
0.93
</td>
<td style="text-align:right;">
0.62
</td>
<td style="text-align:right;">
0.74
</td>
<td style="text-align:right;">
-0.23
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
15.10
</td>
</tr>
<tr>
<td style="text-align:right;">
0.93
</td>
<td style="text-align:right;">
1.40
</td>
<td style="text-align:right;">
0.20
</td>
<td style="text-align:right;">
0.56
</td>
<td style="text-align:right;">
0.26
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
12.50
</td>
</tr>
<tr>
<td style="text-align:right;">
0.62
</td>
<td style="text-align:right;">
0.20
</td>
<td style="text-align:right;">
1.80
</td>
<td style="text-align:right;">
0.78
</td>
<td style="text-align:right;">
-0.27
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
14.70
</td>
</tr>
<tr>
<td style="text-align:right;">
0.74
</td>
<td style="text-align:right;">
0.56
</td>
<td style="text-align:right;">
0.78
</td>
<td style="text-align:right;">
3.40
</td>
<td style="text-align:right;">
-0.56
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
9.02
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.23
</td>
<td style="text-align:right;">
0.26
</td>
<td style="text-align:right;">
-0.27
</td>
<td style="text-align:right;">
-0.56
</td>
<td style="text-align:right;">
2.60
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
17.68
</td>
</tr>
</tbody>
</table>
<p>We can use the Disciplined Convex Programming package in R, which;</p>
<ol style="list-style-type: decimal">
<li><p>analyses the problem,</p></li>
<li><p>verifies the convexity,</p></li>
<li><p>converts the problem into canonical form,</p></li>
<li><p>solves the problem.</p></li>
</ol>
<p>We want to find the optimial weights from the model such that our risk is minimised.</p>
<p>The below code is our <span class="math inline">\(Minimisation\)</span> problem <span class="math inline">\(\min_{w} w^{T} \Sigma w\)</span>. The <code>quad_form</code> function takes the quadratic form <span class="math inline">\(x^T Px\)</span> where <span class="math inline">\(x\)</span> is a vector and <span class="math inline">\(P\)</span> is a matrix or in our case <span class="math inline">\(w\)</span> is our weights vector and <span class="math inline">\(\Sigma\)</span> is the covariance matrix for <span class="math inline">\(A_{1}, \dots, A_{5}\)</span>. The <code>constraints</code> correspond to <span class="math inline">\(1^{T}w = 1\)</span> in which we cannot assign negative weights to our assets and that we invest all our capital in the portfolio.</p>
<pre class="r"><code>library(CVXR)
w = Variable(nrow(data))
mu = colMeans(data[, 1:5])

Problem &lt;- Problem(             # Initialise the problem
  Minimize(                     # minimse or maximise objective function
    quad_form(                 
      w, data[, 1:5]            # Model inputs, the number of weights to consider and the covariance matrix
      )
    ), 
  constraints = list(
    w &gt;= 0,                     # First model constraint
    sum(w) == 1                 # Second model constrain
    )
  )

Solution &lt;- solve(Problem)      # Solves the problem
                                # I wish I had known of this package during my master!</code></pre>
<p>We obtain the following portfolio weights for assets 1 to 5:</p>
<pre><code>## 0.08467258 0.2559887 0.2846968 0.1019689 0.272673</code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<tbody>
<tr>
</tr>
</tbody>
</table>
<p>Which sum to 1 as per our constraint:</p>
<pre class="r"><code>sum(Solution$getValue(w))</code></pre>
<pre><code>## [1] 1</code></pre>
</div>
<div id="markowitz-mean-variance-portfolio" class="section level3">
<h3>Markowitz Mean-Variance portfolio</h3>
<p>The Markowitz Mean-Variance Portfolio is constructed as follows:</p>
<p><span class="math display">\[ \]</span>
<span class="math display">\[\begin{eqnarray} \max_{w} \mu^{T}w - \lambda w^{T}\Sigma w \\
\text{subject to } 1^{T}w = 1 \\
w \ge 0 \end{eqnarray}\]</span></p>
<p>Using the same sample data from previously we can run the following:</p>
<pre class="r"><code>library(CVXR)
w = Variable(nrow(data))
mu = colMeans(data[, 1:5])
mu &lt;- data[, 7]
lambda = 0.5
Problem &lt;- Problem(
  Maximize(
    t(mu) %*% w - lambda*quad_form(w, data[, 1:5])
    ),
  constraints = list(
    w &gt;= 0,
    sum(w) == 1)
  )

Solution &lt;- solve(Problem)</code></pre>
<p>Which gives:</p>
<pre><code>## 0.04663936 0.0000000002072145 0.00000001139253 -0.0000000002604843 0.9533606</code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<tbody>
<tr>
</tr>
</tbody>
</table>
<p>We might want to see how our risk to return changes with changes in <span class="math inline">\(\lambda\)</span> values. This can be done by running multiple optimisation problems on the data with different <span class="math inline">\(\lambda\)</span> values. Higher <span class="math inline">\(\lambda\)</span> values places emphasis on the right hand side of the equation and thus the more risk adverse the investor is.</p>
<pre class="r"><code>Sigma &lt;- data[, 1:5]
w &lt;- Variable(nrow(data))
mu &lt;- data[, 7]
n_samples = 10
lambdas &lt;- 10^seq(-2, 3, length.out = n_samples)

ret_data &lt;- rep(0, n_samples)
risk_data &lt;- rep(0, n_samples)
w_data &lt;- matrix(0, nrow = n_samples, ncol = nrow(data))

for(i in seq_along(lambdas)) {
  lambda &lt;- lambdas[i]
  problem &lt;- Problem(
    Maximize(
      t(mu) %*% w - lambda*quad_form(w, Sigma)
      ),
    constraints = list(w &gt;= 0, sum(w) == 1))
  solution &lt;- solve(problem)
  w_data[i,] &lt;- solution$getValue(w)
  risk_data[i] &lt;- solution$getValue(sqrt(quad_form(w, Sigma)))
  ret_data[i] &lt;- solution$getValue(t(mu) %*% w)
}

colnames(w_data) &lt;- colnames(data[, 1:5])
df &lt;- data.frame(
  lambdas,
  ret_data,
  risk_data,
  w_data
  )</code></pre>
<p>We can see how the risk and return is affected by the changes in the <span class="math inline">\(\lambda\)</span> values in the following table. As the <span class="math inline">\(\lambda\)</span> values increase the less risk we take on but also we assume less returns. Low values of <span class="math inline">\(\lambda\)</span> makes us invest in a signle asset with the weight on asset <span class="math inline">\(A_{5}\)</span>, increasing the <span class="math inline">\(\lambda\)</span> values increases the weights in other assets <span class="math inline">\(A_{i}\)</span> spreading our risk.</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
lambdas
</th>
<th style="text-align:right;">
ret_data
</th>
<th style="text-align:right;">
risk_data
</th>
<th style="text-align:right;">
A_1
</th>
<th style="text-align:right;">
A_2
</th>
<th style="text-align:right;">
A_3
</th>
<th style="text-align:right;">
A_4
</th>
<th style="text-align:right;">
A_5
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0.0100000
</td>
<td style="text-align:right;">
17.68000
</td>
<td style="text-align:right;">
1.6124516
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
1.0000000
</td>
</tr>
<tr>
<td style="text-align:right;">
0.0359381
</td>
<td style="text-align:right;">
17.68000
</td>
<td style="text-align:right;">
1.6124516
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
1.0000000
</td>
</tr>
<tr>
<td style="text-align:right;">
0.1291550
</td>
<td style="text-align:right;">
17.68000
</td>
<td style="text-align:right;">
1.6124515
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
1.0000000
</td>
</tr>
<tr>
<td style="text-align:right;">
0.4641589
</td>
<td style="text-align:right;">
17.65557
</td>
<td style="text-align:right;">
1.5958938
</td>
<td style="text-align:right;">
0.0094706
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.9905293
</td>
</tr>
<tr>
<td style="text-align:right;">
1.6681005
</td>
<td style="text-align:right;">
16.41295
</td>
<td style="text-align:right;">
0.9608757
</td>
<td style="text-align:right;">
0.2220196
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.2329659
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.5450146
</td>
</tr>
<tr>
<td style="text-align:right;">
5.9948425
</td>
<td style="text-align:right;">
15.80975
</td>
<td style="text-align:right;">
0.8556339
</td>
<td style="text-align:right;">
0.2169019
</td>
<td style="text-align:right;">
0.0619879
</td>
<td style="text-align:right;">
0.3320632
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.3890470
</td>
</tr>
<tr>
<td style="text-align:right;">
21.5443469
</td>
<td style="text-align:right;">
14.82494
</td>
<td style="text-align:right;">
0.7948787
</td>
<td style="text-align:right;">
0.1222347
</td>
<td style="text-align:right;">
0.2052604
</td>
<td style="text-align:right;">
0.3012004
</td>
<td style="text-align:right;">
0.0668445
</td>
<td style="text-align:right;">
0.3044601
</td>
</tr>
<tr>
<td style="text-align:right;">
77.4263683
</td>
<td style="text-align:right;">
14.52118
</td>
<td style="text-align:right;">
0.7891902
</td>
<td style="text-align:right;">
0.0951196
</td>
<td style="text-align:right;">
0.2418762
</td>
<td style="text-align:right;">
0.2892914
</td>
<td style="text-align:right;">
0.0921945
</td>
<td style="text-align:right;">
0.2815183
</td>
</tr>
<tr>
<td style="text-align:right;">
278.2559402
</td>
<td style="text-align:right;">
14.43667
</td>
<td style="text-align:right;">
0.7887482
</td>
<td style="text-align:right;">
0.0875809
</td>
<td style="text-align:right;">
0.2520617
</td>
<td style="text-align:right;">
0.2859777
</td>
<td style="text-align:right;">
0.0992470
</td>
<td style="text-align:right;">
0.2751327
</td>
</tr>
<tr>
<td style="text-align:right;">
1000.0000000
</td>
<td style="text-align:right;">
14.41315
</td>
<td style="text-align:right;">
0.7887139
</td>
<td style="text-align:right;">
0.0854776
</td>
<td style="text-align:right;">
0.2548981
</td>
<td style="text-align:right;">
0.2850558
</td>
<td style="text-align:right;">
0.1012095
</td>
<td style="text-align:right;">
0.2733589
</td>
</tr>
</tbody>
</table>
</div>
<div id="rolling-portfolio-optimisation-on-real-financial-data" class="section level2">
<h2>Rolling Portfolio Optimisation (on real financial data):</h2>
<p>In the real world we would like to define our portfolio based on historic data and then see how it performs in the future. However, not all models are static and <span class="math inline">\(\mu\)</span> and <span class="math inline">\(\Sigma\)</span> change over time, we should <em>in-reality</em> be rebalancing the portfolios on a continuous basis. For this task there is a useful function in the <code>rsample</code> package called <code>rolling_origin()</code>, it allows us to split the time series into <code>analysis</code> and <code>assessment</code> which are similar to the <code>training</code> and <code>test</code> set respectively in Machine Learning. It takes in the number of time stamps, lets say - <em>days</em> - and splits the data according to our settings. We can employ a quick <code>hack</code> to nest the data over months and split our data by months for time series of which consist of irregular time stamps, i.e. different number of days in a month.</p>
<div id="old" class="section level4">
<h4>OLD</h4>
</div>
<div id="random-portfolio-asset-allocation-strategy" class="section level3">
<h3>Random portfolio Asset Allocation Strategy</h3>
<p>In order to eliminate any bias (<em>although the bias still exists</em>). I randomly sample 5 assets from the S&amp;P500 and build a minimum variance portfolio based on the above problem/solution. I remove all class A, B and C shares to remove the possiblity of duplicating results.</p>
<p>I collect the data as follows:</p>
<pre class="r"><code>library(rvest)
library(dplyr)
library(stringr)
library(tidyquant)
library(tidyr)
library(timetk)
start_date &lt;- &quot;2013-01-01&quot;
end_date &lt;- &quot;2017-08-31&quot;

set.seed(9876)
url &lt;- &quot;https://en.wikipedia.org/wiki/List_of_S%26P_500_companies&quot;

symbols &lt;- url %&gt;%
  read_html() %&gt;%
  html_nodes(xpath = &#39;//*[@id=&quot;constituents&quot;]&#39;) %&gt;% 
  html_table() %&gt;% 
  .[[1]] %&gt;% 
  filter(!str_detect(Security, &quot;Class A|Class B|Class C&quot;)) %&gt;%     # Removes firms with Class A shares
  sample_n(5) %&gt;% 
  pull(Symbol)

portfolio_returns &lt;- tq_get(
  symbols,
  from = start_date,
  to = end_date,
) %&gt;%
  group_by(symbol) %&gt;% 
  tq_transmute(
    select = adjusted,
    mutate_fun = periodReturn,
    period = &quot;daily&quot;,
    type = &quot;log&quot;,
  ) %&gt;% 
  pivot_wider(names_from = symbol, values_from = daily.returns) %&gt;% 
  drop_na() %&gt;%                             # Some times we collect assets with NA values from random sampling so I drop these assets
  tk_xts(date_var = date) %&gt;% 
  .[-1, ] </code></pre>
<p>Applying convex optimisation using the <code>CVXR</code> package</p>
<pre class="r"><code>Sigma &lt;- cov(portfolio_returns)
w = Variable(nrow(Sigma))
mu &lt;- colMeans(portfolio_returns)


Problem &lt;- Problem(             # Initialise the problem
  Minimize(                     # minimse or maximise objective function
    quad_form(                 
      w, Sigma                  # Model inputs, the number of weights to consider and the covariance matrix
    )
  ), 
  constraints = list(
    w &gt;= 0,                     # First model constraint
    sum(w) == 1                 # Second model constrain
  )
)

Solution &lt;- solve(Problem)      # Solves the problem</code></pre>
<p>The minimum variance asset allocation for the randomly sampled assets from the S&amp;P500 wikipedia page is:</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:left;">
FLT
</td>
<td style="text-align:left;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:left;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
UDR
</td>
<td style="text-align:left;">
0.34
</td>
</tr>
<tr>
<td style="text-align:left;">
SLG
</td>
<td style="text-align:left;">
0.11
</td>
</tr>
<tr>
<td style="text-align:left;">
EFX
</td>
<td style="text-align:left;">
0.32
</td>
</tr>
</tbody>
</table>
</div>
<div id="markowitz-mean-variance-portfolio-1" class="section level3">
<h3>Markowitz mean-variance portfolio</h3>
<p>There are <span class="math inline">\(N\)</span> risky assets which has returns <span class="math inline">\(R_{1}, \dots, R_{N}\)</span> such that the returns are claculated as:</p>
<p><span class="math display">\[R_{n} = \dfrac{P_{n}(1) - P_{n}(0)}{P_{n}(0)}, \text{ n} = 1, 2, \dots, N\]</span>
Then set <span class="math inline">\(\mathbf{w_{N}} = (w_{1} \dots w_{N})^T\)</span> with <span class="math inline">\(w_{N}\)</span> being a proportion of wealth we invest in asset <span class="math inline">\(n\)</span> and therfore <span class="math inline">\(\sum_{n = 1}^N w_{n} = 1\)</span>. We can compute the rate of the return of the portfolio as:</p>
<p><span class="math display">\[R_{P} = \sum_{n = 1}^N w_{n}R_{n}\]</span>
Two assumptions are made:</p>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(\mu = (\overline{R}_{1}, \dots, \overline{R}_{N})\)</span> and <span class="math inline">\(\mathbf{1} = (1, \dots, 1)^T\)</span> are linearly independent, otherwise <span class="math inline">\(R_{P}\)</span> is a constant.</li>
<li>There are no assets which are a combination of eachother.</li>
</ol>
<p>The objective function is:</p>
<p><span class="math display">\[\begin{eqnarray} \max_{w} \mu^{T}w - \lambda w^{T} \Sigma w  \\
\text{subject to } w \ge 0, \sum_{i = 1}^n w = 1 \end{eqnarray}\]</span></p>
<pre class="r"><code>library(ggplot2)

data &lt;- data.frame(
  A_1 = c(2.3, 0.93, 0.62, 0.74, -0.23),
  A_2 = c(0.93, 1.40, 0.2, 0.56, 0.26),
  A_3 = c(0.62, 0.2, 1.80, 0.78, -0.27),
  A_4 = c(0.74, 0.56, 0.78, 3.4, -0.56),
  A_5 = c(-0.23, 0.26, -0.27, -0.56, 2.60),
  Security = c(1, 2, 3, 4, 5),
  R_i = c(15.1, 12.5, 14.7, 9.02, 17.68)
)

Sigma &lt;- data[, 1:5]
w &lt;- Variable(nrow(data))
mu &lt;- data[, 7]
n_samples = 10
lambdas &lt;- 10^seq(-2, 3, length.out = n_samples)

ret_data &lt;- rep(0, n_samples)
risk_data &lt;- rep(0, n_samples)
w_data &lt;- matrix(0, nrow = n_samples, ncol = nrow(data))

for(i in seq_along(lambdas)) {
  lambda &lt;- lambdas[i]
  problem &lt;- Problem(
    Maximize(
      t(mu) %*% w - lambda*quad_form(w, Sigma)
      ),
    constraints = list(w &gt;= 0, sum(w) == 1))
  solution &lt;- solve(problem)
  w_data[i,] &lt;- solution$getValue(w)
  risk_data[i] &lt;- solution$getValue(sqrt(quad_form(w, Sigma)))
  ret_data[i] &lt;- solution$getValue(t(mu) %*% w)
  }

ggplot() +
  geom_line(mapping = aes(x = risk_data, y = ret_data), color = &quot;blue&quot;) +
  geom_point(mapping = aes(x = sqrt(diag(as.matrix(Sigma))), y = mu), color = &quot;red&quot;)</code></pre>
<p><img src="/post/portfolio-optimisation-models/portfolio-allocation_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
<div id="markowitz-mean-variance-portfolio-2" class="section level3">
<h3>Markowitz mean-variance portfolio</h3>
<p>There are <span class="math inline">\(N\)</span> risky assets which has returns <span class="math inline">\(R_{1}, \dots, R_{N}\)</span> such that the returns are claculated as:</p>
<p><span class="math display">\[R_{n} = \dfrac{P_{n}(1) - P_{n}(0)}{P_{n}(0)}, \text{ n} = 1, 2, \dots, N\]</span>
Then set <span class="math inline">\(\mathbf{w_{N}} = (w_{1} \dots w_{N})^T\)</span> with <span class="math inline">\(w_{N}\)</span> being a proportion of wealth we invest in asset <span class="math inline">\(n\)</span> and therfore <span class="math inline">\(\sum_{n = 1}^N w_{n} = 1\)</span>. We can compute the rate of the return of the portfolio as:</p>
<p><span class="math display">\[R_{P} = \sum_{n = 1}^N w_{n}R_{n}\]</span>
Two assumptions are made:</p>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(\mu = (\overline{R}_{1}, \dots, \overline{R}_{N})\)</span> is linearly independent, otherwise <span class="math inline">\(R_{P}\)</span> is a constant.</li>
<li>There are no assets which are a combination of eachother.</li>
</ol>
<p>We can take the first two moments of <span class="math inline">\(R_{P}\)</span> as:</p>
<p><span class="math display">\[\mu_{P} = E[R_{P}] = \sum_{n = 1}^N E[w_{n}R_{n}] = \sum_{n = 1}^N w_{n}\mu_{n}, \text{ where } \mu_{n} = \overline{R}_{n}\]</span></p>
<p><span class="math display">\[\sigma_{P}^2 = var(R_{P}) = \sum_{i = 1}^N\sum_{j = 1}^N w_{i}w_{j}Cov(R_{i}, R_{j}) = \sum_{i = 1}^N\sum_{j = 1}^Nw_{i}\sigma_{ij}w_{j}\]</span></p>
<p>Let <span class="math inline">\(\Omega\)</span> be the covariance matrix such that:</p>
<p><span class="math display">\[\sigma_{P}^2 = \mathbf{w}^T \Omega \mathbf{w}\]</span></p>
<p>Our objective function becomes:</p>
<p><span class="math display">\[\begin{eqnarray} \min_{w} \dfrac{1}{2} \sum_{i = 1}^N\sum_{j = 1}^N w_{i}w_{j} \sigma_{ij} \\ \text{subject to } \sum_{i = 1}^Nw_{i}\overline{R}_{i} = \mu_{P} \text{ and } \sum_{i = 1}^N w_{i} = 1 \end{eqnarray}\]</span></p>
<p>Therefore we have an expected portfolio return <span class="math inline">\(\mu_{P}\)</span> and we want to find the portfolio strategy which minimises <span class="math inline">\(\sigma_{P}^2\)</span></p>
<p>We set the lagrangian function up using the objective function and the constraints.</p>
<p><span class="math display">\[\mathcal{L} = \dfrac{1}{2} \sum_{i = 1}^N\sum_{j = 1}^NW_{i}W_{j} \sigma_{ij} - \lambda_{1}(\sum_{i = 1}^N w_{i} - 1) - \lambda_{2}(\sum_{i = 1}^Nw_{i}\overline{R}_{i} - \mu_{P})\]</span></p>
<p>Where <span class="math inline">\(\lambda_{1}\)</span> and <span class="math inline">\(\lambda_{2}\)</span> are the Langrangian multipliers.</p>
<p>Taking the derivatives of the lagrangian function:</p>
<p><span class="math display">\[\dfrac{\partial \mathcal{L}} {\partial w_{i}} = \sum_{j = 1}^k \sigma_{ij}w_{j} - \lambda_{1} - \lambda_{2}\overline{R}_{i} = 0\]</span></p>
<p><span class="math display">\[\dfrac{\partial \mathcal{L}} {\partial \lambda_{1}} = \sum_{i = 1}^Nw_{i} - 1 = 0\]</span></p>
<p><span class="math display">\[\dfrac{\partial \mathcal{L}} {\partial \lambda_{2}} = \sum_{i = 1}^Nw_{i}\overline{R}_{i} - \mu_{P} = 0\]</span></p>
<p>With solution <span class="math inline">\(\mathbf{w^{*}} = \Sigma^{-1}(\lambda_{1}\mathbf{1} + \lambda_{2}\mathbf{\mu})\)</span> where <span class="math inline">\(\mathbf{1} = (1, \dots, 1)^T\)</span> and <span class="math inline">\(\mu = (\overline{R}_{1}, \dots, \overline{R}_{N})^T\)</span></p>
</div>
<div id="old-1" class="section level3">
<h3>OLD</h3>
<p>We can compute the worst-case minimum variance portfolio by convex uncertainty:</p>
<p><span class="math display">\[\begin{eqnarray} \min_{w} \max_{\Sigma \in \Phi_{\Sigma}} \Sigma w \\ \text{subject to } 1^{T}w = 1 \end{eqnarray}\]</span>
With sample covariance <span class="math inline">\(\hat{\Sigma} = \dfrac{1}{T}X^{T}X\)</span>, <span class="math inline">\(X\)</span> being a <span class="math inline">\(TxN\)</span> returns matrix.</p>
</div>
<div id="old-2" class="section level3">
<h3>OLD</h3>
<p><span class="math display">\[\begin{eqnarray} \min_{w} \sum_{m,n = 1}^k \dfrac{1}{2} W_{m}W_{n} \Sigma_{mn} \\ \text{subject to } \sum_{n = 1}^k w_{n} = 1 \end{eqnarray}\]</span></p>
<p>Where <span class="math inline">\(\Sigma{mn}\)</span> is the variance covariance matrix.</p>
<p>We set the lagrangian function up using the objective function and the constraints.</p>
<p><span class="math display">\[\mathcal{L} = \dfrac{1}{2} W_{m}W_{n} \Sigma_{mn} - \lambda[\sum_{m,n = 1}^k w_{n} - 1]\]</span></p>
<p>Taking the derivatives of the lagrangian function:</p>
<p><span class="math display">\[\dfrac{\partial \mathcal{L}} {\partial w_{1}} = \sum_{n = 1}^k \Sigma_{1n}w_{n} - \lambda = 0\]</span>
<span class="math display">\[\dfrac{\partial \mathcal{L}} {\partial w_{2}} = \sum_{n = 1}^k \Sigma_{2n}w_{n} - \lambda = 0\]</span>
Up to <span class="math inline">\(k\)</span> assets.</p>
<p><span class="math display">\[\dfrac{\partial \mathcal{L}} {\partial w_{k}} = \sum_{n = 1}^k \Sigma_{kn}w_{n} - \lambda = 0\]</span></p>
<p>And finally take the derivative with respect to the lagrange.</p>
<p><span class="math display">\[\dfrac{\partial \mathcal{L}} {\partial \lambda} = \sum_{n = 1}^kw_{n} -1 = 0\]</span></p>
<p><span class="math display">\[
\left(\begin{array}{cccc} 
&amp;   &amp;     -1 \\
&amp; \left[\begin{array}{ccc}
          &amp; &amp;  \\
          &amp; \Sigma &amp;  \\
          &amp; &amp;  \\
  \end{array}\right]
&amp;   \vdots \\
&amp;  &amp;     -1 \\
1 &amp; ... &amp;  0  \\
\end{array}\right)
\left(\begin{array}{c} 
w_{1} \\
 \\
\vdots \\
 \\
w_{k} \\
\lambda
\end{array}\right)
=
\left(\begin{array}{c} 
0 \\
 \\
\vdots \\
 \\
0 \\
1
\end{array}\right)
\]</span></p>
<p>Which represents the variance covariance of the assets. If we can invert the first matrix then we have a solution to the system.</p>
<p><span class="math display">\[
\left(\begin{array}{c}
w_{1} \\
 \\
\vdots \\
 \\
w_{k} \\
\lambda
\end{array}\right) =
\left(\begin{array}{cccc} 
&amp;   &amp;     -1 \\
&amp; \left[\begin{array}{ccc}
          &amp; &amp;  \\
          &amp; \Sigma &amp;  \\
          &amp; &amp;  \\
  \end{array}\right]
&amp;   \vdots \\
&amp;  &amp;     -1 \\
1 &amp; ... &amp;  0  \\
\end{array}\right)
\left(\begin{array}{c}
0 \\
 \\
\vdots \\
 \\
0 \\
1
\end{array}\right)
\]</span></p>
<p>Which gives us the unique solution to the optimisation of the minimum variance portfolio problem.</p>
<p>####Taking a simple 2 asset example:</p>
<p>Suppse we have 2 risky assets which give expected returns and subsequent variance</p>
<p><span class="math inline">\(E(R_{A}) = 20\%\)</span> and <span class="math inline">\(\sigma_{A} = 10\%\)</span>
<span class="math inline">\(E(R_{B}) = 30\%\)</span> and <span class="math inline">\(\sigma_{B} = 20\%\)</span></p>
<p>Where both assets have a correlation of <span class="math inline">\(\rho_{AB} = 0.4\)</span></p>
<p>The objective is to find the expected return and volatility of the minimum variance portfolio such that;</p>
<p><span class="math display">\[\sigma^2 = \sigma_{A}^2 (W_{A})^2 + \sigma_{B}^2(W_{B})^2 + 2\sigma_{A}\sigma_{B}W_{A}W_{B}\rho_{AB}\]</span></p>
<p>Where;
<span class="math display">\[\sum w_{A} + w_{B} = 1\]</span></p>
<p><span class="math display">\[ \sigma^2 = (0.1)^2w_{A}^2 + (0.2)^2(1-W_{A})^2 + 2(0.1)(0.2)w_{A}(1-w_{A}(0.4)\]</span></p>
<p><span class="math display">\[ \sigma^2 = 0.034w_{A}^2 - 0.064W_{A} + 0.04\]</span></p>
<p><span class="math display">\[\dfrac{\partial \sigma^2} {\partial w_{A}} = 0.068w_{A} - 0.064 = 0\]</span></p>
<p><span class="math display">\[w_{A} = 0.94\]</span>
<span class="math display">\[w_{B} = 1 - 0.94 = 0.06\]</span></p>
<p>We check if the variance is the minimum by taking the second derivative.</p>
<p><span class="math display">\[\dfrac{\partial^2 \sigma^2} {\partial^2 w_{A}^2} = 0.068 &gt; 0\]</span></p>
<p>Therefore expected returns is cmputed as:</p>
<p><span class="math display">\[E(R) = E(R_{A})w_{A} + E(R_{B})w_{B}\]</span></p>
<p><span class="math display">\[E(R) = (0.2)(0.94) + (0.3)(0.06) = 0.206\]</span></p>
<p>The variance is computed as:</p>
<p><span class="math display">\[\sigma^2 = 0.034(0.94)^2 - 0.064(0.94) + 0.04 = 0.00988\]</span>
To estimate the volatility we can take the square root of the variance.</p>
<p><span class="math display">\[ \textrm{volatility} = \sqrt{\sigma^2} = 0.0994\]</span></p>
<p>Therefore the portfolio has a <span class="math inline">\(9.94\%\)</span> volatility and an expected return of <span class="math inline">\(20.6\%\)</span></p>
<p>We can solve this in R using:</p>
</div>
</div>

    </div>

    


    

<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/time-series/">time-series</a>
  
  <a class="badge badge-light" href="/tags/finance/">finance</a>
  
  <a class="badge badge-light" href="/tags/quant-finance/">quant finance</a>
  
  <a class="badge badge-light" href="/tags/yahoo-finance/">yahoo-finance</a>
  
  <a class="badge badge-light" href="/tags/portfolio-optimisation/">portfolio optimisation</a>
  
  <a class="badge badge-light" href="/tags/asset-pricing/">asset pricing</a>
  
</div>



    
      








  
  
    
  
  






  
  
  
    
  
  
  <div class="media author-card">
    
      
      <img class="portrait mr-3" src="/authors/admin/avatar_hu88685f9f250f5c15d78dab2d9552b11c_15179_250x250_fill_q90_lanczos_center.jpg" alt="Avatar">
    

    <div class="media-body">
      <h5 class="card-title"><a href="/">Matthew Smith</a></h5>
      <h6 class="card-subtitle">Researcher</h6>
      <p class="card-text">I am a researcher with a focus on Machine Learning methods applied to economics and finance.</p>
      <ul class="network-icon" aria-hidden="true">
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a href="/#contact" >
              <i class="fas fa-envelope"></i>
            </a>
          </li>
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a href="https://twitter.com/MatthewSmith786" target="_blank" rel="noopener">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
        
          
          
          
          
          
          
          
            
          
          <li>
            <a href="https://scholar.google.co.uk/" target="_blank" rel="noopener">
              <i class="ai ai-google-scholar"></i>
            </a>
          </li>
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a href="https://github.com/msmith01" target="_blank" rel="noopener">
              <i class="fab fa-github"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>



      
      
      <div class="article-widget">
        <div class="hr-light"></div>
        <h3>Related</h3>
        <ul>
          
          <li><a href="/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation/">Factor Modeling in R</a></li>
          
          <li><a href="/post/yahoo-finance-ipo/">Scraping Yahoo Finance IPO Data</a></li>
          
          <li><a href="/post/nvidia-share-price/">Tracking NVDA&#39;s share price</a></li>
          
          <li><a href="/post/synth-real-time-series/financial-time-series/">Time Series Classification Synthetic vs Real Financial Time Series</a></li>
          
          <li><a href="/post/quantstrat-rolling-logistic/quantstrat/">Learning the Quantstrat and Blotter packages</a></li>
          
        </ul>
      </div>
      
    

    

    
<section id="comments">
  
    
<div id="disqus_thread"></div>
<script>
  let disqus_config = function () {
    
    
    
  };
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
      return;
    }
    var d = document, s = d.createElement('script'); s.async = true;
    s.src = 'https://' + "lf0-com" + '.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  
</section>



  </div>
</article>

      

    
    
    
    <script src="/js/mathjax-config.js"></script>
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js" integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/r.min.js"></script>
        
      

      
      
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_CHTML-full" integrity="sha256-GhM+5JHb6QUzOQPXSJLEWP7R73CbkisjzK5Eyij4U9w=" crossorigin="anonymous" async></script>
      
    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.js" integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log==" crossorigin="anonymous"></script>
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Search...",
        'results': "results found",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    <script id="dsq-count-scr" src="https://lf0-com.disqus.com/count.js" async></script>
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.130521ecfc6f534c52c158217bbff718.js"></script>

    






  
  <div class="container">
    <footer class="site-footer">
  
  <p class="powered-by">
    
      <a href="/privacy/">Privacy Policy</a>
    
    
       &middot; 
      <a href="/terms/">Terms</a>
        
  </p>
  

  <p class="powered-by">
    

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" id="back_to_top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
