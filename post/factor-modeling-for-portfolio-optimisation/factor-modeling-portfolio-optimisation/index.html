<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.5.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Matthew Smith">

  
  
  
    
  
  <meta name="description" content="I break down some popular and fundamental models from quantitative finance &amp; engineering, construct some factor analysis on a series of Assets and EFTs along with a randomly generated portfolio constructed from scraping tickers from the SPY500 wikipedia page.">

  
  <link rel="alternate" hreflang="en-us" href="/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation/">

  


  
  
  
  <meta name="theme-color" content="#3f51b5">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.css" integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ==" crossorigin="anonymous">
    

    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  <link rel="stylesheet" href="/css/academic.min.5949897e171a43c4edc8bc03336e8676.css">

  

  
  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-151949400-1', 'auto');
      
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="https://www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon-32.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation/">

  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="twitter:site" content="@MatthewSmith786">
  <meta property="twitter:creator" content="@MatthewSmith786">
  
  <meta property="og:site_name" content="Matthew Smith R Shenanigans">
  <meta property="og:url" content="/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation/">
  <meta property="og:title" content="Factor Modeling in R | Matthew Smith R Shenanigans">
  <meta property="og:description" content="I break down some popular and fundamental models from quantitative finance &amp; engineering, construct some factor analysis on a series of Assets and EFTs along with a randomly generated portfolio constructed from scraping tickers from the SPY500 wikipedia page."><meta property="og:image" content="/img/icon-192.png">
  <meta property="twitter:image" content="/img/icon-192.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2019-11-14T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2019-11-14T00:00:00&#43;00:00">
  

  


    






  






<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation/"
  },
  "headline": "Factor Modeling in R",
  
  "datePublished": "2019-11-14T00:00:00Z",
  "dateModified": "2019-11-14T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Matthew Smith"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Matthew Smith R Shenanigans",
    "logo": {
      "@type": "ImageObject",
      "url": "/img/icon-512.png"
    }
  },
  "description": "I break down some popular and fundamental models from quantitative finance \u0026 engineering, construct some factor analysis on a series of Assets and EFTs along with a randomly generated portfolio constructed from scraping tickers from the SPY500 wikipedia page."
}
</script>

  

  


  


  





  <title>Factor Modeling in R | Matthew Smith R Shenanigans</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0 compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">Matthew Smith R Shenanigans</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav ml-auto">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Posts</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/courses/"><span>Courses</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contact</span></a>
        </li>

        
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Blogroll</span><span class="caret"></span>
          </a>
          <ul class="dropdown-menu">
            
            <li class="dropdown-item my-0 py-0 mx-0 px-0">
              <a href="https://www.linkedin.com/in/msmithsm14/"><span>LinkedIn</span></a>
            </li>
            
            <li class="dropdown-item my-0 py-0 mx-0 px-0">
              <a href="https://www.r-bloggers.com"><span>R-bloggers</span></a>
            </li>
            
          </ul>
        </li>

        
        

      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>


  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Factor Modeling in R</h1>

  
  <p class="page-subtitle">Portfolio Analysis using R</p>
  

  
    



<div class="article-metadata">

  
  
  
  
  <div>
    



  <span><a href="/authors/admin/">Matthew Smith</a></span>

  </div>
  
  

  
  <span class="article-date">
    
    
      
    
    Nov 14, 2019
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    35 min read
  </span>
  

  
  
  
  <span class="middot-divider"></span>
  <a href="/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation/#disqus_thread"></a>
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/categories/mathematical-finance/">Mathematical Finance</a>, <a href="/categories/econometrics/">Econometrics</a></span>
  

  
    
<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation/&amp;text=Factor%20Modeling%20in%20R" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation/&amp;t=Factor%20Modeling%20in%20R" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook-f"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Factor%20Modeling%20in%20R&amp;body=/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation/&amp;title=Factor%20Modeling%20in%20R" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=Factor%20Modeling%20in%20R%20/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation/&amp;title=Factor%20Modeling%20in%20R" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>


  

</div>

    













<div class="btn-links mb-3">
  
  








  









  
    
  











</div>


  
</div>



  <div class="article-container">

    <div class="article-style">
      
<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<script src="/rmarkdown-libs/threejs/three.min.js"></script>
<script src="/rmarkdown-libs/threejs/Detector.js"></script>
<script src="/rmarkdown-libs/threejs/Projector.js"></script>
<script src="/rmarkdown-libs/threejs/CanvasRenderer.js"></script>
<script src="/rmarkdown-libs/threejs/TrackballControls.js"></script>
<script src="/rmarkdown-libs/threejs/StateOrbitControls.js"></script>
<script src="/rmarkdown-libs/scatterplotThree-binding/scatterplotThree.js"></script>
<link href="/rmarkdown-libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/crosstalk/js/crosstalk.min.js"></script>
<script src="/rmarkdown-libs/plotly-binding/plotly.js"></script>
<script src="/rmarkdown-libs/typedarray/typedarray.min.js"></script>
<link href="/rmarkdown-libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="/rmarkdown-libs/plotly-main/plotly-latest.min.js"></script>


<p>The most popular models for analysing the risk of portfolios are factor models, since stocks have a tendency to move together. The principal component of securities often explains a large share of it’s variance. Since we are mostly concerned with multiple assets which form a portfolio we need to account for this. Some questions might be <em>why do stocks with low Price to Book ratios outperform stocks with higher Price to Book ratios?</em> Here the “Price” part of the ratio is simply the share price (per share) and the “Book” part of the ratio is the “Shareholders Equity” / “Shares Outstanding” which are items found on a companies Balance Sheet.</p>
<p>Another important reason Factor models are popular are dimensionality. Assume <span class="math inline">\(N\)</span> assets which subsequently has <span class="math inline">\(N\)</span> variances and <span class="math inline">\(N(N-1)/2\)</span> correlations. If we have a factor model with <span class="math inline">\(F\)</span> factors, it has <span class="math inline">\(N\)</span> idiosyncratic variances, <span class="math inline">\(F\)</span> factor variances and <span class="math inline">\(NF\)</span> betas. As long as:</p>
<p><span class="math display">\[2F &lt; N(N-1)/(N+1)\]</span></p>
<p>We have fewer parameters with factor models.</p>
<p>The Capital Asset Pricing Model <span class="citation">Sharpe (<a href="#ref-sharpe1964capital" role="doc-biblioref">1964</a>)</span> is the simplest factor model consisting of a single factor.</p>
<p><span class="math display">\[r_i = a_i + b_if + e_i\]</span></p>
<p>The mean-variance parameters are:</p>
<p><span class="math display">\[\overline{r}_i = a_{i} + b_{i}\overline{y}\]</span>
<span class="math display">\[\sigma_{i}^2 = b_{i}^2\sigma_{\epsilon_{i}}^2\]</span></p>
<p><span class="math display">\[\sigma_{ij} = b_{i}b_{j}\sigma_{y}^2\]</span></p>
<p>The <span class="math inline">\(Cov(r_{i}, y) = Cov(a_{i} + b_{i}y + e_{i}, y) = b_{i}\sigma_{y}^2\)</span> and therefore <span class="math inline">\(b_{i}\)</span> is;</p>
<p><span class="math display">\[b_{i} = \dfrac{Cov(r_{i}, y)}{\sigma_{y}^2}\]</span></p>
<p>This is alternatively expressed as;</p>
<p><span class="math display">\[b_{i} = Cov(r_{i}, y) / Var(y)\]</span></p>
<p>Where <span class="math inline">\(b\)</span> is the slope of the regression line which minimises the squared distance of returns and <span class="math inline">\(a\)</span> is the intercept or <span class="math inline">\(alpha\)</span> which are expressed on a line <span class="math inline">\(a + bf\)</span>.</p>
<p>I will go through these calculations using <em>Base R</em> functions, however first we need some data and for this I like the <em>tidy</em> functions which require a few packages.</p>
<p>I download daily price data from Yahoo Finance using <code>quantmod</code> or <code>tidyquant</code>’s wrapper to the <code>quantmod</code> package. The difference here being that <code>quantmod</code> collects data and stores it as an <code>xts</code> object and <code>tidyquant</code> collects the data and stores it as a <code>tibble</code>, from here we are able to more easily use functions from the <code>tidyverse</code> way of handling data, we convert the data back to an <code>xts</code> object using the <code>tk_xts</code> function from the <code>timetk</code> package.</p>
<p>The firms are Apple, Harley Davidson, Nvidia, Microsoft, AMD, Ford, General Electric, 3M, Intel and Amazon.</p>
<pre class="r"><code>library(quantmod)
library(ggplot2)
library(tidyquant)
library(tidyr)
library(dplyr)
library(timetk)
library(tibble)
library(rvest)
library(corrplot) 
library(stringr)

start_date &lt;- &quot;2017-01-01&quot;
end_date &lt;- &quot;2019-01-01&quot;

symbols &lt;- c(&quot;AAPL&quot;, &quot;HOG&quot;, &quot;NVDA&quot;, &quot;MSFT&quot;, &quot;AMD&quot;, &quot;F&quot;, &quot;GE&quot;, &quot;MMM&quot;, &quot;INTL&quot;, &quot;AMZN&quot;)

portfolio_prices &lt;- tq_get(
  symbols,
  from = start_date,
  to = end_date
  ) %&gt;%
  select(symbol, date, adjusted) %&gt;% 
  pivot_wider(names_from = symbol, values_from = adjusted) %&gt;% 
  tk_xts(date_var = date)</code></pre>
<p>The data looks like the following, I removed the <code>Open</code>, <code>High</code>, <code>Low</code>, <code>Close</code> and <code>Volume</code> data and kept just the <code>Adjusted</code> prices, where each asset is it’s own column, the data has been converted into a time series object or an <code>xts</code> object where the <code>date</code> is stored as the index (or rownames) and is not visable in the table below.</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
AAPL
</th>
<th style="text-align:right;">
HOG
</th>
<th style="text-align:right;">
NVDA
</th>
<th style="text-align:right;">
MSFT
</th>
<th style="text-align:right;">
AMD
</th>
<th style="text-align:right;">
F
</th>
<th style="text-align:right;">
GE
</th>
<th style="text-align:right;">
MMM
</th>
<th style="text-align:right;">
INTL
</th>
<th style="text-align:right;">
AMZN
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
110.9539
</td>
<td style="text-align:right;">
53.59669
</td>
<td style="text-align:right;">
101.0116
</td>
<td style="text-align:right;">
59.49657
</td>
<td style="text-align:right;">
11.43
</td>
<td style="text-align:right;">
10.43042
</td>
<td style="text-align:right;">
28.13062
</td>
<td style="text-align:right;">
165.3643
</td>
<td style="text-align:right;">
40.41
</td>
<td style="text-align:right;">
753.67
</td>
</tr>
<tr>
<td style="text-align:right;">
110.8297
</td>
<td style="text-align:right;">
54.18777
</td>
<td style="text-align:right;">
103.3683
</td>
<td style="text-align:right;">
59.23036
</td>
<td style="text-align:right;">
11.43
</td>
<td style="text-align:right;">
10.91093
</td>
<td style="text-align:right;">
28.13950
</td>
<td style="text-align:right;">
165.6151
</td>
<td style="text-align:right;">
40.86
</td>
<td style="text-align:right;">
757.18
</td>
</tr>
<tr>
<td style="text-align:right;">
111.3933
</td>
<td style="text-align:right;">
54.24233
</td>
<td style="text-align:right;">
100.7443
</td>
<td style="text-align:right;">
59.23036
</td>
<td style="text-align:right;">
11.24
</td>
<td style="text-align:right;">
10.57954
</td>
<td style="text-align:right;">
27.97971
</td>
<td style="text-align:right;">
165.0485
</td>
<td style="text-align:right;">
38.77
</td>
<td style="text-align:right;">
780.45
</td>
</tr>
<tr>
<td style="text-align:right;">
112.6351
</td>
<td style="text-align:right;">
53.74219
</td>
<td style="text-align:right;">
102.0910
</td>
<td style="text-align:right;">
59.74376
</td>
<td style="text-align:right;">
11.32
</td>
<td style="text-align:right;">
10.57126
</td>
<td style="text-align:right;">
28.05961
</td>
<td style="text-align:right;">
165.5315
</td>
<td style="text-align:right;">
38.71
</td>
<td style="text-align:right;">
795.99
</td>
</tr>
<tr>
<td style="text-align:right;">
113.6668
</td>
<td style="text-align:right;">
52.87832
</td>
<td style="text-align:right;">
106.2301
</td>
<td style="text-align:right;">
59.55362
</td>
<td style="text-align:right;">
11.49
</td>
<td style="text-align:right;">
10.46355
</td>
<td style="text-align:right;">
27.92646
</td>
<td style="text-align:right;">
164.6399
</td>
<td style="text-align:right;">
38.33
</td>
<td style="text-align:right;">
796.92
</td>
</tr>
<tr>
<td style="text-align:right;">
113.7815
</td>
<td style="text-align:right;">
53.19659
</td>
<td style="text-align:right;">
105.4280
</td>
<td style="text-align:right;">
59.53460
</td>
<td style="text-align:right;">
11.44
</td>
<td style="text-align:right;">
10.64582
</td>
<td style="text-align:right;">
27.84656
</td>
<td style="text-align:right;">
163.9991
</td>
<td style="text-align:right;">
38.46
</td>
<td style="text-align:right;">
795.90
</td>
</tr>
</tbody>
</table>
<p>I also collect the S&amp;P500 data using the same method:</p>
<pre class="r"><code>SPY &lt;- tq_get(
  &quot;^GSPC&quot;,
  from = start_date,
  to = end_date
) %&gt;% 
  select(date, adjusted) %&gt;% 
  tk_xts(date_var = date)</code></pre>
<p>Which looks similar to the individual asset prices.</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
adjusted
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
2257.83
</td>
</tr>
<tr>
<td style="text-align:right;">
2270.75
</td>
</tr>
<tr>
<td style="text-align:right;">
2269.00
</td>
</tr>
<tr>
<td style="text-align:right;">
2276.98
</td>
</tr>
<tr>
<td style="text-align:right;">
2268.90
</td>
</tr>
<tr>
<td style="text-align:right;">
2268.90
</td>
</tr>
</tbody>
</table>
<p>We can plot the data using the <code>chartSeries</code> function.</p>
<pre class="r"><code>chartSeries(SPY)</code></pre>
<p><img src="/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>I compute the daily log returns for all the assets in the <code>portfolio_returns</code> and the <code>SPY</code> returns</p>
<pre class="r"><code>portfolio_returns &lt;- diff(log(portfolio_prices), na.pad = FALSE)
SPY_returns &lt;- diff(log(SPY), na.pad = FALSE)</code></pre>
<p>The returns data for each asset looks like:</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
AAPL
</th>
<th style="text-align:right;">
HOG
</th>
<th style="text-align:right;">
NVDA
</th>
<th style="text-align:right;">
MSFT
</th>
<th style="text-align:right;">
AMD
</th>
<th style="text-align:right;">
F
</th>
<th style="text-align:right;">
GE
</th>
<th style="text-align:right;">
MMM
</th>
<th style="text-align:right;">
INTL
</th>
<th style="text-align:right;">
AMZN
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
-0.001119731
</td>
<td style="text-align:right;">
0.010967925
</td>
<td style="text-align:right;">
0.023062871
</td>
<td style="text-align:right;">
-0.0044844490
</td>
<td style="text-align:right;">
0.000000000
</td>
<td style="text-align:right;">
0.0450387901
</td>
<td style="text-align:right;">
0.0003155849
</td>
<td style="text-align:right;">
0.001515279
</td>
<td style="text-align:right;">
0.011074335
</td>
<td style="text-align:right;">
0.004646413
</td>
</tr>
<tr>
<td style="text-align:right;">
0.005072384
</td>
<td style="text-align:right;">
0.001006252
</td>
<td style="text-align:right;">
-0.025713094
</td>
<td style="text-align:right;">
0.0000000000
</td>
<td style="text-align:right;">
-0.016762633
</td>
<td style="text-align:right;">
-0.0308429974
</td>
<td style="text-align:right;">
-0.0056944999
</td>
<td style="text-align:right;">
-0.003426713
</td>
<td style="text-align:right;">
-0.052504862
</td>
<td style="text-align:right;">
0.030269695
</td>
</tr>
<tr>
<td style="text-align:right;">
0.011086527
</td>
<td style="text-align:right;">
-0.009263191
</td>
<td style="text-align:right;">
0.013278832
</td>
<td style="text-align:right;">
0.0086305184
</td>
<td style="text-align:right;">
0.007092228
</td>
<td style="text-align:right;">
-0.0007833275
</td>
<td style="text-align:right;">
0.0028513212
</td>
<td style="text-align:right;">
0.002921873
</td>
<td style="text-align:right;">
-0.001548813
</td>
<td style="text-align:right;">
0.019715919
</td>
</tr>
<tr>
<td style="text-align:right;">
0.009117836
</td>
<td style="text-align:right;">
-0.016204986
</td>
<td style="text-align:right;">
0.039742771
</td>
<td style="text-align:right;">
-0.0031877844
</td>
<td style="text-align:right;">
0.014906019
</td>
<td style="text-align:right;">
-0.0102405428
</td>
<td style="text-align:right;">
-0.0047565496
</td>
<td style="text-align:right;">
-0.005400948
</td>
<td style="text-align:right;">
-0.009865007
</td>
<td style="text-align:right;">
0.001167666
</td>
</tr>
<tr>
<td style="text-align:right;">
0.001008053
</td>
<td style="text-align:right;">
0.006000910
</td>
<td style="text-align:right;">
-0.007578959
</td>
<td style="text-align:right;">
-0.0003193095
</td>
<td style="text-align:right;">
-0.004361106
</td>
<td style="text-align:right;">
0.0172690614
</td>
<td style="text-align:right;">
-0.0028650791
</td>
<td style="text-align:right;">
-0.003899774
</td>
<td style="text-align:right;">
0.003385783
</td>
<td style="text-align:right;">
-0.001280696
</td>
</tr>
<tr>
<td style="text-align:right;">
0.005358706
</td>
<td style="text-align:right;">
-0.008411454
</td>
<td style="text-align:right;">
-0.012380417
</td>
<td style="text-align:right;">
0.0090613598
</td>
<td style="text-align:right;">
-0.021202208
</td>
<td style="text-align:right;">
-0.0141067872
</td>
<td style="text-align:right;">
0.0031828276
</td>
<td style="text-align:right;">
0.007391130
</td>
<td style="text-align:right;">
0.009059257
</td>
<td style="text-align:right;">
0.003912422
</td>
</tr>
</tbody>
</table>
<p>We can use the <code>autoplot</code> to plot <code>xts</code> or time series data with <code>ggplot</code> functionality, (I only plot the first 3 assets):</p>
<pre class="r"><code>autoplot(portfolio_returns[,1:3]) +
  xlab(&quot;Date&quot;) +
  ggtitle(&quot;Asset Log Returns&quot;) +
  theme_tq()</code></pre>
<p><img src="/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<div id="technical-r" class="section level3">
<h3>Technical R:</h3>
<div id="from-here-i-will-talk-a-little-more-technically-but-will-keep-it-as-simple-as-possible." class="section level4">
<h4>From here I will talk a little more <em>technically</em> but will keep it as simple as possible.</h4>
<p>Next I compute the calculations described at the begining of the post. We first need to define a few things:</p>
<ul>
<li>The number of assets we have in the portfolio, denoted previously as <span class="math inline">\(N\)</span></li>
<li>The number of days we apply our model which is usually denoted as <span class="math inline">\(T\)</span>.</li>
</ul>
<pre class="r"><code>N_portfolio &lt;- ncol(portfolio_prices)
days &lt;- nrow(portfolio_prices)</code></pre>
</div>
<div id="a-we-can-compute-beta-as-the-following" class="section level4">
<h4>(a) We can compute <span class="math inline">\(\beta\)</span> as the following:</h4>
<pre class="r"><code>beta &lt;- cov(portfolio_returns, SPY_returns) / as.numeric(var(SPY_returns))</code></pre>
<p>Which returns:</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
adjusted
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:right;">
1.2722563
</td>
</tr>
<tr>
<td style="text-align:left;">
HOG
</td>
<td style="text-align:right;">
0.8957108
</td>
</tr>
<tr>
<td style="text-align:left;">
NVDA
</td>
<td style="text-align:right;">
1.9681667
</td>
</tr>
<tr>
<td style="text-align:left;">
MSFT
</td>
<td style="text-align:right;">
1.4221581
</td>
</tr>
<tr>
<td style="text-align:left;">
AMD
</td>
<td style="text-align:right;">
1.8544079
</td>
</tr>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:right;">
0.8626349
</td>
</tr>
</tbody>
</table>
<p>However, in order to understand it better we can break it down each of the computations:</p>
The <span class="math inline">\(cov\)</span> covariance matrix part of the <span class="math inline">\(beta\)</span> formula looks like:
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
adjusted
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:right;">
0.0000852
</td>
</tr>
<tr>
<td style="text-align:left;">
HOG
</td>
<td style="text-align:right;">
0.0000600
</td>
</tr>
<tr>
<td style="text-align:left;">
NVDA
</td>
<td style="text-align:right;">
0.0001318
</td>
</tr>
<tr>
<td style="text-align:left;">
MSFT
</td>
<td style="text-align:right;">
0.0000953
</td>
</tr>
<tr>
<td style="text-align:left;">
AMD
</td>
<td style="text-align:right;">
0.0001242
</td>
</tr>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:right;">
0.0000578
</td>
</tr>
<tr>
<td style="text-align:left;">
GE
</td>
<td style="text-align:right;">
0.0000548
</td>
</tr>
<tr>
<td style="text-align:left;">
MMM
</td>
<td style="text-align:right;">
0.0000714
</td>
</tr>
<tr>
<td style="text-align:left;">
INTL
</td>
<td style="text-align:right;">
0.0000576
</td>
</tr>
<tr>
<td style="text-align:left;">
AMZN
</td>
<td style="text-align:right;">
0.0001056
</td>
</tr>
</tbody>
</table>
<p>We can compute the covariances using base R as follows:</p>
<p><span class="math display">\[Cov(x, y) = \sum_{i=1}^N \dfrac{((x_i - \overline{x}) (y_{i} - \overline{y}))}{(n-1)}\]</span>
Where <span class="math inline">\(x_{i}\)</span> is our asset and <span class="math inline">\(y_{i}\)</span> is the SPY500. In R we can compute this as:</p>
<pre class="r"><code>x = portfolio_returns[,1] # which takes the first Asset in the portfolio_returns data
x_bar = colMeans(x)

y = SPY_returns[,1]
y_bar = colMeans(y)

n = length(x)
sum(((x - x_bar)*(y - y_bar))) / (n-1)</code></pre>
<pre><code>## [1] 0.00008521578</code></pre>
<p>Which corresponds to the first result, <code>AAPL</code> in the <code>cov(portfolio_returns, SPY_returns)</code> calculation. We can change the <span class="math inline">\(1\)</span> in <code>x = portfolio_returns[,1]</code> to <span class="math inline">\(2\)</span>, <span class="math inline">\(3\)</span>, <span class="math inline">\(4\)</span> … <span class="math inline">\(N\)</span> to compute the covariances for each of the assets (<code>HOG</code>, <code>NVDA</code> and <code>MSFT</code>, respectively), or we can wrap the above into a <em>for loop</em> to compute for all assets. <strong>Note:</strong> I only changed the <span class="math inline">\(1\)</span> to an <span class="math inline">\(i\)</span> from the above equation in the <em>for loop</em>, everything else is constant.</p>
<pre class="r"><code>for(i in 1:ncol(portfolio_returns)){
  x = portfolio_returns[,i]
  x_bar = colMeans(x)
  y = SPY_returns[,1]
  y_bar = colMeans(y)
  cov_x_y = sum(((x - x_bar)*(y - y_bar))) / (n-1)
  print(cov_x_y)
}</code></pre>
<pre><code>## [1] 0.00008521578
## [1] 0.00005999475
## [1] 0.0001318279
## [1] 0.00009525621
## [1] 0.0001242083
## [1] 0.00005777932
## [1] 0.00005477266
## [1] 0.00007136762
## [1] 0.0000575575
## [1] 0.0001056044</code></pre>
<p>The variance of the SPY returns is.</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
x
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0.000067
</td>
</tr>
</tbody>
</table>
<p>Which is calculated as:</p>
<p><span class="math display">\[Var = \sum(\dfrac{((y - \overline{y})^2)} {(n-1)})\]</span>
In base R we can simply calculate it as:</p>
<pre class="r"><code>n = length(SPY_returns)
y = SPY_returns[,1]
y_bar = colMeans(y)

sum(((y - y_bar)**2) / (n-1))</code></pre>
<pre><code>## [1] 0.00006698004</code></pre>
<p>Putting all this together, we can compute <span class="math inline">\(beta\)</span>. Recall, that <span class="math inline">\(\beta = \dfrac{Cov(r_{i}, y)}{Var(y)}\)</span> where here <span class="math inline">\(r_{i}\)</span> is each of our assets in our portfolio and <span class="math inline">\(y\)</span> is the <em>market</em> returns or SPY500 returns.</p>
<p>To compute <span class="math inline">\(beta\)</span> for each of our assets using base R we can wrap the above code into a function:</p>
<pre class="r"><code>myBetaComputation &lt;- function(ASSET){
  x = ASSET                   # which Asset in the portfolio_returns data we want to compute beta for.
  x_bar = colMeans(x)
  
  y = SPY_returns[,1]
  y_bar = colMeans(y)
  
  cov_x_y &lt;- sum(((x - x_bar)*(y - y_bar))) / (n-1)
  
  
  n = length(SPY_returns)
  y = SPY_returns[,1]
  y_bar = colMeans(y)
  
  var_y &lt;- sum(((y - y_bar)**2) / (n-1))
  
  return(cov_x_y / var_y)
}</code></pre>
<p>We can apply this function to individual assets in our data and then all of them:</p>
<pre class="r"><code>myBetaComputation(portfolio_returns[,1])        # Computes for the first asset</code></pre>
<pre><code>## [1] 1.272256</code></pre>
<pre class="r"><code>myBetaComputation(portfolio_returns[,2])        # Computes for the second asset</code></pre>
<pre><code>## [1] 0.8957108</code></pre>
<pre class="r"><code>sapply(portfolio_returns, myBetaComputation)    # Computes for all assets</code></pre>
<pre><code>##      AAPL       HOG      NVDA      MSFT       AMD         F        GE       MMM 
## 1.2722563 0.8957108 1.9681667 1.4221581 1.8544079 0.8626349 0.8177459 1.0655057 
##      INTL      AMZN 
## 0.8593232 1.5766544</code></pre>
<p>The interpretation here is that a value of 1 indicates that the asset moves in perfect correlation with the market, values <span class="math inline">\(&gt;\)</span> 1 indicate that an asset moves more than when the market moves or moves with more volatility when the market moves and values <span class="math inline">\(&lt;\)</span> 1 indicates that an asset moves less than the market.</p>
<p>Typically Tech stocks have a higher market <span class="math inline">\(\beta\)</span> whereas mature non-tech stocks have a lower market <span class="math inline">\(\beta\)</span>. That is, AAPL, NVDA, MSFT and AMD all have betas above 1 whereas HOG and Ford (F) have <span class="math inline">\(\beta\)</span>’s less than 1.</p>
</div>
<div id="b-we-can-compute-alpha-as-the-following" class="section level4">
<h4>(b) We can compute <span class="math inline">\(\alpha\)</span> as the following:</h4>
<p>Now that we have <span class="math inline">\(\beta\)</span> we can estimate <span class="math inline">\(\alpha\)</span> for each of our assets in our portfolio.</p>
<p>Recall, that alpha is defined as;</p>
<p><span class="math display">\[\alpha = \overline{r_{i}} - \beta_{i}*\overline{f}\]</span></p>
<p>Where <span class="math inline">\(\overline{r_{i}}\)</span> is the average returns of our individual assets in our portfolio, <span class="math inline">\(\beta_{i}\)</span> is the beta of each asset over our sample period and <span class="math inline">\(\overline{f}\)</span> is the average returns of SPY. Therefore, we can compute <span class="math inline">\(\alpha\)</span> as;</p>
<pre class="r"><code>alpha &lt;- colMeans(portfolio_returns) - beta*colMeans(SPY_returns)</code></pre>
<p>The alpha or <span class="math inline">\(\alpha\)</span> for our assests, looks like:</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
adjusted
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:right;">
0.0004068
</td>
</tr>
<tr>
<td style="text-align:left;">
HOG
</td>
<td style="text-align:right;">
-0.0011516
</td>
</tr>
<tr>
<td style="text-align:left;">
NVDA
</td>
<td style="text-align:right;">
0.0001393
</td>
</tr>
<tr>
<td style="text-align:left;">
MSFT
</td>
<td style="text-align:right;">
0.0007480
</td>
</tr>
<tr>
<td style="text-align:left;">
AMD
</td>
<td style="text-align:right;">
0.0005696
</td>
</tr>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:right;">
-0.0009272
</td>
</tr>
</tbody>
</table>
<p>There are other ways to calculate <span class="math inline">\(\beta\)</span> and <span class="math inline">\(\alpha\)</span> but for a single factor model we can use the <code>CAPM.beta</code> and <code>CAPM.alpha</code> from the <code>PerformanceAnalytics</code> package.</p>
<pre class="r"><code>library(PerformanceAnalytics)
CAPM.beta(Ra = portfolio_returns, Rb = SPY_returns, Rf = 0)</code></pre>
<pre><code>##                    AAPL       HOG     NVDA     MSFT      AMD         F
## Beta: adjusted 1.272256 0.8957108 1.968167 1.422158 1.854408 0.8626349
##                       GE      MMM      INTL     AMZN
## Beta: adjusted 0.8177459 1.065506 0.8593232 1.576654</code></pre>
<pre class="r"><code>CAPM.alpha(Ra = portfolio_returns, Rb = SPY_returns, Rf = 0)</code></pre>
<pre><code>##                        AAPL          HOG         NVDA         MSFT          AMD
## Alpha: adjusted 0.000406813 -0.001151611 0.0001393021 0.0007480208 0.0005695635
##                             F           GE           MMM          INTL
## Alpha: adjusted -0.0009272497 -0.002875334 0.00001141014 -0.0003782044
##                        AMZN
## Alpha: adjusted 0.001047154</code></pre>
<p>Which is much simpler than what we just did. The <code>Ra</code> is the asset returns, <code>Rb</code> is the market returns and <code>Rf</code> is the risk-free rate of return.</p>
<p>Upon investigating the <code>CAPM.beta</code> functions from the <code>PerformanceAnalytics</code> package I noticed they had functions for <code>CAPM.beta.bull</code> and <code>CAPM.beta.bear</code>, so I wanted to see how these would look like plotted for each asset.</p>
<pre class="r"><code>rbind(
  CAPM.beta.bull(Ra = portfolio_returns, Rb = SPY_returns, Rf = 0),
  CAPM.beta(Ra = portfolio_returns, Rb = SPY_returns, Rf = 0),
  CAPM.beta.bear(Ra = portfolio_returns, Rb = SPY_returns, Rf = 0)
) %&gt;% 
  as_tibble(rownames = NA) %&gt;% 
  rownames_to_column(&quot;betas&quot;) %&gt;% 
  pivot_longer(2:ncol(.)) %&gt;% 
  ggplot(aes(x = name, y = value, color = betas)) +
  geom_point(size = 5, shape = 19) +
  scale_color_brewer(type=&#39;seq&#39;, palette=&#39;Reds&#39;) +
  theme_tq() +
  ggtitle(&quot;Asset Betas:&quot;, subtitle = &quot;Bear, Beta, Bull&quot;)</code></pre>
<p><img src="/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p>Interesting…</p>
</div>
</div>
<div id="visualising-the-covariance-matrix-of-the-returns" class="section level3">
<h3>Visualising the covariance matrix of the returns</h3>
<p>In order to visualise the the covariance matrix some further formulas are needed.</p>
<p>Ultimately we want to compute the following;</p>
<p><span class="math display">\[\hat{\Sigma} = var(y)\hat{\beta} \hat{\beta}^T + \hat{\psi}\]</span>
Where;
<span class="math display">\[\hat{\psi} = diag(\hat{\sigma}_{1}^2, ... \hat{\sigma}_{i}^2, ... \hat{\sigma}_{N}^2)\]</span></p>
<p>We use our <span class="math inline">\(\beta\)</span> and <span class="math inline">\(\alpha\)</span> results from before as well as <span class="math inline">\(N\)</span>. I created a function which takes in the <span class="math inline">\(asset\)</span> and computes the residules and Sigma values. What we are calculating here is the following;</p>
<p><code>err</code>
<span class="math display">\[\hat{\epsilon_{i}} = x_{i} - \alpha_{i} - \beta_{i}*y\]</span></p>
<p>Where <span class="math inline">\(i = 1.,..., N\)</span></p>
<p><code>Sigma</code>
<span class="math display">\[\hat{\sigma}_{i}^2 = \dfrac{1} {N-2}\hat{\epsilon}_{i}^N\epsilon_{i}\]</span></p>
<p>The code in base R for the above equations is:</p>
<pre class="r"><code>beta &lt;- cov(portfolio_returns, SPY_returns) / as.numeric(var(SPY_returns))
alpha &lt;- colMeans(portfolio_returns) - beta*colMeans(SPY_returns)
N = length(SPY_returns)

mySigmaFunction &lt;- function(ASSET){
  err = portfolio_returns[, ASSET] - alpha[ASSET ,] - beta[ASSET ,] * SPY_returns
  Sigma = (1 / (N - 2)) %*% t(err) %*% err
  return(Sigma)
}

mySigmaFunction(&quot;AAPL&quot;)                               # For Apple</code></pre>
<pre><code>##              AAPL
## [1,] 0.0001178595</code></pre>
<pre class="r"><code>mySigmaFunction(&quot;F&quot;)                                  # For Ford</code></pre>
<pre><code>##                 F
## [1,] 0.0001599711</code></pre>
<pre class="r"><code>sapply(colnames(portfolio_returns), mySigmaFunction)  # For all assets in the portfolio</code></pre>
<pre><code>##          AAPL           HOG          NVDA          MSFT           AMD 
## 0.00011785947 0.00021461371 0.00056144410 0.00006590872 0.00126760753 
##             F            GE           MMM          INTL          AMZN 
## 0.00015997110 0.00035027461 0.00007165307 0.00019184188 0.00017665040</code></pre>
<p>Now that we have the <span class="math inline">\(\sigma\)</span> values. we want to create a matrix with the Sigma values down the digaonal.</p>
<pre class="r"><code>Sigma2 &lt;- sapply(colnames(portfolio_returns), mySigmaFunction)
diag_Sigma2 &lt;- diag(Sigma2)
colnames(diag_Sigma2) = colnames(portfolio_returns)
rownames(diag_Sigma2) = colnames(portfolio_returns)</code></pre>
<p>Which creates our diagonal matrix as follows:</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
AAPL
</th>
<th style="text-align:right;">
HOG
</th>
<th style="text-align:right;">
NVDA
</th>
<th style="text-align:right;">
MSFT
</th>
<th style="text-align:right;">
AMD
</th>
<th style="text-align:right;">
F
</th>
<th style="text-align:right;">
GE
</th>
<th style="text-align:right;">
MMM
</th>
<th style="text-align:right;">
INTL
</th>
<th style="text-align:right;">
AMZN
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:right;">
0.0001179
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
<tr>
<td style="text-align:left;">
HOG
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0002146
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
<tr>
<td style="text-align:left;">
NVDA
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0005614
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
<tr>
<td style="text-align:left;">
MSFT
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000659
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
<tr>
<td style="text-align:left;">
AMD
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0012676
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.00016
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
<tr>
<td style="text-align:left;">
GE
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
0.0003503
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
<tr>
<td style="text-align:left;">
MMM
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000717
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
<tr>
<td style="text-align:left;">
INTL
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0001918
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
<tr>
<td style="text-align:left;">
AMZN
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.0001767
</td>
</tr>
</tbody>
</table>
<p>Now that we have our diagonal matrix <span class="math inline">\(Diag(\psi)\)</span> we can compute the covariance matrix of the returns using: <span class="math display">\[\Sigma = var(y)\beta \beta^T + \psi\]</span></p>
<p>Then use the <code>cov2cor</code> function from the <code>stats</code> package.</p>
<pre class="r"><code>Sigma &lt;- as.numeric(var(SPY_returns)) * beta %*% t(beta) + diag_Sigma2
corrplot(cov2cor(Sigma), main = &quot;Covariance matrix of Portfolio Assets&quot;)</code></pre>
<p><img src="/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<p>The correlation table looks like:</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
AAPL
</th>
<th style="text-align:right;">
HOG
</th>
<th style="text-align:right;">
NVDA
</th>
<th style="text-align:right;">
MSFT
</th>
<th style="text-align:right;">
AMD
</th>
<th style="text-align:right;">
F
</th>
<th style="text-align:right;">
GE
</th>
<th style="text-align:right;">
MMM
</th>
<th style="text-align:right;">
INTL
</th>
<th style="text-align:right;">
AMZN
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:right;">
1.0000000
</td>
<td style="text-align:right;">
0.3097538
</td>
<td style="text-align:right;">
0.3891498
</td>
<td style="text-align:right;">
0.5677312
</td>
<td style="text-align:right;">
0.2714307
</td>
<td style="text-align:right;">
0.3373737
</td>
<td style="text-align:right;">
0.2330694
</td>
<td style="text-align:right;">
0.4966757
</td>
<td style="text-align:right;">
0.3133839
</td>
<td style="text-align:right;">
0.4821634
</td>
</tr>
<tr>
<td style="text-align:left;">
HOG
</td>
<td style="text-align:right;">
0.3097538
</td>
<td style="text-align:right;">
1.0000000
</td>
<td style="text-align:right;">
0.2515805
</td>
<td style="text-align:right;">
0.3670311
</td>
<td style="text-align:right;">
0.1754765
</td>
<td style="text-align:right;">
0.2181079
</td>
<td style="text-align:right;">
0.1506764
</td>
<td style="text-align:right;">
0.3210946
</td>
<td style="text-align:right;">
0.2025988
</td>
<td style="text-align:right;">
0.3117126
</td>
</tr>
<tr>
<td style="text-align:left;">
NVDA
</td>
<td style="text-align:right;">
0.3891498
</td>
<td style="text-align:right;">
0.2515805
</td>
<td style="text-align:right;">
1.0000000
</td>
<td style="text-align:right;">
0.4611084
</td>
<td style="text-align:right;">
0.2204547
</td>
<td style="text-align:right;">
0.2740132
</td>
<td style="text-align:right;">
0.1892978
</td>
<td style="text-align:right;">
0.4033975
</td>
<td style="text-align:right;">
0.2545288
</td>
<td style="text-align:right;">
0.3916107
</td>
</tr>
<tr>
<td style="text-align:left;">
MSFT
</td>
<td style="text-align:right;">
0.5677312
</td>
<td style="text-align:right;">
0.3670311
</td>
<td style="text-align:right;">
0.4611084
</td>
<td style="text-align:right;">
1.0000000
</td>
<td style="text-align:right;">
0.3216216
</td>
<td style="text-align:right;">
0.3997582
</td>
<td style="text-align:right;">
0.2761668
</td>
<td style="text-align:right;">
0.5885171
</td>
<td style="text-align:right;">
0.3713324
</td>
<td style="text-align:right;">
0.5713213
</td>
</tr>
<tr>
<td style="text-align:left;">
AMD
</td>
<td style="text-align:right;">
0.2714307
</td>
<td style="text-align:right;">
0.1754765
</td>
<td style="text-align:right;">
0.2204547
</td>
<td style="text-align:right;">
0.3216216
</td>
<td style="text-align:right;">
1.0000000
</td>
<td style="text-align:right;">
0.1911233
</td>
<td style="text-align:right;">
0.1320346
</td>
<td style="text-align:right;">
0.2813684
</td>
<td style="text-align:right;">
0.1775330
</td>
<td style="text-align:right;">
0.2731471
</td>
</tr>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:right;">
0.3373737
</td>
<td style="text-align:right;">
0.2181079
</td>
<td style="text-align:right;">
0.2740132
</td>
<td style="text-align:right;">
0.3997582
</td>
<td style="text-align:right;">
0.1911233
</td>
<td style="text-align:right;">
1.0000000
</td>
<td style="text-align:right;">
0.1641118
</td>
<td style="text-align:right;">
0.3497257
</td>
<td style="text-align:right;">
0.2206640
</td>
<td style="text-align:right;">
0.3395071
</td>
</tr>
<tr>
<td style="text-align:left;">
GE
</td>
<td style="text-align:right;">
0.2330694
</td>
<td style="text-align:right;">
0.1506764
</td>
<td style="text-align:right;">
0.1892978
</td>
<td style="text-align:right;">
0.2761668
</td>
<td style="text-align:right;">
0.1320346
</td>
<td style="text-align:right;">
0.1641118
</td>
<td style="text-align:right;">
1.0000000
</td>
<td style="text-align:right;">
0.2416026
</td>
<td style="text-align:right;">
0.1524423
</td>
<td style="text-align:right;">
0.2345432
</td>
</tr>
<tr>
<td style="text-align:left;">
MMM
</td>
<td style="text-align:right;">
0.4966757
</td>
<td style="text-align:right;">
0.3210946
</td>
<td style="text-align:right;">
0.4033975
</td>
<td style="text-align:right;">
0.5885171
</td>
<td style="text-align:right;">
0.2813684
</td>
<td style="text-align:right;">
0.3497257
</td>
<td style="text-align:right;">
0.2416026
</td>
<td style="text-align:right;">
1.0000000
</td>
<td style="text-align:right;">
0.3248576
</td>
<td style="text-align:right;">
0.4998164
</td>
</tr>
<tr>
<td style="text-align:left;">
INTL
</td>
<td style="text-align:right;">
0.3133839
</td>
<td style="text-align:right;">
0.2025988
</td>
<td style="text-align:right;">
0.2545288
</td>
<td style="text-align:right;">
0.3713324
</td>
<td style="text-align:right;">
0.1775330
</td>
<td style="text-align:right;">
0.2206640
</td>
<td style="text-align:right;">
0.1524423
</td>
<td style="text-align:right;">
0.3248576
</td>
<td style="text-align:right;">
1.0000000
</td>
<td style="text-align:right;">
0.3153656
</td>
</tr>
<tr>
<td style="text-align:left;">
AMZN
</td>
<td style="text-align:right;">
0.4821634
</td>
<td style="text-align:right;">
0.3117126
</td>
<td style="text-align:right;">
0.3916107
</td>
<td style="text-align:right;">
0.5713213
</td>
<td style="text-align:right;">
0.2731471
</td>
<td style="text-align:right;">
0.3395071
</td>
<td style="text-align:right;">
0.2345432
</td>
<td style="text-align:right;">
0.4998164
</td>
<td style="text-align:right;">
0.3153656
</td>
<td style="text-align:right;">
1.0000000
</td>
</tr>
</tbody>
</table>
</div>
<div id="etf-analysis-and-a-randomly-sampled-portfolio" class="section level2">
<h2>ETF analysis and a randomly sampled portfolio</h2>
<div id="analysing-my-randomly-selected-portfolio-and-a-series-of-u.s.-funds" class="section level4">
<h4>Analysing my randomly selected portfolio and a series of U.S. funds</h4>
<p>Since factor modelling is all about risk and portfolio analysis I thought it would be interesting to compare the performance of a number of U.S. Exchnage Traded Funds (ETFs) and a randomly selected portfolio of assets from the SP500.</p>
<p>In order to construct the randomly created portfolio I first scraped the wikipedia page which contains the list of SP500 firms along with their <em>ticker</em> symbol, I filter out all <em>Class A</em>, <em>B</em> and <em>C</em> shares since a few firms have multiple asset classes and I don’t want to sample two of the same asset.</p>
<p>Just as before I collect the data and put it into time series format.</p>
<pre class="r"><code>start_date &lt;- &quot;2016-01-01&quot;
end_date &lt;- &quot;2017-12-31&quot;

set.seed(4746)
url &lt;- &quot;https://en.wikipedia.org/wiki/List_of_S%26P_500_companies&quot;

symbols &lt;- url %&gt;%
  read_html() %&gt;%
  html_nodes(xpath = &#39;//*[@id=&quot;constituents&quot;]&#39;) %&gt;% 
  html_table() %&gt;% 
  .[[1]] %&gt;% 
  filter(!str_detect(Security, &quot;Class A|Class B|Class C&quot;)) %&gt;%     # Removes firms with Class A shares
  sample_n(20) %&gt;% 
  pull(Symbol)

asset_prices &lt;- tq_get(
  symbols,
  from = start_date,
  to = end_date
) %&gt;%
  select(symbol, date, adjusted) %&gt;% 
  pivot_wider(names_from = symbol, values_from = adjusted) %&gt;% 
  tk_xts(date_var = date)</code></pre>
<p>Which looks like:</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
MMM
</th>
<th style="text-align:right;">
MNST
</th>
<th style="text-align:right;">
TJX
</th>
<th style="text-align:right;">
TMUS
</th>
<th style="text-align:right;">
NWL
</th>
<th style="text-align:right;">
INTC
</th>
<th style="text-align:right;">
EIX
</th>
<th style="text-align:right;">
XRX
</th>
<th style="text-align:right;">
GPN
</th>
<th style="text-align:right;">
HES
</th>
<th style="text-align:right;">
TIF
</th>
<th style="text-align:right;">
IR
</th>
<th style="text-align:right;">
GRMN
</th>
<th style="text-align:right;">
DRI
</th>
<th style="text-align:right;">
GLW
</th>
<th style="text-align:right;">
ZTS
</th>
<th style="text-align:right;">
CCI
</th>
<th style="text-align:right;">
BK
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
132.8015
</td>
<td style="text-align:right;">
48.11333
</td>
<td style="text-align:right;">
33.27088
</td>
<td style="text-align:right;">
38.95
</td>
<td style="text-align:right;">
38.54331
</td>
<td style="text-align:right;">
30.45350
</td>
<td style="text-align:right;">
51.77293
</td>
<td style="text-align:right;">
24.64223
</td>
<td style="text-align:right;">
62.47044
</td>
<td style="text-align:right;">
44.85172
</td>
<td style="text-align:right;">
68.47929
</td>
<td style="text-align:right;">
51.15904
</td>
<td style="text-align:right;">
30.85206
</td>
<td style="text-align:right;">
55.28202
</td>
<td style="text-align:right;">
16.24429
</td>
<td style="text-align:right;">
45.97239
</td>
<td style="text-align:right;">
73.96610
</td>
<td style="text-align:right;">
36.90321
</td>
</tr>
<tr>
<td style="text-align:right;">
133.3804
</td>
<td style="text-align:right;">
48.69000
</td>
<td style="text-align:right;">
33.79228
</td>
<td style="text-align:right;">
40.22
</td>
<td style="text-align:right;">
38.52557
</td>
<td style="text-align:right;">
30.31014
</td>
<td style="text-align:right;">
51.79048
</td>
<td style="text-align:right;">
24.59438
</td>
<td style="text-align:right;">
63.43876
</td>
<td style="text-align:right;">
44.74931
</td>
<td style="text-align:right;">
68.27712
</td>
<td style="text-align:right;">
50.61163
</td>
<td style="text-align:right;">
30.96944
</td>
<td style="text-align:right;">
56.28635
</td>
<td style="text-align:right;">
16.23521
</td>
<td style="text-align:right;">
46.69207
</td>
<td style="text-align:right;">
75.48198
</td>
<td style="text-align:right;">
36.76471
</td>
</tr>
<tr>
<td style="text-align:right;">
130.6940
</td>
<td style="text-align:right;">
48.76667
</td>
<td style="text-align:right;">
32.92327
</td>
<td style="text-align:right;">
40.05
</td>
<td style="text-align:right;">
37.46084
</td>
<td style="text-align:right;">
29.63818
</td>
<td style="text-align:right;">
51.44798
</td>
<td style="text-align:right;">
24.28336
</td>
<td style="text-align:right;">
63.63840
</td>
<td style="text-align:right;">
41.95655
</td>
<td style="text-align:right;">
67.00899
</td>
<td style="text-align:right;">
49.53537
</td>
<td style="text-align:right;">
30.12268
</td>
<td style="text-align:right;">
55.86901
</td>
<td style="text-align:right;">
15.87241
</td>
<td style="text-align:right;">
46.70180
</td>
<td style="text-align:right;">
74.84963
</td>
<td style="text-align:right;">
35.84144
</td>
</tr>
<tr>
<td style="text-align:right;">
127.5101
</td>
<td style="text-align:right;">
48.40000
</td>
<td style="text-align:right;">
32.87630
</td>
<td style="text-align:right;">
40.51
</td>
<td style="text-align:right;">
35.78388
</td>
<td style="text-align:right;">
28.52719
</td>
<td style="text-align:right;">
51.19327
</td>
<td style="text-align:right;">
23.61348
</td>
<td style="text-align:right;">
61.25259
</td>
<td style="text-align:right;">
40.60672
</td>
<td style="text-align:right;">
65.17110
</td>
<td style="text-align:right;">
48.06017
</td>
<td style="text-align:right;">
29.25916
</td>
<td style="text-align:right;">
55.47833
</td>
<td style="text-align:right;">
15.50961
</td>
<td style="text-align:right;">
45.28187
</td>
<td style="text-align:right;">
72.98727
</td>
<td style="text-align:right;">
34.93664
</td>
</tr>
<tr>
<td style="text-align:right;">
127.0759
</td>
<td style="text-align:right;">
48.08333
</td>
<td style="text-align:right;">
31.43894
</td>
<td style="text-align:right;">
39.88
</td>
<td style="text-align:right;">
34.94097
</td>
<td style="text-align:right;">
28.23153
</td>
<td style="text-align:right;">
51.18450
</td>
<td style="text-align:right;">
22.94359
</td>
<td style="text-align:right;">
60.07465
</td>
<td style="text-align:right;">
40.56948
</td>
<td style="text-align:right;">
62.72673
</td>
<td style="text-align:right;">
47.60556
</td>
<td style="text-align:right;">
28.12736
</td>
<td style="text-align:right;">
55.06099
</td>
<td style="text-align:right;">
15.55497
</td>
<td style="text-align:right;">
44.62054
</td>
<td style="text-align:right;">
71.96515
</td>
<td style="text-align:right;">
34.29958
</td>
</tr>
<tr>
<td style="text-align:right;">
127.0488
</td>
<td style="text-align:right;">
48.68000
</td>
<td style="text-align:right;">
31.84760
</td>
<td style="text-align:right;">
39.68
</td>
<td style="text-align:right;">
34.91435
</td>
<td style="text-align:right;">
28.72431
</td>
<td style="text-align:right;">
51.99249
</td>
<td style="text-align:right;">
22.48903
</td>
<td style="text-align:right;">
58.41755
</td>
<td style="text-align:right;">
38.81003
</td>
<td style="text-align:right;">
62.34076
</td>
<td style="text-align:right;">
47.76327
</td>
<td style="text-align:right;">
27.83393
</td>
<td style="text-align:right;">
55.01660
</td>
<td style="text-align:right;">
15.70009
</td>
<td style="text-align:right;">
43.35622
</td>
<td style="text-align:right;">
72.49354
</td>
<td style="text-align:right;">
34.54886
</td>
</tr>
</tbody>
</table>
<p>Next, I collect the U.S. ETFs. I scraped a website (which I cannot remember the name) for the symbols of the ETFs.</p>
<pre class="r"><code>myETFs &lt;- c(&quot;SPY&quot;, &quot;IVV&quot;, &quot;VTI&quot;, &quot;VOO&quot;, &quot;QQQ&quot;, &quot;VEA&quot;, &quot;IEFA&quot;, &quot;AGG&quot;, &quot;VWO&quot;,
            &quot;EFA&quot;,&quot;IEMG&quot;,&quot;VTV&quot;, &quot;IJH&quot;, &quot;IWF&quot;,&quot;BND&quot;, &quot;IJR&quot;, &quot;IWM&quot;, &quot;VUG&quot;,
            &quot;GLD&quot;, &quot;IWD&quot;, &quot;VIG&quot;, &quot;VNQ&quot;, &quot;USMV&quot;, &quot;LQD&quot;, &quot;VO&quot;, &quot;VYM&quot;, &quot;EEM&quot;,
            &quot;VB&quot;, &quot;VCSH&quot;, &quot;XLF&quot;, &quot;VCIT&quot;, &quot;VEU&quot;, &quot;XLK&quot;, &quot;ITOT&quot;, &quot;IVW&quot;, &quot;BNDX&quot;,
            &quot;VGT&quot;, &quot;DIA&quot;, &quot;BSV&quot;, &quot;SHV&quot;, &quot;IWB&quot;, &quot;IWR&quot;, &quot;TIP&quot;, &quot;SCHF&quot;, &quot;MBB&quot;, &quot;SDY&quot;,
            &quot;MDY&quot;, &quot;SCHX&quot;, &quot;IEF&quot;, &quot;HYG&quot;, &quot;DVY&quot;, &quot;XLV&quot;, &quot;SHY&quot;, &quot;IXUS&quot;, &quot;TLT&quot;, &quot;IVE&quot;,
            &quot;PFF&quot;, &quot;IAU&quot;, &quot;VXUS&quot;, &quot;RSP&quot;, &quot;SCHB&quot;, &quot;VV&quot;, &quot;GOVT&quot;, &quot;EMB&quot;, &quot;MUB&quot;, &quot;QUAL&quot;,
            &quot;XLY&quot;, &quot;VBR&quot;, &quot;EWJ&quot;, &quot;XLP&quot;, &quot;VGK&quot;, &quot;SPLV&quot;, &quot;MINT&quot;, &quot;BIV&quot;, &quot;IGSB&quot;, &quot;EFAV&quot;,
            &quot;VT&quot;, &quot;GDX&quot;, &quot;XLU&quot;, &quot;IWS&quot;, &quot;XLI&quot;, &quot;SCHD&quot;, &quot;IWP&quot;, &quot;ACWI&quot;, &quot;VMBS&quot;, &quot;XLE&quot;, &quot;JNK&quot;,
            &quot;VOE&quot;, &quot;FLOT&quot;, &quot;IWV&quot;, &quot;JPST&quot;, &quot;SCZ&quot;, &quot;IEI&quot;, &quot;IWN&quot;, &quot;DGRO&quot;, &quot;VBK&quot;, &quot;IGIB&quot;, &quot;IWO&quot;)
            

etf_prices &lt;- tq_get(
  myETFs,
  from = start_date,
  to = end_date
) %&gt;% 
  select(symbol, date, adjusted) %&gt;% 
  pivot_wider(names_from = symbol, values_from = adjusted) %&gt;% 
  tk_xts(date_var = date)</code></pre>
<p>The data looks like:</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
SPY
</th>
<th style="text-align:right;">
IVV
</th>
<th style="text-align:right;">
VTI
</th>
<th style="text-align:right;">
VOO
</th>
<th style="text-align:right;">
QQQ
</th>
<th style="text-align:right;">
VEA
</th>
<th style="text-align:right;">
IEFA
</th>
<th style="text-align:right;">
AGG
</th>
<th style="text-align:right;">
VWO
</th>
<th style="text-align:right;">
EFA
</th>
<th style="text-align:right;">
IEMG
</th>
<th style="text-align:right;">
VTV
</th>
<th style="text-align:right;">
IJH
</th>
<th style="text-align:right;">
IWF
</th>
<th style="text-align:right;">
BND
</th>
<th style="text-align:right;">
IJR
</th>
<th style="text-align:right;">
IWM
</th>
<th style="text-align:right;">
VUG
</th>
<th style="text-align:right;">
GLD
</th>
<th style="text-align:right;">
IWD
</th>
<th style="text-align:right;">
VIG
</th>
<th style="text-align:right;">
VNQ
</th>
<th style="text-align:right;">
USMV
</th>
<th style="text-align:right;">
LQD
</th>
<th style="text-align:right;">
VO
</th>
<th style="text-align:right;">
VYM
</th>
<th style="text-align:right;">
EEM
</th>
<th style="text-align:right;">
VB
</th>
<th style="text-align:right;">
VCSH
</th>
<th style="text-align:right;">
XLF
</th>
<th style="text-align:right;">
VCIT
</th>
<th style="text-align:right;">
VEU
</th>
<th style="text-align:right;">
XLK
</th>
<th style="text-align:right;">
ITOT
</th>
<th style="text-align:right;">
IVW
</th>
<th style="text-align:right;">
BNDX
</th>
<th style="text-align:right;">
VGT
</th>
<th style="text-align:right;">
DIA
</th>
<th style="text-align:right;">
BSV
</th>
<th style="text-align:right;">
SHV
</th>
<th style="text-align:right;">
IWB
</th>
<th style="text-align:right;">
IWR
</th>
<th style="text-align:right;">
TIP
</th>
<th style="text-align:right;">
SCHF
</th>
<th style="text-align:right;">
MBB
</th>
<th style="text-align:right;">
SDY
</th>
<th style="text-align:right;">
MDY
</th>
<th style="text-align:right;">
SCHX
</th>
<th style="text-align:right;">
IEF
</th>
<th style="text-align:right;">
HYG
</th>
<th style="text-align:right;">
DVY
</th>
<th style="text-align:right;">
XLV
</th>
<th style="text-align:right;">
SHY
</th>
<th style="text-align:right;">
IXUS
</th>
<th style="text-align:right;">
TLT
</th>
<th style="text-align:right;">
IVE
</th>
<th style="text-align:right;">
PFF
</th>
<th style="text-align:right;">
IAU
</th>
<th style="text-align:right;">
VXUS
</th>
<th style="text-align:right;">
RSP
</th>
<th style="text-align:right;">
SCHB
</th>
<th style="text-align:right;">
VV
</th>
<th style="text-align:right;">
GOVT
</th>
<th style="text-align:right;">
EMB
</th>
<th style="text-align:right;">
MUB
</th>
<th style="text-align:right;">
QUAL
</th>
<th style="text-align:right;">
XLY
</th>
<th style="text-align:right;">
VBR
</th>
<th style="text-align:right;">
EWJ
</th>
<th style="text-align:right;">
XLP
</th>
<th style="text-align:right;">
VGK
</th>
<th style="text-align:right;">
SPLV
</th>
<th style="text-align:right;">
MINT
</th>
<th style="text-align:right;">
BIV
</th>
<th style="text-align:right;">
IGSB
</th>
<th style="text-align:right;">
EFAV
</th>
<th style="text-align:right;">
VT
</th>
<th style="text-align:right;">
GDX
</th>
<th style="text-align:right;">
XLU
</th>
<th style="text-align:right;">
IWS
</th>
<th style="text-align:right;">
XLI
</th>
<th style="text-align:right;">
SCHD
</th>
<th style="text-align:right;">
IWP
</th>
<th style="text-align:right;">
ACWI
</th>
<th style="text-align:right;">
VMBS
</th>
<th style="text-align:right;">
XLE
</th>
<th style="text-align:right;">
JNK
</th>
<th style="text-align:right;">
VOE
</th>
<th style="text-align:right;">
FLOT
</th>
<th style="text-align:right;">
IWV
</th>
<th style="text-align:right;">
JPST
</th>
<th style="text-align:right;">
SCZ
</th>
<th style="text-align:right;">
IEI
</th>
<th style="text-align:right;">
IWN
</th>
<th style="text-align:right;">
DGRO
</th>
<th style="text-align:right;">
VBK
</th>
<th style="text-align:right;">
IGIB
</th>
<th style="text-align:right;">
IWO
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
186.8362
</td>
<td style="text-align:right;">
187.3943
</td>
<td style="text-align:right;">
95.69553
</td>
<td style="text-align:right;">
171.0293
</td>
<td style="text-align:right;">
105.7754
</td>
<td style="text-align:right;">
32.31758
</td>
<td style="text-align:right;">
48.12894
</td>
<td style="text-align:right;">
97.70714
</td>
<td style="text-align:right;">
28.82161
</td>
<td style="text-align:right;">
51.85117
</td>
<td style="text-align:right;">
35.29821
</td>
<td style="text-align:right;">
73.21329
</td>
<td style="text-align:right;">
129.8436
</td>
<td style="text-align:right;">
93.32362
</td>
<td style="text-align:right;">
72.46418
</td>
<td style="text-align:right;">
51.13569
</td>
<td style="text-align:right;">
104.60918
</td>
<td style="text-align:right;">
99.84885
</td>
<td style="text-align:right;">
102.89
</td>
<td style="text-align:right;">
88.57166
</td>
<td style="text-align:right;">
71.16028
</td>
<td style="text-align:right;">
67.15640
</td>
<td style="text-align:right;">
38.30936
</td>
<td style="text-align:right;">
100.1451
</td>
<td style="text-align:right;">
112.0916
</td>
<td style="text-align:right;">
58.70417
</td>
<td style="text-align:right;">
29.25530
</td>
<td style="text-align:right;">
103.10962
</td>
<td style="text-align:right;">
71.86420
</td>
<td style="text-align:right;">
13.61419
</td>
<td style="text-align:right;">
73.99710
</td>
<td style="text-align:right;">
38.23042
</td>
<td style="text-align:right;">
39.89517
</td>
<td style="text-align:right;">
42.61963
</td>
<td style="text-align:right;">
107.9444
</td>
<td style="text-align:right;">
48.90886
</td>
<td style="text-align:right;">
101.77430
</td>
<td style="text-align:right;">
156.9451
</td>
<td style="text-align:right;">
74.18727
</td>
<td style="text-align:right;">
105.2681
</td>
<td style="text-align:right;">
104.11566
</td>
<td style="text-align:right;">
37.17856
</td>
<td style="text-align:right;">
101.8868
</td>
<td style="text-align:right;">
24.86581
</td>
<td style="text-align:right;">
97.72220
</td>
<td style="text-align:right;">
63.99211
</td>
<td style="text-align:right;">
238.7614
</td>
<td style="text-align:right;">
44.54472
</td>
<td style="text-align:right;">
98.23306
</td>
<td style="text-align:right;">
65.49518
</td>
<td style="text-align:right;">
65.93277
</td>
<td style="text-align:right;">
66.68895
</td>
<td style="text-align:right;">
80.17432
</td>
<td style="text-align:right;">
44.14714
</td>
<td style="text-align:right;">
110.3894
</td>
<td style="text-align:right;">
80.04479
</td>
<td style="text-align:right;">
31.46391
</td>
<td style="text-align:right;">
10.38
</td>
<td style="text-align:right;">
39.78462
</td>
<td style="text-align:right;">
71.26929
</td>
<td style="text-align:right;">
45.05346
</td>
<td style="text-align:right;">
85.64318
</td>
<td style="text-align:right;">
23.57018
</td>
<td style="text-align:right;">
87.65514
</td>
<td style="text-align:right;">
101.0075
</td>
<td style="text-align:right;">
59.58526
</td>
<td style="text-align:right;">
72.85894
</td>
<td style="text-align:right;">
90.46735
</td>
<td style="text-align:right;">
45.07748
</td>
<td style="text-align:right;">
45.11800
</td>
<td style="text-align:right;">
43.21453
</td>
<td style="text-align:right;">
34.96312
</td>
<td style="text-align:right;">
93.40020
</td>
<td style="text-align:right;">
75.13937
</td>
<td style="text-align:right;">
48.21395
</td>
<td style="text-align:right;">
57.09138
</td>
<td style="text-align:right;">
51.90483
</td>
<td style="text-align:right;">
13.86359
</td>
<td style="text-align:right;">
38.17657
</td>
<td style="text-align:right;">
62.81808
</td>
<td style="text-align:right;">
48.48287
</td>
<td style="text-align:right;">
34.12284
</td>
<td style="text-align:right;">
87.50332
</td>
<td style="text-align:right;">
50.81642
</td>
<td style="text-align:right;">
48.00686
</td>
<td style="text-align:right;">
53.82844
</td>
<td style="text-align:right;">
80.80476
</td>
<td style="text-align:right;">
78.58987
</td>
<td style="text-align:right;">
46.91737
</td>
<td style="text-align:right;">
110.6951
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
45.01355
</td>
<td style="text-align:right;">
115.1113
</td>
<td style="text-align:right;">
84.09489
</td>
<td style="text-align:right;">
23.20199
</td>
<td style="text-align:right;">
115.5700
</td>
<td style="text-align:right;">
47.86354
</td>
<td style="text-align:right;">
131.6090
</td>
</tr>
<tr>
<td style="text-align:right;">
187.1522
</td>
<td style="text-align:right;">
187.7839
</td>
<td style="text-align:right;">
95.90974
</td>
<td style="text-align:right;">
171.3355
</td>
<td style="text-align:right;">
105.5919
</td>
<td style="text-align:right;">
32.28184
</td>
<td style="text-align:right;">
48.04810
</td>
<td style="text-align:right;">
97.75242
</td>
<td style="text-align:right;">
28.88509
</td>
<td style="text-align:right;">
51.77047
</td>
<td style="text-align:right;">
35.38096
</td>
<td style="text-align:right;">
73.44967
</td>
<td style="text-align:right;">
129.9475
</td>
<td style="text-align:right;">
93.46677
</td>
<td style="text-align:right;">
72.55397
</td>
<td style="text-align:right;">
51.29261
</td>
<td style="text-align:right;">
104.83739
</td>
<td style="text-align:right;">
99.86796
</td>
<td style="text-align:right;">
103.18
</td>
<td style="text-align:right;">
88.74566
</td>
<td style="text-align:right;">
71.39217
</td>
<td style="text-align:right;">
68.45230
</td>
<td style="text-align:right;">
38.56908
</td>
<td style="text-align:right;">
100.1978
</td>
<td style="text-align:right;">
112.2051
</td>
<td style="text-align:right;">
58.99791
</td>
<td style="text-align:right;">
29.32071
</td>
<td style="text-align:right;">
103.16643
</td>
<td style="text-align:right;">
71.84602
</td>
<td style="text-align:right;">
13.66662
</td>
<td style="text-align:right;">
74.01466
</td>
<td style="text-align:right;">
38.14082
</td>
<td style="text-align:right;">
39.79135
</td>
<td style="text-align:right;">
42.69417
</td>
<td style="text-align:right;">
108.1532
</td>
<td style="text-align:right;">
48.88116
</td>
<td style="text-align:right;">
101.28743
</td>
<td style="text-align:right;">
157.0367
</td>
<td style="text-align:right;">
74.17794
</td>
<td style="text-align:right;">
105.2777
</td>
<td style="text-align:right;">
104.32082
</td>
<td style="text-align:right;">
37.26314
</td>
<td style="text-align:right;">
101.8220
</td>
<td style="text-align:right;">
24.83831
</td>
<td style="text-align:right;">
97.79476
</td>
<td style="text-align:right;">
64.25666
</td>
<td style="text-align:right;">
238.8375
</td>
<td style="text-align:right;">
44.63781
</td>
<td style="text-align:right;">
98.20529
</td>
<td style="text-align:right;">
65.61782
</td>
<td style="text-align:right;">
66.33069
</td>
<td style="text-align:right;">
67.00954
</td>
<td style="text-align:right;">
80.12685
</td>
<td style="text-align:right;">
44.10166
</td>
<td style="text-align:right;">
109.9440
</td>
<td style="text-align:right;">
80.26437
</td>
<td style="text-align:right;">
31.49616
</td>
<td style="text-align:right;">
10.40
</td>
<td style="text-align:right;">
39.71283
</td>
<td style="text-align:right;">
71.43853
</td>
<td style="text-align:right;">
45.09076
</td>
<td style="text-align:right;">
85.81048
</td>
<td style="text-align:right;">
23.54203
</td>
<td style="text-align:right;">
87.88744
</td>
<td style="text-align:right;">
101.1264
</td>
<td style="text-align:right;">
59.74447
</td>
<td style="text-align:right;">
72.76409
</td>
<td style="text-align:right;">
90.67188
</td>
<td style="text-align:right;">
45.64425
</td>
<td style="text-align:right;">
45.40763
</td>
<td style="text-align:right;">
42.95955
</td>
<td style="text-align:right;">
35.24865
</td>
<td style="text-align:right;">
93.40020
</td>
<td style="text-align:right;">
75.22964
</td>
<td style="text-align:right;">
48.19091
</td>
<td style="text-align:right;">
57.19847
</td>
<td style="text-align:right;">
51.91398
</td>
<td style="text-align:right;">
13.79471
</td>
<td style="text-align:right;">
38.45059
</td>
<td style="text-align:right;">
62.96579
</td>
<td style="text-align:right;">
48.61266
</td>
<td style="text-align:right;">
34.31977
</td>
<td style="text-align:right;">
87.66763
</td>
<td style="text-align:right;">
50.86277
</td>
<td style="text-align:right;">
48.09793
</td>
<td style="text-align:right;">
54.03376
</td>
<td style="text-align:right;">
80.97237
</td>
<td style="text-align:right;">
78.76543
</td>
<td style="text-align:right;">
46.90808
</td>
<td style="text-align:right;">
110.9662
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
44.89528
</td>
<td style="text-align:right;">
115.1582
</td>
<td style="text-align:right;">
84.47743
</td>
<td style="text-align:right;">
23.28449
</td>
<td style="text-align:right;">
115.6185
</td>
<td style="text-align:right;">
47.92159
</td>
<td style="text-align:right;">
131.6866
</td>
</tr>
<tr>
<td style="text-align:right;">
184.7914
</td>
<td style="text-align:right;">
185.3255
</td>
<td style="text-align:right;">
94.62438
</td>
<td style="text-align:right;">
169.1641
</td>
<td style="text-align:right;">
104.5776
</td>
<td style="text-align:right;">
31.69214
</td>
<td style="text-align:right;">
47.20373
</td>
<td style="text-align:right;">
98.12343
</td>
<td style="text-align:right;">
28.36815
</td>
<td style="text-align:right;">
50.91853
</td>
<td style="text-align:right;">
34.74654
</td>
<td style="text-align:right;">
72.40415
</td>
<td style="text-align:right;">
128.1251
</td>
<td style="text-align:right;">
92.48373
</td>
<td style="text-align:right;">
72.87716
</td>
<td style="text-align:right;">
50.70773
</td>
<td style="text-align:right;">
103.23986
</td>
<td style="text-align:right;">
98.76987
</td>
<td style="text-align:right;">
104.67
</td>
<td style="text-align:right;">
87.39035
</td>
<td style="text-align:right;">
70.52956
</td>
<td style="text-align:right;">
68.26473
</td>
<td style="text-align:right;">
38.32790
</td>
<td style="text-align:right;">
100.5933
</td>
<td style="text-align:right;">
110.1342
</td>
<td style="text-align:right;">
58.22349
</td>
<td style="text-align:right;">
28.76008
</td>
<td style="text-align:right;">
101.62282
</td>
<td style="text-align:right;">
71.87331
</td>
<td style="text-align:right;">
13.45691
</td>
<td style="text-align:right;">
74.25190
</td>
<td style="text-align:right;">
37.48678
</td>
<td style="text-align:right;">
39.30056
</td>
<td style="text-align:right;">
42.08852
</td>
<td style="text-align:right;">
106.9669
</td>
<td style="text-align:right;">
49.06577
</td>
<td style="text-align:right;">
99.91275
</td>
<td style="text-align:right;">
154.7919
</td>
<td style="text-align:right;">
74.26179
</td>
<td style="text-align:right;">
105.2586
</td>
<td style="text-align:right;">
102.94081
</td>
<td style="text-align:right;">
36.64525
</td>
<td style="text-align:right;">
102.1459
</td>
<td style="text-align:right;">
24.37987
</td>
<td style="text-align:right;">
98.11230
</td>
<td style="text-align:right;">
63.51594
</td>
<td style="text-align:right;">
235.4678
</td>
<td style="text-align:right;">
44.06064
</td>
<td style="text-align:right;">
98.79820
</td>
<td style="text-align:right;">
65.61782
</td>
<td style="text-align:right;">
65.65863
</td>
<td style="text-align:right;">
66.46268
</td>
<td style="text-align:right;">
80.17432
</td>
<td style="text-align:right;">
43.33769
</td>
<td style="text-align:right;">
111.4255
</td>
<td style="text-align:right;">
79.06572
</td>
<td style="text-align:right;">
31.42361
</td>
<td style="text-align:right;">
10.57
</td>
<td style="text-align:right;">
39.03973
</td>
<td style="text-align:right;">
70.13145
</td>
<td style="text-align:right;">
44.53121
</td>
<td style="text-align:right;">
84.68593
</td>
<td style="text-align:right;">
23.63587
</td>
<td style="text-align:right;">
87.87912
</td>
<td style="text-align:right;">
101.5744
</td>
<td style="text-align:right;">
59.03268
</td>
<td style="text-align:right;">
72.05276
</td>
<td style="text-align:right;">
89.25890
</td>
<td style="text-align:right;">
44.85076
</td>
<td style="text-align:right;">
45.25377
</td>
<td style="text-align:right;">
42.24736
</td>
<td style="text-align:right;">
34.93548
</td>
<td style="text-align:right;">
93.40947
</td>
<td style="text-align:right;">
75.53665
</td>
<td style="text-align:right;">
48.22778
</td>
<td style="text-align:right;">
56.64514
</td>
<td style="text-align:right;">
51.14435
</td>
<td style="text-align:right;">
14.02101
</td>
<td style="text-align:right;">
38.37987
</td>
<td style="text-align:right;">
61.87635
</td>
<td style="text-align:right;">
47.86177
</td>
<td style="text-align:right;">
33.90801
</td>
<td style="text-align:right;">
86.25658
</td>
<td style="text-align:right;">
50.09352
</td>
<td style="text-align:right;">
48.20723
</td>
<td style="text-align:right;">
51.95383
</td>
<td style="text-align:right;">
80.90055
</td>
<td style="text-align:right;">
77.24093
</td>
<td style="text-align:right;">
46.90808
</td>
<td style="text-align:right;">
109.4701
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
44.14021
</td>
<td style="text-align:right;">
115.4954
</td>
<td style="text-align:right;">
83.48843
</td>
<td style="text-align:right;">
22.96364
</td>
<td style="text-align:right;">
113.8152
</td>
<td style="text-align:right;">
47.99304
</td>
<td style="text-align:right;">
129.3380
</td>
</tr>
<tr>
<td style="text-align:right;">
180.3579
</td>
<td style="text-align:right;">
180.8912
</td>
<td style="text-align:right;">
92.30511
</td>
<td style="text-align:right;">
165.0441
</td>
<td style="text-align:right;">
101.3029
</td>
<td style="text-align:right;">
31.09350
</td>
<td style="text-align:right;">
46.30547
</td>
<td style="text-align:right;">
98.11440
</td>
<td style="text-align:right;">
27.45217
</td>
<td style="text-align:right;">
49.86035
</td>
<td style="text-align:right;">
33.69835
</td>
<td style="text-align:right;">
70.71315
</td>
<td style="text-align:right;">
124.8108
</td>
<td style="text-align:right;">
90.12631
</td>
<td style="text-align:right;">
72.88611
</td>
<td style="text-align:right;">
49.40485
</td>
<td style="text-align:right;">
100.48224
</td>
<td style="text-align:right;">
96.22995
</td>
<td style="text-align:right;">
106.15
</td>
<td style="text-align:right;">
85.32989
</td>
<td style="text-align:right;">
69.23102
</td>
<td style="text-align:right;">
66.93474
</td>
<td style="text-align:right;">
37.70643
</td>
<td style="text-align:right;">
100.6724
</td>
<td style="text-align:right;">
107.6568
</td>
<td style="text-align:right;">
56.96841
</td>
<td style="text-align:right;">
27.87242
</td>
<td style="text-align:right;">
98.88598
</td>
<td style="text-align:right;">
71.90975
</td>
<td style="text-align:right;">
13.07825
</td>
<td style="text-align:right;">
74.29585
</td>
<td style="text-align:right;">
36.68042
</td>
<td style="text-align:right;">
38.13966
</td>
<td style="text-align:right;">
41.07753
</td>
<td style="text-align:right;">
104.2529
</td>
<td style="text-align:right;">
48.99192
</td>
<td style="text-align:right;">
96.69561
</td>
<td style="text-align:right;">
151.1452
</td>
<td style="text-align:right;">
74.37366
</td>
<td style="text-align:right;">
105.2681
</td>
<td style="text-align:right;">
100.43254
</td>
<td style="text-align:right;">
35.80653
</td>
<td style="text-align:right;">
102.0626
</td>
<td style="text-align:right;">
23.93059
</td>
<td style="text-align:right;">
98.23930
</td>
<td style="text-align:right;">
62.23734
</td>
<td style="text-align:right;">
229.4516
</td>
<td style="text-align:right;">
43.00870
</td>
<td style="text-align:right;">
99.01125
</td>
<td style="text-align:right;">
65.19263
</td>
<td style="text-align:right;">
64.49137
</td>
<td style="text-align:right;">
65.11437
</td>
<td style="text-align:right;">
80.20277
</td>
<td style="text-align:right;">
42.43728
</td>
<td style="text-align:right;">
111.6255
</td>
<td style="text-align:right;">
77.26316
</td>
<td style="text-align:right;">
31.22207
</td>
<td style="text-align:right;">
10.72
</td>
<td style="text-align:right;">
38.23201
</td>
<td style="text-align:right;">
68.54225
</td>
<td style="text-align:right;">
43.44009
</td>
<td style="text-align:right;">
82.62268
</td>
<td style="text-align:right;">
23.68278
</td>
<td style="text-align:right;">
87.46435
</td>
<td style="text-align:right;">
101.7207
</td>
<td style="text-align:right;">
57.62780
</td>
<td style="text-align:right;">
70.57320
</td>
<td style="text-align:right;">
87.00002
</td>
<td style="text-align:right;">
44.17064
</td>
<td style="text-align:right;">
44.71072
</td>
<td style="text-align:right;">
41.46484
</td>
<td style="text-align:right;">
34.35522
</td>
<td style="text-align:right;">
93.40020
</td>
<td style="text-align:right;">
75.63598
</td>
<td style="text-align:right;">
48.24622
</td>
<td style="text-align:right;">
55.87762
</td>
<td style="text-align:right;">
49.95324
</td>
<td style="text-align:right;">
14.64089
</td>
<td style="text-align:right;">
38.12353
</td>
<td style="text-align:right;">
60.51917
</td>
<td style="text-align:right;">
46.56396
</td>
<td style="text-align:right;">
33.20084
</td>
<td style="text-align:right;">
84.22703
</td>
<td style="text-align:right;">
48.92575
</td>
<td style="text-align:right;">
48.27098
</td>
<td style="text-align:right;">
50.68622
</td>
<td style="text-align:right;">
80.46945
</td>
<td style="text-align:right;">
75.47622
</td>
<td style="text-align:right;">
46.91737
</td>
<td style="text-align:right;">
106.8519
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
43.46700
</td>
<td style="text-align:right;">
115.7578
</td>
<td style="text-align:right;">
81.26778
</td>
<td style="text-align:right;">
22.53279
</td>
<td style="text-align:right;">
110.6160
</td>
<td style="text-align:right;">
48.06894
</td>
<td style="text-align:right;">
125.7083
</td>
</tr>
<tr>
<td style="text-align:right;">
178.3782
</td>
<td style="text-align:right;">
178.8873
</td>
<td style="text-align:right;">
91.25257
</td>
<td style="text-align:right;">
163.2903
</td>
<td style="text-align:right;">
100.4722
</td>
<td style="text-align:right;">
30.70930
</td>
<td style="text-align:right;">
45.71261
</td>
<td style="text-align:right;">
98.33157
</td>
<td style="text-align:right;">
27.20731
</td>
<td style="text-align:right;">
49.25951
</td>
<td style="text-align:right;">
33.37653
</td>
<td style="text-align:right;">
69.87674
</td>
<td style="text-align:right;">
123.1961
</td>
<td style="text-align:right;">
89.22913
</td>
<td style="text-align:right;">
72.97586
</td>
<td style="text-align:right;">
48.58223
</td>
<td style="text-align:right;">
98.75159
</td>
<td style="text-align:right;">
95.33240
</td>
<td style="text-align:right;">
105.68
</td>
<td style="text-align:right;">
84.23099
</td>
<td style="text-align:right;">
68.51684
</td>
<td style="text-align:right;">
66.03955
</td>
<td style="text-align:right;">
37.32612
</td>
<td style="text-align:right;">
100.7515
</td>
<td style="text-align:right;">
106.2667
</td>
<td style="text-align:right;">
56.32751
</td>
<td style="text-align:right;">
27.57342
</td>
<td style="text-align:right;">
97.51283
</td>
<td style="text-align:right;">
71.91882
</td>
<td style="text-align:right;">
12.87435
</td>
<td style="text-align:right;">
74.32222
</td>
<td style="text-align:right;">
36.24140
</td>
<td style="text-align:right;">
37.83765
</td>
<td style="text-align:right;">
40.59300
</td>
<td style="text-align:right;">
103.2470
</td>
<td style="text-align:right;">
48.98268
</td>
<td style="text-align:right;">
95.86506
</td>
<td style="text-align:right;">
149.5692
</td>
<td style="text-align:right;">
74.45753
</td>
<td style="text-align:right;">
105.2777
</td>
<td style="text-align:right;">
99.38823
</td>
<td style="text-align:right;">
35.36956
</td>
<td style="text-align:right;">
102.1459
</td>
<td style="text-align:right;">
23.63719
</td>
<td style="text-align:right;">
98.34815
</td>
<td style="text-align:right;">
61.63771
</td>
<td style="text-align:right;">
226.3864
</td>
<td style="text-align:right;">
42.52462
</td>
<td style="text-align:right;">
99.26135
</td>
<td style="text-align:right;">
65.02093
</td>
<td style="text-align:right;">
64.04923
</td>
<td style="text-align:right;">
64.13377
</td>
<td style="text-align:right;">
80.25970
</td>
<td style="text-align:right;">
41.90978
</td>
<td style="text-align:right;">
112.1254
</td>
<td style="text-align:right;">
76.28411
</td>
<td style="text-align:right;">
31.31075
</td>
<td style="text-align:right;">
10.66
</td>
<td style="text-align:right;">
37.78327
</td>
<td style="text-align:right;">
67.70534
</td>
<td style="text-align:right;">
42.94580
</td>
<td style="text-align:right;">
81.73975
</td>
<td style="text-align:right;">
23.71093
</td>
<td style="text-align:right;">
87.38972
</td>
<td style="text-align:right;">
101.7664
</td>
<td style="text-align:right;">
56.97219
</td>
<td style="text-align:right;">
69.81445
</td>
<td style="text-align:right;">
85.77296
</td>
<td style="text-align:right;">
43.22602
</td>
<td style="text-align:right;">
44.36678
</td>
<td style="text-align:right;">
41.10435
</td>
<td style="text-align:right;">
34.02365
</td>
<td style="text-align:right;">
93.39094
</td>
<td style="text-align:right;">
75.83461
</td>
<td style="text-align:right;">
48.27848
</td>
<td style="text-align:right;">
55.38676
</td>
<td style="text-align:right;">
49.36685
</td>
<td style="text-align:right;">
14.28668
</td>
<td style="text-align:right;">
38.10586
</td>
<td style="text-align:right;">
59.79903
</td>
<td style="text-align:right;">
46.09118
</td>
<td style="text-align:right;">
32.84278
</td>
<td style="text-align:right;">
83.17358
</td>
<td style="text-align:right;">
48.36041
</td>
<td style="text-align:right;">
48.30741
</td>
<td style="text-align:right;">
50.03457
</td>
<td style="text-align:right;">
80.18208
</td>
<td style="text-align:right;">
74.31207
</td>
<td style="text-align:right;">
46.88947
</td>
<td style="text-align:right;">
105.6269
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
42.88478
</td>
<td style="text-align:right;">
115.9920
</td>
<td style="text-align:right;">
79.95219
</td>
<td style="text-align:right;">
22.25777
</td>
<td style="text-align:right;">
108.9970
</td>
<td style="text-align:right;">
48.12699
</td>
<td style="text-align:right;">
123.5344
</td>
</tr>
<tr>
<td style="text-align:right;">
178.5548
</td>
<td style="text-align:right;">
179.0729
</td>
<td style="text-align:right;">
91.19671
</td>
<td style="text-align:right;">
163.3088
</td>
<td style="text-align:right;">
100.7813
</td>
<td style="text-align:right;">
30.84332
</td>
<td style="text-align:right;">
45.87430
</td>
<td style="text-align:right;">
98.05104
</td>
<td style="text-align:right;">
27.08941
</td>
<td style="text-align:right;">
49.46577
</td>
<td style="text-align:right;">
33.33975
</td>
<td style="text-align:right;">
69.83128
</td>
<td style="text-align:right;">
122.7901
</td>
<td style="text-align:right;">
89.27684
</td>
<td style="text-align:right;">
72.67066
</td>
<td style="text-align:right;">
48.58699
</td>
<td style="text-align:right;">
98.32368
</td>
<td style="text-align:right;">
95.42790
</td>
<td style="text-align:right;">
104.74
</td>
<td style="text-align:right;">
84.19437
</td>
<td style="text-align:right;">
68.66522
</td>
<td style="text-align:right;">
66.41467
</td>
<td style="text-align:right;">
37.38177
</td>
<td style="text-align:right;">
100.4263
</td>
<td style="text-align:right;">
105.7561
</td>
<td style="text-align:right;">
56.38982
</td>
<td style="text-align:right;">
27.56408
</td>
<td style="text-align:right;">
97.03933
</td>
<td style="text-align:right;">
71.98254
</td>
<td style="text-align:right;">
12.89183
</td>
<td style="text-align:right;">
74.19040
</td>
<td style="text-align:right;">
36.31308
</td>
<td style="text-align:right;">
38.08304
</td>
<td style="text-align:right;">
40.58370
</td>
<td style="text-align:right;">
103.5317
</td>
<td style="text-align:right;">
48.92731
</td>
<td style="text-align:right;">
96.33284
</td>
<td style="text-align:right;">
150.1098
</td>
<td style="text-align:right;">
74.44821
</td>
<td style="text-align:right;">
105.2681
</td>
<td style="text-align:right;">
99.32295
</td>
<td style="text-align:right;">
35.24034
</td>
<td style="text-align:right;">
101.6092
</td>
<td style="text-align:right;">
23.71054
</td>
<td style="text-align:right;">
98.25743
</td>
<td style="text-align:right;">
61.62007
</td>
<td style="text-align:right;">
225.7010
</td>
<td style="text-align:right;">
42.51531
</td>
<td style="text-align:right;">
98.94638
</td>
<td style="text-align:right;">
64.92279
</td>
<td style="text-align:right;">
64.19955
</td>
<td style="text-align:right;">
63.37006
</td>
<td style="text-align:right;">
80.28816
</td>
<td style="text-align:right;">
41.99163
</td>
<td style="text-align:right;">
110.8984
</td>
<td style="text-align:right;">
76.18345
</td>
<td style="text-align:right;">
31.14146
</td>
<td style="text-align:right;">
10.57
</td>
<td style="text-align:right;">
37.86405
</td>
<td style="text-align:right;">
67.48906
</td>
<td style="text-align:right;">
42.91782
</td>
<td style="text-align:right;">
81.75836
</td>
<td style="text-align:right;">
23.67340
</td>
<td style="text-align:right;">
87.24041
</td>
<td style="text-align:right;">
101.6019
</td>
<td style="text-align:right;">
57.05649
</td>
<td style="text-align:right;">
70.36455
</td>
<td style="text-align:right;">
85.55912
</td>
<td style="text-align:right;">
43.52830
</td>
<td style="text-align:right;">
44.78313
</td>
<td style="text-align:right;">
41.22744
</td>
<td style="text-align:right;">
34.09733
</td>
<td style="text-align:right;">
93.41876
</td>
<td style="text-align:right;">
75.65400
</td>
<td style="text-align:right;">
48.26467
</td>
<td style="text-align:right;">
55.53847
</td>
<td style="text-align:right;">
49.39434
</td>
<td style="text-align:right;">
13.69632
</td>
<td style="text-align:right;">
38.30916
</td>
<td style="text-align:right;">
59.57745
</td>
<td style="text-align:right;">
46.11899
</td>
<td style="text-align:right;">
32.90544
</td>
<td style="text-align:right;">
82.78702
</td>
<td style="text-align:right;">
48.41602
</td>
<td style="text-align:right;">
48.23457
</td>
<td style="text-align:right;">
48.96336
</td>
<td style="text-align:right;">
80.06235
</td>
<td style="text-align:right;">
74.02564
</td>
<td style="text-align:right;">
46.90808
</td>
<td style="text-align:right;">
105.5428
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
42.95756
</td>
<td style="text-align:right;">
115.8515
</td>
<td style="text-align:right;">
79.92420
</td>
<td style="text-align:right;">
22.32194
</td>
<td style="text-align:right;">
108.0954
</td>
<td style="text-align:right;">
48.04214
</td>
<td style="text-align:right;">
122.4960
</td>
</tr>
</tbody>
</table>
<p>I also collect the SPY500.</p>
<pre class="r"><code>SPY_prices &lt;- tq_get(
  &quot;^GSPC&quot;,
  from = start_date,
  to = end_date
) %&gt;% 
  select(date, adjusted) %&gt;% 
  tk_xts(date_var = date)</code></pre>
<p>Which looks like:</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
adjusted
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
2012.66
</td>
</tr>
<tr>
<td style="text-align:right;">
2016.71
</td>
</tr>
<tr>
<td style="text-align:right;">
1990.26
</td>
</tr>
<tr>
<td style="text-align:right;">
1943.09
</td>
</tr>
<tr>
<td style="text-align:right;">
1922.03
</td>
</tr>
<tr>
<td style="text-align:right;">
1923.67
</td>
</tr>
</tbody>
</table>
<p>Now, we have a series of 3 data sets, the daily prices of the adjusted close for the randomly selected assets from the SPY500 wikipedia page, the ETFs and the SPY500. Next I calculate the daily returns.</p>
<pre class="r"><code>asset_returns &lt;- diff(log(asset_prices), na.pad = FALSE)
etf_returns &lt;- diff(log(etf_prices), na.pad = FALSE)
SPY_returns &lt;- diff(log(SPY_prices), na.pad = FALSE)</code></pre>
<p>The <code>asset_returns</code> looks like:</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
MMM
</th>
<th style="text-align:right;">
MNST
</th>
<th style="text-align:right;">
TJX
</th>
<th style="text-align:right;">
TMUS
</th>
<th style="text-align:right;">
NWL
</th>
<th style="text-align:right;">
INTC
</th>
<th style="text-align:right;">
EIX
</th>
<th style="text-align:right;">
XRX
</th>
<th style="text-align:right;">
GPN
</th>
<th style="text-align:right;">
HES
</th>
<th style="text-align:right;">
TIF
</th>
<th style="text-align:right;">
IR
</th>
<th style="text-align:right;">
GRMN
</th>
<th style="text-align:right;">
DRI
</th>
<th style="text-align:right;">
GLW
</th>
<th style="text-align:right;">
ZTS
</th>
<th style="text-align:right;">
CCI
</th>
<th style="text-align:right;">
BK
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0.0043496940
</td>
<td style="text-align:right;">
0.011914276
</td>
<td style="text-align:right;">
0.015549833
</td>
<td style="text-align:right;">
0.032085611
</td>
<td style="text-align:right;">
-0.0004605231
</td>
<td style="text-align:right;">
-0.004718686
</td>
<td style="text-align:right;">
0.0003390193
</td>
<td style="text-align:right;">
-0.001943595
</td>
<td style="text-align:right;">
0.015381467
</td>
<td style="text-align:right;">
-0.0022860685
</td>
<td style="text-align:right;">
-0.002956558
</td>
<td style="text-align:right;">
-0.010757820
</td>
<td style="text-align:right;">
0.003797292
</td>
<td style="text-align:right;">
0.0180042454
</td>
<td style="text-align:right;">
-0.0005589373
</td>
<td style="text-align:right;">
0.0155331932
</td>
<td style="text-align:right;">
0.020287018
</td>
<td style="text-align:right;">
-0.003760040
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.0203468502
</td>
<td style="text-align:right;">
0.001573356
</td>
<td style="text-align:right;">
-0.026052579
</td>
<td style="text-align:right;">
-0.004235761
</td>
<td style="text-align:right;">
-0.0280260856
</td>
<td style="text-align:right;">
-0.022418948
</td>
<td style="text-align:right;">
-0.0066352645
</td>
<td style="text-align:right;">
-0.012726538
</td>
<td style="text-align:right;">
0.003142188
</td>
<td style="text-align:right;">
-0.0644414487
</td>
<td style="text-align:right;">
-0.018747883
</td>
<td style="text-align:right;">
-0.021494331
</td>
<td style="text-align:right;">
-0.027722605
</td>
<td style="text-align:right;">
-0.0074420504
</td>
<td style="text-align:right;">
-0.0225996450
</td>
<td style="text-align:right;">
0.0002084719
</td>
<td style="text-align:right;">
-0.008412745
</td>
<td style="text-align:right;">
-0.025433678
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.0246630740
</td>
<td style="text-align:right;">
-0.007547151
</td>
<td style="text-align:right;">
-0.001427791
</td>
<td style="text-align:right;">
0.011420159
</td>
<td style="text-align:right;">
-0.0457985304
</td>
<td style="text-align:right;">
-0.038205692
</td>
<td style="text-align:right;">
-0.0049630049
</td>
<td style="text-align:right;">
-0.027973817
</td>
<td style="text-align:right;">
-0.038210941
</td>
<td style="text-align:right;">
-0.0327010158
</td>
<td style="text-align:right;">
-0.027810684
</td>
<td style="text-align:right;">
-0.030233211
</td>
<td style="text-align:right;">
-0.029085489
</td>
<td style="text-align:right;">
-0.0070174571
</td>
<td style="text-align:right;">
-0.0231226086
</td>
<td style="text-align:right;">
-0.0308759534
</td>
<td style="text-align:right;">
-0.025196097
</td>
<td style="text-align:right;">
-0.025568744
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.0034106468
</td>
<td style="text-align:right;">
-0.006564266
</td>
<td style="text-align:right;">
-0.044704812
</td>
<td style="text-align:right;">
-0.015673838
</td>
<td style="text-align:right;">
-0.0238374478
</td>
<td style="text-align:right;">
-0.010418300
</td>
<td style="text-align:right;">
-0.0001713849
</td>
<td style="text-align:right;">
-0.028779059
</td>
<td style="text-align:right;">
-0.019418177
</td>
<td style="text-align:right;">
-0.0009174858
</td>
<td style="text-align:right;">
-0.038228556
</td>
<td style="text-align:right;">
-0.009504269
</td>
<td style="text-align:right;">
-0.039450060
</td>
<td style="text-align:right;">
-0.0075510143
</td>
<td style="text-align:right;">
0.0029199836
</td>
<td style="text-align:right;">
-0.0147124623
</td>
<td style="text-align:right;">
-0.014103137
</td>
<td style="text-align:right;">
-0.018403085
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.0002136353
</td>
<td style="text-align:right;">
0.012332679
</td>
<td style="text-align:right;">
0.012914805
</td>
<td style="text-align:right;">
-0.005027688
</td>
<td style="text-align:right;">
-0.0007621181
</td>
<td style="text-align:right;">
0.017304330
</td>
<td style="text-align:right;">
0.0156624749
</td>
<td style="text-align:right;">
-0.020011095
</td>
<td style="text-align:right;">
-0.027971612
</td>
<td style="text-align:right;">
-0.0443372159
</td>
<td style="text-align:right;">
-0.006172111
</td>
<td style="text-align:right;">
0.003307394
</td>
<td style="text-align:right;">
-0.010486917
</td>
<td style="text-align:right;">
-0.0008065403
</td>
<td style="text-align:right;">
0.0092862449
</td>
<td style="text-align:right;">
-0.0287440451
</td>
<td style="text-align:right;">
0.007315467
</td>
<td style="text-align:right;">
0.007241532
</td>
</tr>
<tr>
<td style="text-align:right;">
0.0028436862
</td>
<td style="text-align:right;">
0.008590726
</td>
<td style="text-align:right;">
0.016384277
</td>
<td style="text-align:right;">
0.009531073
</td>
<td style="text-align:right;">
0.0156331210
</td>
<td style="text-align:right;">
0.019154091
</td>
<td style="text-align:right;">
0.0033726404
</td>
<td style="text-align:right;">
0.013734922
</td>
<td style="text-align:right;">
0.000000000
</td>
<td style="text-align:right;">
-0.0514319659
</td>
<td style="text-align:right;">
0.008367407
</td>
<td style="text-align:right;">
0.016185405
</td>
<td style="text-align:right;">
-0.001507319
</td>
<td style="text-align:right;">
0.0088375907
</td>
<td style="text-align:right;">
0.0017316113
</td>
<td style="text-align:right;">
0.0087102953
</td>
<td style="text-align:right;">
0.004411381
</td>
<td style="text-align:right;">
0.007985230
</td>
</tr>
</tbody>
</table>
<p>However, I want to assume that I own all of these assets in a single portfolio. So I average over the rows and join the data to the ETFs and call it <code>all_returns</code>.</p>
<pre class="r"><code>portfolio_returns &lt;- xts(rowMeans(asset_returns), index(asset_returns))
colnames(portfolio_returns) &lt;- c(&quot;myPortfolio&quot;)
all_returns &lt;- cbind(portfolio_returns, etf_returns)</code></pre>
<p>The <code>all_returns</code> data looks like the following, where we can now see <code>myPortfolio</code> has been joined with the ETF dataset.</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
myPortfolio
</th>
<th style="text-align:right;">
SPY
</th>
<th style="text-align:right;">
IVV
</th>
<th style="text-align:right;">
VTI
</th>
<th style="text-align:right;">
VOO
</th>
<th style="text-align:right;">
QQQ
</th>
<th style="text-align:right;">
VEA
</th>
<th style="text-align:right;">
IEFA
</th>
<th style="text-align:right;">
AGG
</th>
<th style="text-align:right;">
VWO
</th>
<th style="text-align:right;">
EFA
</th>
<th style="text-align:right;">
IEMG
</th>
<th style="text-align:right;">
VTV
</th>
<th style="text-align:right;">
IJH
</th>
<th style="text-align:right;">
IWF
</th>
<th style="text-align:right;">
BND
</th>
<th style="text-align:right;">
IJR
</th>
<th style="text-align:right;">
IWM
</th>
<th style="text-align:right;">
VUG
</th>
<th style="text-align:right;">
GLD
</th>
<th style="text-align:right;">
IWD
</th>
<th style="text-align:right;">
VIG
</th>
<th style="text-align:right;">
VNQ
</th>
<th style="text-align:right;">
USMV
</th>
<th style="text-align:right;">
LQD
</th>
<th style="text-align:right;">
VO
</th>
<th style="text-align:right;">
VYM
</th>
<th style="text-align:right;">
EEM
</th>
<th style="text-align:right;">
VB
</th>
<th style="text-align:right;">
VCSH
</th>
<th style="text-align:right;">
XLF
</th>
<th style="text-align:right;">
VCIT
</th>
<th style="text-align:right;">
VEU
</th>
<th style="text-align:right;">
XLK
</th>
<th style="text-align:right;">
ITOT
</th>
<th style="text-align:right;">
IVW
</th>
<th style="text-align:right;">
BNDX
</th>
<th style="text-align:right;">
VGT
</th>
<th style="text-align:right;">
DIA
</th>
<th style="text-align:right;">
BSV
</th>
<th style="text-align:right;">
SHV
</th>
<th style="text-align:right;">
IWB
</th>
<th style="text-align:right;">
IWR
</th>
<th style="text-align:right;">
TIP
</th>
<th style="text-align:right;">
SCHF
</th>
<th style="text-align:right;">
MBB
</th>
<th style="text-align:right;">
SDY
</th>
<th style="text-align:right;">
MDY
</th>
<th style="text-align:right;">
SCHX
</th>
<th style="text-align:right;">
IEF
</th>
<th style="text-align:right;">
HYG
</th>
<th style="text-align:right;">
DVY
</th>
<th style="text-align:right;">
XLV
</th>
<th style="text-align:right;">
SHY
</th>
<th style="text-align:right;">
IXUS
</th>
<th style="text-align:right;">
TLT
</th>
<th style="text-align:right;">
IVE
</th>
<th style="text-align:right;">
PFF
</th>
<th style="text-align:right;">
IAU
</th>
<th style="text-align:right;">
VXUS
</th>
<th style="text-align:right;">
RSP
</th>
<th style="text-align:right;">
SCHB
</th>
<th style="text-align:right;">
VV
</th>
<th style="text-align:right;">
GOVT
</th>
<th style="text-align:right;">
EMB
</th>
<th style="text-align:right;">
MUB
</th>
<th style="text-align:right;">
QUAL
</th>
<th style="text-align:right;">
XLY
</th>
<th style="text-align:right;">
VBR
</th>
<th style="text-align:right;">
EWJ
</th>
<th style="text-align:right;">
XLP
</th>
<th style="text-align:right;">
VGK
</th>
<th style="text-align:right;">
SPLV
</th>
<th style="text-align:right;">
MINT
</th>
<th style="text-align:right;">
BIV
</th>
<th style="text-align:right;">
IGSB
</th>
<th style="text-align:right;">
EFAV
</th>
<th style="text-align:right;">
VT
</th>
<th style="text-align:right;">
GDX
</th>
<th style="text-align:right;">
XLU
</th>
<th style="text-align:right;">
IWS
</th>
<th style="text-align:right;">
XLI
</th>
<th style="text-align:right;">
SCHD
</th>
<th style="text-align:right;">
IWP
</th>
<th style="text-align:right;">
ACWI
</th>
<th style="text-align:right;">
VMBS
</th>
<th style="text-align:right;">
XLE
</th>
<th style="text-align:right;">
JNK
</th>
<th style="text-align:right;">
VOE
</th>
<th style="text-align:right;">
FLOT
</th>
<th style="text-align:right;">
IWV
</th>
<th style="text-align:right;">
JPST
</th>
<th style="text-align:right;">
SCZ
</th>
<th style="text-align:right;">
IEI
</th>
<th style="text-align:right;">
IWN
</th>
<th style="text-align:right;">
DGRO
</th>
<th style="text-align:right;">
VBK
</th>
<th style="text-align:right;">
IGIB
</th>
<th style="text-align:right;">
IWO
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0.006099968
</td>
<td style="text-align:right;">
0.0016898660
</td>
<td style="text-align:right;">
0.002077056
</td>
<td style="text-align:right;">
0.0022360355
</td>
<td style="text-align:right;">
0.0017890863
</td>
<td style="text-align:right;">
-0.001736693
</td>
<td style="text-align:right;">
-0.001106388
</td>
<td style="text-align:right;">
-0.001681088
</td>
<td style="text-align:right;">
0.00046332859
</td>
<td style="text-align:right;">
0.002200231
</td>
<td style="text-align:right;">
-0.001557725
</td>
<td style="text-align:right;">
0.0023415111
</td>
<td style="text-align:right;">
0.0032234753
</td>
<td style="text-align:right;">
0.0007997348
</td>
<td style="text-align:right;">
0.0015327343
</td>
<td style="text-align:right;">
0.0012383279
</td>
<td style="text-align:right;">
0.003064097
</td>
<td style="text-align:right;">
0.002179106
</td>
<td style="text-align:right;">
0.000191391
</td>
<td style="text-align:right;">
0.002814589
</td>
<td style="text-align:right;">
0.0019626291
</td>
<td style="text-align:right;">
0.003253374
</td>
<td style="text-align:right;">
0.019113014
</td>
<td style="text-align:right;">
0.006756640
</td>
<td style="text-align:right;">
0.0005267369
</td>
<td style="text-align:right;">
0.001011874
</td>
<td style="text-align:right;">
0.004991256
</td>
<td style="text-align:right;">
0.0022334070
</td>
<td style="text-align:right;">
0.0005508056
</td>
<td style="text-align:right;">
-0.0002531205
</td>
<td style="text-align:right;">
0.003843879
</td>
<td style="text-align:right;">
0.0002372109
</td>
<td style="text-align:right;">
-0.002346225
</td>
<td style="text-align:right;">
-0.002605712
</td>
<td style="text-align:right;">
0.0017475020
</td>
<td style="text-align:right;">
0.001932397
</td>
<td style="text-align:right;">
-0.0005666427
</td>
<td style="text-align:right;">
-0.004795300
</td>
<td style="text-align:right;">
0.0005836581
</td>
<td style="text-align:right;">
-0.0001257842
</td>
<td style="text-align:right;">
0.00009081159
</td>
<td style="text-align:right;">
0.0019685044
</td>
<td style="text-align:right;">
0.002272383
</td>
<td style="text-align:right;">
-0.0006361631
</td>
<td style="text-align:right;">
-0.001106790
</td>
<td style="text-align:right;">
0.0007422784
</td>
<td style="text-align:right;">
0.0041255033
</td>
<td style="text-align:right;">
0.0003189161
</td>
<td style="text-align:right;">
0.0020875396
</td>
<td style="text-align:right;">
-0.0002827452
</td>
<td style="text-align:right;">
0.001870799
</td>
<td style="text-align:right;">
0.0060170694
</td>
<td style="text-align:right;">
0.004795681
</td>
<td style="text-align:right;">
-0.0005922602
</td>
<td style="text-align:right;">
-0.001030700
</td>
<td style="text-align:right;">
-0.004042725
</td>
<td style="text-align:right;">
0.002739571
</td>
<td style="text-align:right;">
0.0010243955
</td>
<td style="text-align:right;">
0.001924928
</td>
<td style="text-align:right;">
-0.001806146
</td>
<td style="text-align:right;">
0.002371882
</td>
<td style="text-align:right;">
0.0008275628
</td>
<td style="text-align:right;">
0.0019515134
</td>
<td style="text-align:right;">
-0.001194977
</td>
<td style="text-align:right;">
0.00264674400
</td>
<td style="text-align:right;">
0.0011761117
</td>
<td style="text-align:right;">
0.002668490
</td>
<td style="text-align:right;">
-0.001302665
</td>
<td style="text-align:right;">
0.002258164
</td>
<td style="text-align:right;">
0.012494986
</td>
<td style="text-align:right;">
0.006398807
</td>
<td style="text-align:right;">
-0.005917852
</td>
<td style="text-align:right;">
0.008133639
</td>
<td style="text-align:right;">
0.00000000000
</td>
<td style="text-align:right;">
0.001200660
</td>
<td style="text-align:right;">
-0.0004779842
</td>
<td style="text-align:right;">
0.001874008
</td>
<td style="text-align:right;">
0.0001763650
</td>
<td style="text-align:right;">
-0.00498036
</td>
<td style="text-align:right;">
0.0071519848
</td>
<td style="text-align:right;">
0.0023486170
</td>
<td style="text-align:right;">
0.0026733893
</td>
<td style="text-align:right;">
0.005754619
</td>
<td style="text-align:right;">
0.001875951
</td>
<td style="text-align:right;">
0.0009116517
</td>
<td style="text-align:right;">
0.0018953483
</td>
<td style="text-align:right;">
0.003807047
</td>
<td style="text-align:right;">
0.0020722096
</td>
<td style="text-align:right;">
0.002231295
</td>
<td style="text-align:right;">
-0.0001980912
</td>
<td style="text-align:right;">
0.002446725
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
-0.002630911
</td>
<td style="text-align:right;">
0.0004069319
</td>
<td style="text-align:right;">
0.0045386533
</td>
<td style="text-align:right;">
0.003549552
</td>
<td style="text-align:right;">
0.0004194414
</td>
<td style="text-align:right;">
0.001211963
</td>
<td style="text-align:right;">
0.0005894971
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.017322911
</td>
<td style="text-align:right;">
-0.0126945384
</td>
<td style="text-align:right;">
-0.013178202
</td>
<td style="text-align:right;">
-0.0134924019
</td>
<td style="text-align:right;">
-0.0127544774
</td>
<td style="text-align:right;">
-0.009652265
</td>
<td style="text-align:right;">
-0.018436329
</td>
<td style="text-align:right;">
-0.017729720
</td>
<td style="text-align:right;">
0.00378821023
</td>
<td style="text-align:right;">
-0.018058472
</td>
<td style="text-align:right;">
-0.016592869
</td>
<td style="text-align:right;">
-0.0180938802
</td>
<td style="text-align:right;">
-0.0143367503
</td>
<td style="text-align:right;">
-0.0141237737
</td>
<td style="text-align:right;">
-0.0105732344
</td>
<td style="text-align:right;">
0.0044445716
</td>
<td style="text-align:right;">
-0.011468264
</td>
<td style="text-align:right;">
-0.015355426
</td>
<td style="text-align:right;">
-0.011056244
</td>
<td style="text-align:right;">
0.014337489
</td>
<td style="text-align:right;">
-0.0153896498
</td>
<td style="text-align:right;">
-0.012156174
</td>
<td style="text-align:right;">
-0.002743903
</td>
<td style="text-align:right;">
-0.006272724
</td>
<td style="text-align:right;">
0.0039388941
</td>
<td style="text-align:right;">
-0.018628687
</td>
<td style="text-align:right;">
-0.013212984
</td>
<td style="text-align:right;">
-0.0193056059
</td>
<td style="text-align:right;">
-0.0150753935
</td>
<td style="text-align:right;">
0.0003798793
</td>
<td style="text-align:right;">
-0.015464153
</td>
<td style="text-align:right;">
0.0032002389
</td>
<td style="text-align:right;">
-0.017296894
</td>
<td style="text-align:right;">
-0.012410734
</td>
<td style="text-align:right;">
-0.0142874994
</td>
<td style="text-align:right;">
-0.011028538
</td>
<td style="text-align:right;">
0.0037696378
</td>
<td style="text-align:right;">
-0.013665012
</td>
<td style="text-align:right;">
-0.0143976824
</td>
<td style="text-align:right;">
0.0011297112
</td>
<td style="text-align:right;">
-0.00018126091
</td>
<td style="text-align:right;">
-0.0133167477
</td>
<td style="text-align:right;">
-0.016720820
</td>
<td style="text-align:right;">
0.0031757481
</td>
<td style="text-align:right;">
-0.018629431
</td>
<td style="text-align:right;">
0.0032416931
</td>
<td style="text-align:right;">
-0.0115945095
</td>
<td style="text-align:right;">
-0.0142095765
</td>
<td style="text-align:right;">
-0.0130144362
</td>
<td style="text-align:right;">
0.0060192314
</td>
<td style="text-align:right;">
0.000000000
</td>
<td style="text-align:right;">
-0.0101836091
</td>
<td style="text-align:right;">
-0.008194411
</td>
<td style="text-align:right;">
0.0005922602
</td>
<td style="text-align:right;">
-0.017474795
</td>
<td style="text-align:right;">
0.013385186
</td>
<td style="text-align:right;">
-0.015046456
</td>
<td style="text-align:right;">
-0.0023059217
</td>
<td style="text-align:right;">
0.016213994
</td>
<td style="text-align:right;">
-0.017094464
</td>
<td style="text-align:right;">
-0.018466064
</td>
<td style="text-align:right;">
-0.0124870774
</td>
<td style="text-align:right;">
-0.0131916717
</td>
<td style="text-align:right;">
0.003978224
</td>
<td style="text-align:right;">
-0.00009471654
</td>
<td style="text-align:right;">
0.0044202968
</td>
<td style="text-align:right;">
-0.011985546
</td>
<td style="text-align:right;">
-0.009823880
</td>
<td style="text-align:right;">
-0.015706040
</td>
<td style="text-align:right;">
-0.017537150
</td>
<td style="text-align:right;">
-0.003394215
</td>
<td style="text-align:right;">
-0.016716991
</td>
<td style="text-align:right;">
-0.008924441
</td>
<td style="text-align:right;">
0.00009924540
</td>
<td style="text-align:right;">
0.004072733
</td>
<td style="text-align:right;">
0.0007647688
</td>
<td style="text-align:right;">
-0.009721009
</td>
<td style="text-align:right;">
-0.0149360906
</td>
<td style="text-align:right;">
0.01627195
</td>
<td style="text-align:right;">
-0.0018408588
</td>
<td style="text-align:right;">
-0.0174535242
</td>
<td style="text-align:right;">
-0.0155668847
</td>
<td style="text-align:right;">
-0.012070245
</td>
<td style="text-align:right;">
-0.016226286
</td>
<td style="text-align:right;">
-0.0152395434
</td>
<td style="text-align:right;">
0.0022698272
</td>
<td style="text-align:right;">
-0.039253655
</td>
<td style="text-align:right;">
-0.0008873999
</td>
<td style="text-align:right;">
-0.019544672
</td>
<td style="text-align:right;">
0.0000000000
</td>
<td style="text-align:right;">
-0.013574412
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
-0.016961509
</td>
<td style="text-align:right;">
0.0029245001
</td>
<td style="text-align:right;">
-0.0117764103
</td>
<td style="text-align:right;">
-0.013875422
</td>
<td style="text-align:right;">
-0.0157191560
</td>
<td style="text-align:right;">
0.001489930
</td>
<td style="text-align:right;">
-0.0179955058
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.022721172
</td>
<td style="text-align:right;">
-0.0242840940
</td>
<td style="text-align:right;">
-0.024218220
</td>
<td style="text-align:right;">
-0.0248157103
</td>
<td style="text-align:right;">
-0.0246568769
</td>
<td style="text-align:right;">
-0.031814151
</td>
<td style="text-align:right;">
-0.019069875
</td>
<td style="text-align:right;">
-0.019212776
</td>
<td style="text-align:right;">
-0.00009198023
</td>
<td style="text-align:right;">
-0.032821816
</td>
<td style="text-align:right;">
-0.021000906
</td>
<td style="text-align:right;">
-0.0306311536
</td>
<td style="text-align:right;">
-0.0236320930
</td>
<td style="text-align:right;">
-0.0262082119
</td>
<td style="text-align:right;">
-0.0258207050
</td>
<td style="text-align:right;">
0.0001227881
</td>
<td style="text-align:right;">
-0.026029826
</td>
<td style="text-align:right;">
-0.027074043
</td>
<td style="text-align:right;">
-0.026052010
</td>
<td style="text-align:right;">
0.014040682
</td>
<td style="text-align:right;">
-0.0238600026
</td>
<td style="text-align:right;">
-0.018582970
</td>
<td style="text-align:right;">
-0.019675179
</td>
<td style="text-align:right;">
-0.016347691
</td>
<td style="text-align:right;">
0.0007861946
</td>
<td style="text-align:right;">
-0.022751878
</td>
<td style="text-align:right;">
-0.021792064
</td>
<td style="text-align:right;">
-0.0313506787
</td>
<td style="text-align:right;">
-0.0273006374
</td>
<td style="text-align:right;">
0.0005068469
</td>
<td style="text-align:right;">
-0.028542194
</td>
<td style="text-align:right;">
0.0005917693
</td>
<td style="text-align:right;">
-0.021745295
</td>
<td style="text-align:right;">
-0.029984083
</td>
<td style="text-align:right;">
-0.0243136677
</td>
<td style="text-align:right;">
-0.025700013
</td>
<td style="text-align:right;">
-0.0015062361
</td>
<td style="text-align:right;">
-0.032729302
</td>
<td style="text-align:right;">
-0.0238405527
</td>
<td style="text-align:right;">
0.0015052940
</td>
<td style="text-align:right;">
0.00009044932
</td>
<td style="text-align:right;">
-0.0246679043
</td>
<td style="text-align:right;">
-0.023153370
</td>
<td style="text-align:right;">
-0.0008155098
</td>
<td style="text-align:right;">
-0.018599946
</td>
<td style="text-align:right;">
0.0012935879
</td>
<td style="text-align:right;">
-0.0203358057
</td>
<td style="text-align:right;">
-0.0258820165
</td>
<td style="text-align:right;">
-0.0241643775
</td>
<td style="text-align:right;">
0.0021541043
</td>
<td style="text-align:right;">
-0.006500818
</td>
<td style="text-align:right;">
-0.0179376149
</td>
<td style="text-align:right;">
-0.020495249
</td>
<td style="text-align:right;">
0.0003548886
</td>
<td style="text-align:right;">
-0.020995449
</td>
<td style="text-align:right;">
0.001793079
</td>
<td style="text-align:right;">
-0.023062135
</td>
<td style="text-align:right;">
-0.0064343040
</td>
<td style="text-align:right;">
0.014091356
</td>
<td style="text-align:right;">
-0.020906723
</td>
<td style="text-align:right;">
-0.022920923
</td>
<td style="text-align:right;">
-0.0248076812
</td>
<td style="text-align:right;">
-0.0246652173
</td>
<td style="text-align:right;">
0.001982686
</td>
<td style="text-align:right;">
-0.00473089487
</td>
<td style="text-align:right;">
0.0014396023
</td>
<td style="text-align:right;">
-0.024085978
</td>
<td style="text-align:right;">
-0.020748172
</td>
<td style="text-align:right;">
-0.025632797
</td>
<td style="text-align:right;">
-0.015280173
</td>
<td style="text-align:right;">
-0.012072667
</td>
<td style="text-align:right;">
-0.018696026
</td>
<td style="text-align:right;">
-0.016748990
</td>
<td style="text-align:right;">
-0.00009924540
</td>
<td style="text-align:right;">
0.001314087
</td>
<td style="text-align:right;">
0.0003822792
</td>
<td style="text-align:right;">
-0.013642270
</td>
<td style="text-align:right;">
-0.0235646381
</td>
<td style="text-align:right;">
0.04326116
</td>
<td style="text-align:right;">
-0.0067016093
</td>
<td style="text-align:right;">
-0.0221778810
</td>
<td style="text-align:right;">
-0.0274902986
</td>
<td style="text-align:right;">
-0.021075943
</td>
<td style="text-align:right;">
-0.023810522
</td>
<td style="text-align:right;">
-0.0235878969
</td>
<td style="text-align:right;">
0.0013215006
</td>
<td style="text-align:right;">
-0.024701342
</td>
<td style="text-align:right;">
-0.0053430008
</td>
<td style="text-align:right;">
-0.023111858
</td>
<td style="text-align:right;">
0.0001980912
</td>
<td style="text-align:right;">
-0.024207994
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
-0.015369037
</td>
<td style="text-align:right;">
0.0022689596
</td>
<td style="text-align:right;">
-0.0269583342
</td>
<td style="text-align:right;">
-0.018940649
</td>
<td style="text-align:right;">
-0.0285117041
</td>
<td style="text-align:right;">
0.001580334
</td>
<td style="text-align:right;">
-0.0284649716
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.016273779
</td>
<td style="text-align:right;">
-0.0110371371
</td>
<td style="text-align:right;">
-0.011139358
</td>
<td style="text-align:right;">
-0.0114683030
</td>
<td style="text-align:right;">
-0.0106831096
</td>
<td style="text-align:right;">
-0.008234532
</td>
<td style="text-align:right;">
-0.012433352
</td>
<td style="text-align:right;">
-0.012885863
</td>
<td style="text-align:right;">
0.00221091926
</td>
<td style="text-align:right;">
-0.008959566
</td>
<td style="text-align:right;">
-0.012123531
</td>
<td style="text-align:right;">
-0.0095957668
</td>
<td style="text-align:right;">
-0.0118987200
</td>
<td style="text-align:right;">
-0.0130211706
</td>
<td style="text-align:right;">
-0.0100044748
</td>
<td style="text-align:right;">
0.0012306568
</td>
<td style="text-align:right;">
-0.016790854
</td>
<td style="text-align:right;">
-0.017373511
</td>
<td style="text-align:right;">
-0.009370855
</td>
<td style="text-align:right;">
-0.004437547
</td>
<td style="text-align:right;">
-0.0129618969
</td>
<td style="text-align:right;">
-0.010369474
</td>
<td style="text-align:right;">
-0.013464265
</td>
<td style="text-align:right;">
-0.010137208
</td>
<td style="text-align:right;">
0.0007854976
</td>
<td style="text-align:right;">
-0.012995981
</td>
<td style="text-align:right;">
-0.011313767
</td>
<td style="text-align:right;">
-0.0107854401
</td>
<td style="text-align:right;">
-0.0139835513
</td>
<td style="text-align:right;">
0.0001261363
</td>
<td style="text-align:right;">
-0.015713048
</td>
<td style="text-align:right;">
0.0003548290
</td>
<td style="text-align:right;">
-0.012040822
</td>
<td style="text-align:right;">
-0.007949941
</td>
<td style="text-align:right;">
-0.0118655695
</td>
<td style="text-align:right;">
-0.009695182
</td>
<td style="text-align:right;">
-0.0001885182
</td>
<td style="text-align:right;">
-0.008626436
</td>
<td style="text-align:right;">
-0.0104818256
</td>
<td style="text-align:right;">
0.0011270489
</td>
<td style="text-align:right;">
0.00009081159
</td>
<td style="text-align:right;">
-0.0104525822
</td>
<td style="text-align:right;">
-0.012278941
</td>
<td style="text-align:right;">
0.0008155098
</td>
<td style="text-align:right;">
-0.012336194
</td>
<td style="text-align:right;">
0.0011074564
</td>
<td style="text-align:right;">
-0.0096812509
</td>
<td style="text-align:right;">
-0.0134486432
</td>
<td style="text-align:right;">
-0.0113193358
</td>
<td style="text-align:right;">
0.0025227807
</td>
<td style="text-align:right;">
-0.002637331
</td>
<td style="text-align:right;">
-0.0068795036
</td>
<td style="text-align:right;">
-0.015174172
</td>
<td style="text-align:right;">
0.0007095865
</td>
<td style="text-align:right;">
-0.012508199
</td>
<td style="text-align:right;">
0.004468584
</td>
<td style="text-align:right;">
-0.012752597
</td>
<td style="text-align:right;">
0.0028360806
</td>
<td style="text-align:right;">
-0.005612737
</td>
<td style="text-align:right;">
-0.011806658
</td>
<td style="text-align:right;">
-0.012285245
</td>
<td style="text-align:right;">
-0.0114437766
</td>
<td style="text-align:right;">
-0.0107437626
</td>
<td style="text-align:right;">
0.001188048
</td>
<td style="text-align:right;">
-0.00085371766
</td>
<td style="text-align:right;">
0.0004493159
</td>
<td style="text-align:right;">
-0.011441888
</td>
<td style="text-align:right;">
-0.010809474
</td>
<td style="text-align:right;">
-0.014204613
</td>
<td style="text-align:right;">
-0.021617824
</td>
<td style="text-align:right;">
-0.007722146
</td>
<td style="text-align:right;">
-0.008731859
</td>
<td style="text-align:right;">
-0.009698102
</td>
<td style="text-align:right;">
-0.00009916959
</td>
<td style="text-align:right;">
0.002622702
</td>
<td style="text-align:right;">
0.0006684507
</td>
<td style="text-align:right;">
-0.008823294
</td>
<td style="text-align:right;">
-0.0118083221
</td>
<td style="text-align:right;">
-0.02449108
</td>
<td style="text-align:right;">
-0.0004634958
</td>
<td style="text-align:right;">
-0.0119706508
</td>
<td style="text-align:right;">
-0.0102051133
</td>
<td style="text-align:right;">
-0.010843211
</td>
<td style="text-align:right;">
-0.012586070
</td>
<td style="text-align:right;">
-0.0116223810
</td>
<td style="text-align:right;">
0.0007544131
</td>
<td style="text-align:right;">
-0.012939813
</td>
<td style="text-align:right;">
-0.0035775482
</td>
<td style="text-align:right;">
-0.015544198
</td>
<td style="text-align:right;">
-0.0005950313
</td>
<td style="text-align:right;">
-0.011530313
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
-0.013485184
</td>
<td style="text-align:right;">
0.0020213357
</td>
<td style="text-align:right;">
-0.0163207962
</td>
<td style="text-align:right;">
-0.012280109
</td>
<td style="text-align:right;">
-0.0147442744
</td>
<td style="text-align:right;">
0.001206870
</td>
<td style="text-align:right;">
-0.0174444534
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.003287114
</td>
<td style="text-align:right;">
0.0009894013
</td>
<td style="text-align:right;">
0.001036607
</td>
<td style="text-align:right;">
-0.0006123565
</td>
<td style="text-align:right;">
0.0001135276
</td>
<td style="text-align:right;">
0.003072098
</td>
<td style="text-align:right;">
0.004354785
</td>
<td style="text-align:right;">
0.003530857
</td>
<td style="text-align:right;">
-0.00285692501
</td>
<td style="text-align:right;">
-0.004342847
</td>
<td style="text-align:right;">
0.004178409
</td>
<td style="text-align:right;">
-0.0011027594
</td>
<td style="text-align:right;">
-0.0006508431
</td>
<td style="text-align:right;">
-0.0033014245
</td>
<td style="text-align:right;">
0.0005345031
</td>
<td style="text-align:right;">
-0.0041909610
</td>
<td style="text-align:right;">
0.000097994
</td>
<td style="text-align:right;">
-0.004342530
</td>
<td style="text-align:right;">
0.001001152
</td>
<td style="text-align:right;">
-0.008934590
</td>
<td style="text-align:right;">
-0.0004349583
</td>
<td style="text-align:right;">
0.002163316
</td>
<td style="text-align:right;">
0.005664191
</td>
<td style="text-align:right;">
0.001489776
</td>
<td style="text-align:right;">
-0.0032326845
</td>
<td style="text-align:right;">
-0.004816595
</td>
<td style="text-align:right;">
0.001105438
</td>
<td style="text-align:right;">
-0.0003388982
</td>
<td style="text-align:right;">
-0.0048675476
</td>
<td style="text-align:right;">
0.0008856206
</td>
<td style="text-align:right;">
0.001356817
</td>
<td style="text-align:right;">
-0.0017752166
</td>
<td style="text-align:right;">
0.001975840
</td>
<td style="text-align:right;">
0.006464163
</td>
<td style="text-align:right;">
-0.0002292283
</td>
<td style="text-align:right;">
0.002753215
</td>
<td style="text-align:right;">
-0.0011312023
</td>
<td style="text-align:right;">
0.004867711
</td>
<td style="text-align:right;">
0.0036078899
</td>
<td style="text-align:right;">
-0.0001251127
</td>
<td style="text-align:right;">
-0.00009081159
</td>
<td style="text-align:right;">
-0.0006570038
</td>
<td style="text-align:right;">
-0.003659859
</td>
<td style="text-align:right;">
-0.0052679258
</td>
<td style="text-align:right;">
0.003098229
</td>
<td style="text-align:right;">
-0.0009228731
</td>
<td style="text-align:right;">
-0.0002861645
</td>
<td style="text-align:right;">
-0.0030322035
</td>
<td style="text-align:right;">
-0.0002189089
</td>
<td style="text-align:right;">
-0.0031781230
</td>
<td style="text-align:right;">
-0.001510439
</td>
<td style="text-align:right;">
0.0023442262
</td>
<td style="text-align:right;">
-0.011979547
</td>
<td style="text-align:right;">
0.0003544986
</td>
<td style="text-align:right;">
0.001951243
</td>
<td style="text-align:right;">
-0.011003744
</td>
<td style="text-align:right;">
-0.001320438
</td>
<td style="text-align:right;">
-0.0054213750
</td>
<td style="text-align:right;">
-0.008478619
</td>
<td style="text-align:right;">
0.002135701
</td>
<td style="text-align:right;">
-0.003199632
</td>
<td style="text-align:right;">
-0.0006516613
</td>
<td style="text-align:right;">
0.0002276234
</td>
<td style="text-align:right;">
-0.001584279
</td>
<td style="text-align:right;">
-0.00170998028
</td>
<td style="text-align:right;">
-0.0016183255
</td>
<td style="text-align:right;">
0.001478523
</td>
<td style="text-align:right;">
0.007848505
</td>
<td style="text-align:right;">
-0.002496171
</td>
<td style="text-align:right;">
0.006968673
</td>
<td style="text-align:right;">
0.009340380
</td>
<td style="text-align:right;">
0.002990074
</td>
<td style="text-align:right;">
0.002163358
</td>
<td style="text-align:right;">
0.00029781110
</td>
<td style="text-align:right;">
-0.002384484
</td>
<td style="text-align:right;">
-0.0002860690
</td>
<td style="text-align:right;">
0.002735430
</td>
<td style="text-align:right;">
0.0005566762
</td>
<td style="text-align:right;">
-0.04220025
</td>
<td style="text-align:right;">
0.0053208513
</td>
<td style="text-align:right;">
-0.0037123602
</td>
<td style="text-align:right;">
0.0006030788
</td>
<td style="text-align:right;">
0.001905938
</td>
<td style="text-align:right;">
-0.004658536
</td>
<td style="text-align:right;">
0.0011492677
</td>
<td style="text-align:right;">
-0.0015090848
</td>
<td style="text-align:right;">
-0.021642045
</td>
<td style="text-align:right;">
-0.0014944173
</td>
<td style="text-align:right;">
-0.003861882
</td>
<td style="text-align:right;">
0.0003969400
</td>
<td style="text-align:right;">
-0.000796942
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.001695691
</td>
<td style="text-align:right;">
-0.0012123094
</td>
<td style="text-align:right;">
-0.0003501705
</td>
<td style="text-align:right;">
0.002878845
</td>
<td style="text-align:right;">
-0.0083062241
</td>
<td style="text-align:right;">
-0.001764683
</td>
<td style="text-align:right;">
-0.0084416475
</td>
</tr>
<tr>
<td style="text-align:right;">
0.005140787
</td>
<td style="text-align:right;">
0.0080360599
</td>
<td style="text-align:right;">
0.007689359
</td>
<td style="text-align:right;">
0.0068197139
</td>
<td style="text-align:right;">
0.0082617000
</td>
<td style="text-align:right;">
0.011531038
</td>
<td style="text-align:right;">
0.004047425
</td>
<td style="text-align:right;">
0.004688442
</td>
<td style="text-align:right;">
0.00221249905
</td>
<td style="text-align:right;">
0.003675782
</td>
<td style="text-align:right;">
0.004702448
</td>
<td style="text-align:right;">
0.0008273783
</td>
<td style="text-align:right;">
0.0061003752
</td>
<td style="text-align:right;">
0.0038377668
</td>
<td style="text-align:right;">
0.0097876198
</td>
<td style="text-align:right;">
0.0025911534
</td>
<td style="text-align:right;">
0.002638930
</td>
<td style="text-align:right;">
0.002993541
</td>
<td style="text-align:right;">
0.009163331
</td>
<td style="text-align:right;">
-0.005072985
</td>
<td style="text-align:right;">
0.0057480147
</td>
<td style="text-align:right;">
0.008340049
</td>
<td style="text-align:right;">
-0.006697424
</td>
<td style="text-align:right;">
0.005197513
</td>
<td style="text-align:right;">
0.0022727943
</td>
<td style="text-align:right;">
0.004549844
</td>
<td style="text-align:right;">
0.005352840
</td>
<td style="text-align:right;">
0.0020317774
</td>
<td style="text-align:right;">
0.0028262158
</td>
<td style="text-align:right;">
0.0000000000
</td>
<td style="text-align:right;">
0.007652486
</td>
<td style="text-align:right;">
0.0005922597
</td>
<td style="text-align:right;">
0.004185365
</td>
<td style="text-align:right;">
0.011825830
</td>
<td style="text-align:right;">
0.0070922542
</td>
<td style="text-align:right;">
0.010122713
</td>
<td style="text-align:right;">
0.0013197206
</td>
<td style="text-align:right;">
0.011331708
</td>
<td style="text-align:right;">
0.0068127609
</td>
<td style="text-align:right;">
0.0001251127
</td>
<td style="text-align:right;">
0.00009081159
</td>
<td style="text-align:right;">
0.0077616649
</td>
<td style="text-align:right;">
0.004124727
</td>
<td style="text-align:right;">
0.0027283407
</td>
<td style="text-align:right;">
0.004244698
</td>
<td style="text-align:right;">
0.0015682489
</td>
<td style="text-align:right;">
0.0052809133
</td>
<td style="text-align:right;">
0.0041247242
</td>
<td style="text-align:right;">
0.0078515507
</td>
<td style="text-align:right;">
0.0044839921
</td>
<td style="text-align:right;">
0.001007182
</td>
<td style="text-align:right;">
0.0009635456
</td>
<td style="text-align:right;">
0.012714693
</td>
<td style="text-align:right;">
0.0001185908
</td>
<td style="text-align:right;">
0.003891078
</td>
<td style="text-align:right;">
0.014321948
</td>
<td style="text-align:right;">
0.006106584
</td>
<td style="text-align:right;">
-0.0007773691
</td>
<td style="text-align:right;">
-0.004741593
</td>
<td style="text-align:right;">
0.002367465
</td>
<td style="text-align:right;">
0.004726248
</td>
<td style="text-align:right;">
0.0064978364
</td>
<td style="text-align:right;">
0.0075872456
</td>
<td style="text-align:right;">
0.003165548
</td>
<td style="text-align:right;">
-0.00467027771
</td>
<td style="text-align:right;">
0.0003596236
</td>
<td style="text-align:right;">
0.010125999
</td>
<td style="text-align:right;">
0.010992048
</td>
<td style="text-align:right;">
0.001411921
</td>
<td style="text-align:right;">
-0.005221970
</td>
<td style="text-align:right;">
0.005441886
</td>
<td style="text-align:right;">
0.008282949
</td>
<td style="text-align:right;">
0.005119095
</td>
<td style="text-align:right;">
-0.00019864151
</td>
<td style="text-align:right;">
0.001431193
</td>
<td style="text-align:right;">
-0.0003823817
</td>
<td style="text-align:right;">
0.003208727
</td>
<td style="text-align:right;">
0.0055494219
</td>
<td style="text-align:right;">
-0.02252194
</td>
<td style="text-align:right;">
-0.0039301169
</td>
<td style="text-align:right;">
0.0004647994
</td>
<td style="text-align:right;">
0.0080082458
</td>
<td style="text-align:right;">
0.005967129
</td>
<td style="text-align:right;">
0.008138341
</td>
<td style="text-align:right;">
0.0064871928
</td>
<td style="text-align:right;">
0.0001887472
</td>
<td style="text-align:right;">
0.002367193
</td>
<td style="text-align:right;">
0.0023899644
</td>
<td style="text-align:right;">
0.002866649
</td>
<td style="text-align:right;">
0.0001980912
</td>
<td style="text-align:right;">
0.007238678
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.000000000
</td>
<td style="text-align:right;">
0.0018584037
</td>
<td style="text-align:right;">
-0.0026886552
</td>
<td style="text-align:right;">
0.008587052
</td>
<td style="text-align:right;">
0.0051881359
</td>
<td style="text-align:right;">
0.001579281
</td>
<td style="text-align:right;">
0.0088344163
</td>
</tr>
</tbody>
</table>
<p>Next, I compute (just as before) the <span class="math inline">\(\beta\)</span> and <span class="math inline">\(\alpha\)</span> of the portfolios. This time using just the <code>CAPM.beta</code> and <code>CAPM.alpha</code> functions in the <code>PerformanceAnalytics</code> package.</p>
<pre class="r"><code>library(PerformanceAnalytics)
betas &lt;- CAPM.beta(Ra = all_returns, Rb = SPY_returns, Rf = 0)
alphas &lt;- CAPM.alpha(Ra = all_returns, Rb = SPY_returns, Rf = 0)

beta_alphas &lt;- cbind(t(betas), t(alphas))
colnames(beta_alphas) &lt;- c(&quot;beta&quot;, &quot;alpha&quot;)</code></pre>
<p>I rank the ETF’s by their <span class="math inline">\(\alpha\)</span> value. We can see the <code>GDX</code> has the highest <span class="math inline">\(\alpha\)</span> and a negative <span class="math inline">\(\beta\)</span> which makes sense since its a Goldminers ETF whihc tracks the Arca Gold Miners Index (GDMNTR) which tracks the performance of companies involved in the gold mining industry. As far as I know there are very few Gold mining companies listed in the SPY500. However, this is a nice way to present and rank ETFs by their <span class="math inline">\(\alpha\)</span> values and see their corresponding <span class="math inline">\(\beta\)</span> values.</p>
<pre class="r"><code>beta_alphas %&gt;% 
  as_tibble(rownames = NA) %&gt;% 
  rownames_to_column(&quot;ETFs&quot;) %&gt;% 
  arrange(desc(alpha)) %&gt;% 
  head(10) %&gt;% # I only take the top 10 observations since there are many ETF&#39;s in the data
  pivot_longer(cols = c(&quot;beta&quot;, &quot;alpha&quot;)) %&gt;% 
  ggplot(aes(x = reorder(ETFs, if_else(name == &quot;alpha&quot;, value, -Inf), FUN = max), y = value)) +
  geom_bar(color = &quot;black&quot;, fill = &quot;darkred&quot;, stat = &quot;identity&quot;) +
  scale_color_brewer(type=&#39;seq&#39;, palette=&#39;Reds&#39;) + 
  facet_wrap(~name, scales = &quot;free&quot;) +
  theme_tq() +
  coord_flip() +
  ggtitle(&quot;Highest ranked  alpha stocks&quot;, subtitle = &quot;With corresponding beta values&quot;) +
  ylab(&quot;Alpha / Beta value&quot;) +
  xlab(&quot;ETF&quot;)</code></pre>
<p><img src="/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
<p>We can also rank the <span class="math inline">\(alpha\)</span> and <span class="math inline">\(beta\)</span> values by taking their ratio of <span class="math inline">\(\dfrac{\alpha}{\beta}\)</span> and plot the results.</p>
<pre class="r"><code>beta_alphas %&gt;% 
  as_tibble(rownames = NA) %&gt;% 
  rownames_to_column(&quot;ETFs&quot;) %&gt;% 
  mutate(alpha_divided_beta = alpha/beta) %&gt;% 
  arrange(desc(alpha_divided_beta )) %&gt;% 
  head(10) %&gt;% 
  ggplot(aes(x = ETFs, y = alpha_divided_beta )) +
  geom_bar(color = &quot;black&quot;, fill = &quot;darkred&quot;, stat = &quot;identity&quot;) +
  scale_color_brewer(type=&#39;seq&#39;, palette=&#39;Reds&#39;) + 
  theme_tq() +
  coord_flip() +
  ggtitle(&quot;Best Performers: Alpha over Beta ranked ETFs&quot;) +
  ylab(&quot;Alpha / Beta value&quot;) +
  xlab(&quot;ETF&quot;)</code></pre>
<p><img src="/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation_files/figure-html/unnamed-chunk-39-1.png" width="672" /></p>
<p>Changing a few lines of code and we can plot and see the worst performers with negative <span class="math inline">\(\alpha\)</span> to <span class="math inline">\(\beta\)</span> ratios.</p>
<pre class="r"><code>beta_alphas %&gt;% 
  as_tibble(rownames = NA) %&gt;% 
  rownames_to_column(&quot;ETFs&quot;) %&gt;% 
  mutate(alpha_divided_beta = alpha/beta) %&gt;% 
  arrange(alpha_divided_beta) %&gt;% 
  head(10) %&gt;% 
  ggplot(aes(x = ETFs, y = alpha_divided_beta )) +
  geom_bar(color = &quot;black&quot;, fill = &quot;darkblue&quot;, stat = &quot;identity&quot;) +
  scale_color_brewer(type=&#39;seq&#39;, palette=&#39;Reds&#39;) + 
  theme_tq() +
  coord_flip() +
  ggtitle(&quot;Worst Performers: Alpha over Beta ranked ETFs&quot;) +
  ylab(&quot;Alpha / Beta value&quot;) +
  xlab(&quot;ETF&quot;)</code></pre>
<p><img src="/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
<p>We can take our ETF <span class="math inline">\(\beta\)</span> and <span class="math inline">\(\alpha\)</span> values before and compute <span class="math inline">\(\sigma\)</span>.</p>
<pre class="r"><code>beta &lt;- cov(all_returns, SPY_returns) / as.numeric(var(SPY_returns))
alpha &lt;- colMeans(all_returns) - beta*colMeans(SPY_returns)
N = length(SPY_returns)

mySigmaFunction &lt;- function(ASSET){
  err = all_returns[, ASSET] - alpha[ASSET ,] - beta[ASSET ,] * SPY_returns
  Sigma = (1 / (N - 2)) %*% t(err) %*% err
  return(Sigma)
}

Sigma2 &lt;- sapply(colnames(all_returns), mySigmaFunction)
diag_Sigma2 &lt;- diag(Sigma2)
colnames(diag_Sigma2) = colnames(all_returns)
rownames(diag_Sigma2) = colnames(all_returns)

Sigma &lt;- as.numeric(var(SPY_returns)) * beta %*% t(beta) + diag_Sigma2</code></pre>
<p>Finally, I take a random sample of the ETF’s (since there are too many to analyse) and plot the correlations between the ETF’s.</p>
<pre class="r"><code>set.seed(1234)
Sigma_subsample &lt;- sample(colnames(Sigma), size = 10)
Sigma_sampled &lt;- Sigma[ncol = Sigma_subsample, nrow = Sigma_subsample, drop = FALSE]
col &lt;- colorRampPalette(c(&quot;#BB4444&quot;, &quot;#EE9988&quot;, &quot;#FFFFFF&quot;, &quot;#77AADD&quot;, &quot;#4477AA&quot;))
corrplot(cov2cor(Sigma_sampled), method = &quot;color&quot;, col = col(200),
         main = &quot;Covariance matrix of ETFs&quot;,
         type = &quot;upper&quot;, order = &quot;hclust&quot;, number.cex = .7,
         addCoef.col = &quot;black&quot;,
         tl.col = &quot;black&quot;, tl.srt = 90,
         diag = FALSE)</code></pre>
<p><img src="/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation_files/figure-html/unnamed-chunk-42-1.png" width="672" /></p>
</div>
</div>
<div id="sharpe-ratio-capm-and-fama-french-factor-analysis" class="section level2">
<h2>Sharpe Ratio, CAPM and Fama-French Factor Analysis</h2>
<p>Using simple plots still doesn’t give us enough information about an ETF, Portfolio or Asset. The <em>Sharpe</em> ratio <span class="citation">Sharpe (<a href="#ref-sharpe1966mutual" role="doc-biblioref">1966</a>)</span> is a better measure. The <em>Sharpe</em> ratio is a reward-to-variability ratio which allows us to compare the performance of a portfolio compared to a risk-free asset, after adjusting for it’s risk. It takes the differenece between the portfolio’s return and the risk-free return, this is then divided by the standard deviation (which measures the portfolios volatility).</p>
<p>The <em>Sharpe</em> ratio tells us what the additional unit of return we can expect per unit of risk increase. The <em>Sharpe</em> ratio is defined as:</p>
<p><span class="math display">\[S = \dfrac{\overline{d}}{\sigma_{d}}\]</span></p>
<p>Where <span class="math display">\[\widetilde{d} = \widetilde{R}_{F} - \widetilde{R}_{B}\]</span></p>
<p>The single asset model with just the market factor looks like:</p>
<p><span class="math display">\[ x_t = \alpha + \beta y_{t} + \epsilon_{t}\]</span></p>
<p>Taking the expected value of <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> at time <span class="math inline">\(t\)</span> we have:</p>
<p><span class="math display">\[E[x_{t}] = \alpha + \beta E[y_{t}]\]</span>
With variance:</p>
<p><span class="math display">\[var[x_{t}] = \beta^2var[y_t] + \sigma^2\]</span></p>
<p>Thus, the <em>Sharpe</em> ratio becomes:</p>
<p><span class="math display">\[\dfrac{E[x_{t}]}{\sqrt{var[x_{t}]}}\]</span></p>
<p>Recall that <span class="math inline">\(\sigma = \sqrt{var[x_t]}\)</span>, we just plug in the values for <span class="math inline">\(E[x_{t}]\)</span> and <span class="math inline">\(var[x_t]\)</span> defined previously and the equation becomes:</p>
<p><span class="math display">\[\dfrac{\alpha + \beta E[y_{t}]}{\sqrt{\beta^2 var[y_t] + \sigma^2}}\]</span>
Which after some algebra we obtain:</p>
<p><span class="math display">\[\dfrac{\dfrac{\alpha}{\beta} + E[y_{t}]}{\sqrt{var[y_{t}] + \dfrac{\sigma^{2}}{\beta^{2}}}}\]</span></p>
<p>Finally we end up with:</p>
<p><span class="math display">\[\dfrac{\dfrac{\alpha}{\beta} + E[y_t]}{\sqrt{(var[y_t])}}\]</span>
We can represent the <em>Sharpe</em> ratio as <span class="math inline">\(\dfrac{\overline{x}}{\sqrt(Diag(\sigma^{2}))}\)</span> where <span class="math inline">\(\overline{x}\)</span> is the average value of <span class="math inline">\(x\)</span> over the historic period from <span class="math inline">\(t=1\)</span> to <span class="math inline">\(T\)</span> - simply computed as <span class="math inline">\(\overline{x} = \dfrac{1}{T}\sum_{t=1}^{T} D_{t}\)</span>. In R we can simply take <code>colMeans(all_returns) / sqrt(diag(var(all_returns)))</code>.</p>
<div id="machine-learning-and-clustering" class="section level4">
<h4>Machine Learning and Clustering</h4>
<p>We can cluster our ETF’s based on their <span class="math inline">\(\beta\)</span>, <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(sharpe\)</span> values. Why would we want to do this? Perhaps with more variables than the 3 here the model can cluster these firms in a higher dimensional space and thus we can select our ETF’s based on the clusters and use it as a portfolio diversification tool, that is one cluster might contain riskier ETF’s whereas another might contain <code>value</code> stocks or <code>growth</code> stocks. With such few variables here it doesn’t quite work but with more variables we can better classifiy ETFs.</p>
<pre class="r"><code>betas &lt;- CAPM.beta(Ra = all_returns, Rb = SPY_returns, Rf = 0)
alphas &lt;- CAPM.alpha(Ra = all_returns, Rb = SPY_returns, Rf = 0)
sharpe &lt;- colMeans(all_returns) / sqrt(diag(var(all_returns)))

beta_alphas_sharpe &lt;- cbind(t(betas), t(alphas), sharpe)
colnames(beta_alphas_sharpe) &lt;- c(&quot;beta&quot;, &quot;alpha&quot;, &quot;sharpe&quot;)
beta_alphas_sharpe &lt;- na.omit(beta_alphas_sharpe)
library(factoextra)
kmeans_model &lt;- kmeans(beta_alphas_sharpe, centers = 5, iter.max = 10, nstart = 1)
fviz_cluster(kmeans_model, data = beta_alphas_sharpe)</code></pre>
<p><img src="/post/factor-modeling-for-portfolio-optimisation/factor-modeling-portfolio-optimisation_files/figure-html/unnamed-chunk-43-1.png" width="672" /></p>
<p>The <code>beta_alphas_sharpe</code> data looks like:</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
beta
</th>
<th style="text-align:right;">
alpha
</th>
<th style="text-align:right;">
sharpe
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
myPortfolio
</td>
<td style="text-align:right;">
1.0977199
</td>
<td style="text-align:right;">
0.0000345
</td>
<td style="text-align:right;">
0.0834437
</td>
</tr>
<tr>
<td style="text-align:left;">
SPY
</td>
<td style="text-align:right;">
0.9990763
</td>
<td style="text-align:right;">
0.0000799
</td>
<td style="text-align:right;">
0.0988232
</td>
</tr>
<tr>
<td style="text-align:left;">
IVV
</td>
<td style="text-align:right;">
0.9923880
</td>
<td style="text-align:right;">
0.0000872
</td>
<td style="text-align:right;">
0.1000217
</td>
</tr>
<tr>
<td style="text-align:left;">
VTI
</td>
<td style="text-align:right;">
1.0282825
</td>
<td style="text-align:right;">
0.0000718
</td>
<td style="text-align:right;">
0.0969068
</td>
</tr>
<tr>
<td style="text-align:left;">
VOO
</td>
<td style="text-align:right;">
0.9978598
</td>
<td style="text-align:right;">
0.0000848
</td>
<td style="text-align:right;">
0.0995858
</td>
</tr>
<tr>
<td style="text-align:left;">
QQQ
</td>
<td style="text-align:right;">
1.1472461
</td>
<td style="text-align:right;">
0.0000931
</td>
<td style="text-align:right;">
0.0870931
</td>
</tr>
</tbody>
</table>
<p>We can plot the <span class="math inline">\(\beta\)</span>, <span class="math inline">\(\alpha\)</span>, and <span class="math inline">\(sharpe\)</span> values in a 3D plot and colour them according to the clusters from the <code>kmeans</code> model. It also gives me the opportunity to use the <code>threejs</code> package which we can interact with.</p>
<pre class="r"><code>#library(rgl)
#options(rgl.printRglwidget = TRUE)
#plot3d(beta_alphas_sharpe, col = kmeans_model$cluster, size=2, type=&#39;s&#39;)

library(threejs)
scatterplot3js(beta_alphas_sharpe, color = factor(kmeans_model$cluster), size = 0.5, bg = &quot;black&quot;)</code></pre>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="scatterplotThree html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"NROW":98,"height":null,"width":null,"axis":true,"numticks":[6,6,6],"xticklabs":null,"yticklabs":null,"zticklabs":null,"color":[["#0000FF","#00CD00","#00CD00","#00CD00","#00CD00","#0000FF","#0000FF","#0000FF","#FF0000","#0000FF","#0000FF","#0000FF","#00CD00","#0000FF","#00CD00","#FF0000","#0000FF","#0000FF","#00CD00","#00FFFF","#00CD00","#00CD00","#000000","#000000","#FF0000","#0000FF","#00CD00","#0000FF","#0000FF","#FF0000","#0000FF","#FF0000","#0000FF","#0000FF","#00CD00","#00CD00","#FF0000","#0000FF","#00CD00","#FF0000","#FF0000","#00CD00","#0000FF","#FF0000","#0000FF","#FF0000","#00CD00","#0000FF","#00CD00","#FF0000","#000000","#00CD00","#00CD00","#FF0000","#0000FF","#00FFFF","#00CD00","#000000","#00FFFF","#0000FF","#0000FF","#00CD00","#00CD00","#FF0000","#000000","#FF0000","#00CD00","#00CD00","#0000FF","#00CD00","#000000","#0000FF","#000000","#FF0000","#FF0000","#FF0000","#00CD00","#0000FF","#FF0000","#000000","#0000FF","#00CD00","#00CD00","#0000FF","#00CD00","#FF0000","#0000FF","#000000","#0000FF","#FF0000","#00CD00","#00CD00","#FF0000","#0000FF","#00CD00","#0000FF","#FF0000","#0000FF"]],"size":0.5,"stroke":"black","flipy":true,"grid":true,"renderer":"auto","signif":8,"bg":"black","cexsymbols":1,"xlim":{},"ylim":{},"zlim":{},"pch":["@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@"],"axisLabels":["beta","sharpe","alpha"],"linealpha":1,"alpha":[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],"vertices":[[0.86842037,0.19768058,0.79896455,0.8122099,0.24570882,0.76546812,0.80839869,0.24945155,0.76008965,0.82885256,0.23972431,0.77143559,0.8115167,0.24809052,0.76186757,0.89664204,0.20907696,0.75569795,0.87545316,0.13300382,0.88279977,0.87892383,0.12345017,0.89921062,0.21245747,0.1353452,0.71519514,0.96224679,0.17917625,0.73777743,0.8840305,0.11368051,0.92247267,0.9567801,0.19368915,0.69889475,0.8030793,0.24426172,0.75214024,0.90077996,0.20228446,0.78891538,0.80846652,0.25685801,0.72872393,0.20738798,0.14629668,0.7034228,0.93980694,0.18609032,0.77202964,0.96776678,0.16660805,0.83350105,0.82469874,0.22492581,0.77612462,0.0072680562,0.072944981,0.3815712,0.8238163,0.20278562,0.81329857,0.71997998,0.28505182,0.69305727,0.64956127,0.038009408,0.91332596,0.63627089,0.27495944,0.69195384,0.22303675,0.21506997,0.62037529,0.87677485,0.17855466,0.85353738,0.74885905,0.26866605,0.72260875,0.98475726,0.18641981,0.70987767,0.92873432,0.17647001,0.83318765,0.23662141,0.24538331,0.74954408,0.95349741,0.20807217,0.33941353,0.21914287,0.2132234,0.65780069,0.89471618,0.15197604,0.85062954,0.87138986,0.27506301,0.62683163,0.82597919,0.24004032,0.77034434,0.80559384,0.23720957,0.7596557,0.22235117,0.17512233,0.71131769,0.91812957,0.25946954,0.64274803,0.76340472,0.35044209,0.59597513,0.22073833,0.11710243,0.77175807,0.24069479,0.35835152,0.80696572,0.81858223,0.24136177,0.77105671,0.86650082,0.19227675,0.82847854,0.22134258,0.10882134,0.70481383,0.86976802,0.13628746,0.87610547,0.21684798,0.081724253,0.75359276,0.72569943,0.28425152,0.67061056,0.90492964,0.19742584,0.79969008,0.81035901,0.24835885,0.76135119,0.14360957,0,0.70622799,0.50727275,0.23155018,0.73759234,0.69507419,0.28304457,0.65302193,0.75321769,0.086311,0.92312075,0.23036576,0.040832626,0.80126956,0.88121801,0.15984125,0.83184111,0.021569341,0.016758407,0.52655437,0.81060701,0.22243558,0.77961659,0.40021893,0.086042066,0.81301106,0,0.073658157,0.37205153,0.89758197,0.14935085,0.8532154,0.85487073,0.20812666,0.80752296,0.82133194,0.24192055,0.76812712,0.81048037,0.24753617,0.76279233,0.170983,0.0087811686,0.73450521,0.37935598,0.2400784,0.64866877,0.1996185,0.10274521,0.7241423,0.77047125,0.23734123,0.77137957,0.80442396,0.17443686,0.82295812,0.91473618,0.18557293,0.80403361,0.77729792,0.11576565,0.83330271,0.57265433,0.11995578,0.79637196,0.94172922,0.087313513,0.96968996,0.63234826,0.23587091,0.71002534,0.24128725,1,0.76734876,0.18793973,0.0833462,0.70033351,0.2410368,0.27075425,0.77846917,0.68230063,0.11677763,0.85991714,0.86080815,0.20196789,0.81016103,0.14373956,0.06352858,0,0.43246144,0.13590547,0.57383405,0.85764927,0.19124094,0.81461577,0.83311762,0.26908846,0.65291322,0.71347671,0.31790239,0.6500643,0.87192721,0.18532454,0.8333257,0.84539964,0.20738937,0.80081765,0.21427724,0.091387259,0.74892751,0.96104965,0.056055458,1,0.51241777,0.24790322,0.71644714,0.86561388,0.18999103,0.82323629,0.2457111,0.3520244,0.77946229,0.83226163,0.23529644,0.77766867,0.80587032,0.17269504,0.76881137,0.19005408,0.01666762,0.75302567,0.93855143,0.17765193,0.78812958,0.75957138,0.30953111,0.66859364,0.94591256,0.15700728,0.86976113,0.22767177,0.22204563,0.71347953,1,0.14382141,0.88218506]],"xticklab":["-0.43","-0.08","0.28","0.63","0.98","1.33"],"yticklab":["0.02","0.08","0.15","0.21","0.28","0.34"],"zticklab":["1.12e-03","8.46e-04","5.75e-04","3.04e-04","3.31e-05","-2.38e-04"],"xtick":[0,0.2,0.4,0.6,0.8,1],"ytick":[0,0.2,0.4,0.6,0.8,1],"ztick":[0,0.2,0.4,0.6,0.8,1]},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="factor-modelling-fama-and-french" class="section level1">
<h1>Factor Modelling Fama and French</h1>
<p>Finally, I analyse the performance of the various ETF’s. The CAPM formula tries to explain the performance of a portfolio through a sigle factor, the market as a whole. CAPM is defined as follows:</p>
<p><span class="math display">\[R_{a} = R_{rf} + \beta_{a}(R_{m} - R_{rf})\]</span></p>
<p>We can take the model further by adding <em>Factors</em> to the model. Thus, the 3 Factor model looks like:</p>
<p><span class="math display">\[R_{a} = R_{rf} + \beta_{a}(R_{m} - R_{rf}) + \beta_{b}(SMB) + \beta_{c} HML\]</span></p>
<p>Which takes the market factor from the CAPM and adds 2 new factors, the <span class="math inline">\(SMB\)</span> and <span class="math inline">\(HML\)</span> or <em>Small-minus-Big</em> and <em>High-minus-Low</em>. The <span class="math inline">\(SMB\)</span> tries to caputre the size effect, small market cap companies should outperform the market over the long run. The <span class="math inline">\(HML\)</span> aims to capture the value verses growth effect by sorting assests based on high book-to-market ratios (defined at the begining of the post). Firms which typically have a high book-to-market ratio are value stocks and low book-to-market ratios are growth stocks, the literature also shows that value stocks outperform growth stocks over the long term horizon.</p>
<p>The Fama French factor model allows us to analyse fund managers performance, since, if an asset managers portfolio can be explained by the Fama French factors then that fund manager has not added any value through portfolio selection and skill and subseuently obtained no alpha.</p>
<p>More formally, our equation becomes:</p>
<p><span class="math display">\[X^T = a^T + B F^T + E^T\]</span></p>
<p>Where <span class="math inline">\(F\)</span> is a matrix of factors and <span class="math inline">\(B\)</span> is a scalar of <span class="math inline">\(\beta\)</span>’s such that <span class="math inline">\(B = [{b_{1}, b_{2}, b_{3}]}\)</span>, in which <span class="math inline">\(b_{1}\)</span> is the market <span class="math inline">\(\beta\)</span>, <span class="math inline">\(b_{2}\)</span> is the <span class="math inline">\(SMB\)</span> <span class="math inline">\(\beta\)</span> and <span class="math inline">\(b_{3}\)</span> is the <span class="math inline">\(HML\)</span> <span class="math inline">\(\beta\)</span>. More formally extending to include more factors up to <span class="math inline">\(N\)</span> we have; <span class="math inline">\(B = [\beta_{1}, ... , \beta_{N}]^T\)</span></p>
<p>We want to fit a line which minimises the squared errors such that; <span class="math inline">\(minimise, \beta\)</span> <span class="math inline">\(|X^T - a^T-BF^T|_{F}^2\)</span></p>
<p>The solution becomes <span class="math inline">\([a, B] = X^T \widetilde{F}(\widetilde{F}^T\widetilde{F})^{-1}\)</span> which we can solve in R using the following:</p>
<p>(For completness I re-download the data)</p>
<ol style="list-style-type: decimal">
<li>I download the data as before randomly selecting from Wikipedia and convert the daily prices to daily returns - (I set a <code>seed</code> such that we collect the same data using <code>set.seed</code>).</li>
</ol>
<pre class="r"><code>library(quantmod)
library(tidyquant)
library(timetk)
library(rvest)

start_date &lt;- &quot;2016-01-01&quot;
end_date &lt;- &quot;2019-11-15&quot;


set.seed(4746)
url &lt;- &quot;https://en.wikipedia.org/wiki/List_of_S%26P_500_companies&quot;

symbols &lt;- url %&gt;%
  read_html() %&gt;%
  html_nodes(xpath = &#39;//*[@id=&quot;constituents&quot;]&#39;) %&gt;% 
  html_table() %&gt;% 
  .[[1]] %&gt;% 
  filter(!str_detect(Security, &quot;Class A|Class B|Class C&quot;)) %&gt;%     # Removes firms with Class A shares
  sample_n(20) %&gt;% 
  pull(Symbol)


asset_returns &lt;- tq_get(
  symbols,
  from = start_date,
  to = end_date
) %&gt;% 
  group_by(symbol) %&gt;% 
  tq_transmute(
    select = adjusted,
    mutate_fun = periodReturn,
    period = &quot;daily&quot;,
    type = &quot;arithmetic&quot;
  ) %&gt;% 
  select(symbol, date, daily.returns) %&gt;% 
  pivot_wider(names_from = symbol, values_from = daily.returns) %&gt;% 
  .[-1, ]</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>I download the ETFs just as before and convert to daily returns.</li>
</ol>
<pre class="r"><code>myETFs &lt;- c(&quot;SPY&quot;, &quot;IVV&quot;, &quot;VTI&quot;, &quot;VOO&quot;, &quot;QQQ&quot;, &quot;VEA&quot;, &quot;IEFA&quot;, &quot;AGG&quot;, &quot;VWO&quot;,
            &quot;EFA&quot;,&quot;IEMG&quot;,&quot;VTV&quot;, &quot;IJH&quot;, &quot;IWF&quot;,&quot;BND&quot;, &quot;IJR&quot;, &quot;IWM&quot;, &quot;VUG&quot;, 
            &quot;GLD&quot;, &quot;IWD&quot;, &quot;VIG&quot;, &quot;VNQ&quot;, &quot;USMV&quot;, &quot;LQD&quot;, &quot;VO&quot;, &quot;VYM&quot;, &quot;EEM&quot;,
            &quot;VB&quot;, &quot;VCSH&quot;, &quot;XLF&quot;, &quot;VCIT&quot;, &quot;VEU&quot;, &quot;XLK&quot;, &quot;ITOT&quot;, &quot;IVW&quot;, &quot;BNDX&quot;,
            &quot;VGT&quot;, &quot;DIA&quot;, &quot;BSV&quot;, &quot;SHV&quot;, &quot;IWB&quot;, &quot;IWR&quot;, &quot;TIP&quot;, &quot;SCHF&quot;, &quot;MBB&quot;, &quot;SDY&quot;,
            &quot;MDY&quot;, &quot;SCHX&quot;, &quot;IEF&quot;, &quot;HYG&quot;, &quot;DVY&quot;, &quot;XLV&quot;, &quot;SHY&quot;, &quot;IXUS&quot;, &quot;TLT&quot;, &quot;IVE&quot;,
            &quot;PFF&quot;, &quot;IAU&quot;, &quot;VXUS&quot;, &quot;RSP&quot;, &quot;SCHB&quot;, &quot;VV&quot;, &quot;GOVT&quot;, &quot;EMB&quot;, &quot;MUB&quot;, &quot;QUAL&quot;,
            &quot;XLY&quot;, &quot;VBR&quot;, &quot;EWJ&quot;, &quot;XLP&quot;, &quot;VGK&quot;, &quot;SPLV&quot;, &quot;MINT&quot;, &quot;BIV&quot;, &quot;IGSB&quot;, &quot;EFAV&quot;,
            &quot;VT&quot;, &quot;GDX&quot;, &quot;XLU&quot;, &quot;IWS&quot;, &quot;XLI&quot;, &quot;SCHD&quot;, &quot;IWP&quot;, &quot;ACWI&quot;, &quot;VMBS&quot;, &quot;XLE&quot;, &quot;JNK&quot;,
            &quot;VOE&quot;, &quot;FLOT&quot;, &quot;IWV&quot;, &quot;JPST&quot;, &quot;SCZ&quot;, &quot;IEI&quot;, &quot;IWN&quot;, &quot;DGRO&quot;, &quot;VBK&quot;, &quot;IGIB&quot;, &quot;IWO&quot;)


etf_returns &lt;- tq_get(
  myETFs,
  from = start_date,
  to = end_date
) %&gt;% 
  group_by(symbol) %&gt;% 
  tq_transmute(
    select = adjusted,
    mutate_fun = periodReturn,
    period = &quot;daily&quot;,
    type = &quot;arithmetic&quot;
  ) %&gt;% 
  select(symbol, date, daily.returns) %&gt;% 
  pivot_wider(names_from = symbol, values_from = daily.returns) %&gt;% 
  .[-1, ]</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>I take the average daily return of the randomly selected stocks and join the data with the ETFs and set the data as a time series object. I also download the daily Fama French 3 factors from Kenneth French’s website and clean the data up a little.</li>
</ol>
<pre class="r"><code>portfolio_and_etfs &lt;- asset_returns %&gt;% 
  mutate(myPortfolio = rowMeans(select(., -date), na.rm = TRUE)) %&gt;% 
  select(date, myPortfolio) %&gt;% 
  inner_join(etf_returns, by = c(&quot;date&quot;)) %&gt;% 
  tk_xts(date_var = date)

# Daily fama french
library(glue)
library(readr)
temp &lt;- tempfile()
base &lt;- &quot;http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/ftp/&quot;
factor &lt;- &quot;F-F_Research_Data_Factors_daily&quot;
format&lt;-&quot;_CSV.zip&quot;
full_url &lt;-glue(base,factor,format,sep =&quot;&quot;)
download.file(full_url,temp,quiet = TRUE)

North_America_3_Factors &lt;- read_csv(unz(temp, &quot;F-F_Research_Data_Factors_daily.CSV&quot;), skip = 4) %&gt;%
  rename(date = X1) %&gt;% 
  mutate(date = ymd(date)) %&gt;% 
  drop_na(date) %&gt;%
  rename(Mkt_Rf_3 = `Mkt-RF`,
         SMB_3 = SMB,
         HML_3 = HML,
         RF_3 = RF) %&gt;% 
  select(-RF_3) %&gt;% 
  mutate_at(vars(c(&quot;Mkt_Rf_3&quot;, &quot;SMB_3&quot;, &quot;HML_3&quot;)), funs(./100)) %&gt;% 
  tk_xts(date_var = date)</code></pre>
<p>Finally we can compute the solution <span class="math inline">\([a, B] = X^T \widetilde{F}(\widetilde{F}^T\widetilde{F})^{-1}\)</span></p>
<pre class="r"><code>three_factors &lt;- North_America_3_Factors[index(North_America_3_Factors) %in% c(min(index(portfolio_and_etfs)):max(index(North_America_3_Factors)))] # this ensures that the dates from the both time series match
portfolio_and_etfs_new &lt;- portfolio_and_etfs[index(portfolio_and_etfs) %in% c(min(index(three_factors))):max(index(three_factors))] # There is probably a much nicer way to go about doing this but this works...
FF_3Factors &lt;- cbind(alpha = 1, three_factors)
Gamma &lt;- t(solve(t(FF_3Factors) %*% FF_3Factors, t(FF_3Factors) %*% portfolio_and_etfs_new))</code></pre>
<p>Which we can see as:</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
alpha
</th>
<th style="text-align:right;">
Mkt_Rf_3
</th>
<th style="text-align:right;">
SMB_3
</th>
<th style="text-align:right;">
HML_3
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
myPortfolio
</td>
<td style="text-align:right;">
0.0001697
</td>
<td style="text-align:right;">
0.9844870
</td>
<td style="text-align:right;">
0.0155642
</td>
<td style="text-align:right;">
0.0629606
</td>
</tr>
<tr>
<td style="text-align:left;">
SPY
</td>
<td style="text-align:right;">
0.0000391
</td>
<td style="text-align:right;">
0.9784199
</td>
<td style="text-align:right;">
-0.1331473
</td>
<td style="text-align:right;">
-0.0085326
</td>
</tr>
<tr>
<td style="text-align:left;">
IVV
</td>
<td style="text-align:right;">
0.0000423
</td>
<td style="text-align:right;">
0.9771912
</td>
<td style="text-align:right;">
-0.1341942
</td>
<td style="text-align:right;">
-0.0113980
</td>
</tr>
<tr>
<td style="text-align:left;">
VTI
</td>
<td style="text-align:right;">
0.0000440
</td>
<td style="text-align:right;">
0.9727841
</td>
<td style="text-align:right;">
-0.0164012
</td>
<td style="text-align:right;">
-0.0019078
</td>
</tr>
<tr>
<td style="text-align:left;">
VOO
</td>
<td style="text-align:right;">
0.0000430
</td>
<td style="text-align:right;">
0.9769683
</td>
<td style="text-align:right;">
-0.1356460
</td>
<td style="text-align:right;">
-0.0099922
</td>
</tr>
<tr>
<td style="text-align:left;">
QQQ
</td>
<td style="text-align:right;">
0.0000440
</td>
<td style="text-align:right;">
1.1645777
</td>
<td style="text-align:right;">
-0.1440829
</td>
<td style="text-align:right;">
-0.4955734
</td>
</tr>
</tbody>
</table>
<p>Instead, we can estimate these using linear regression models. For my random portfolio <code>myPortfolio</code> we can use the <code>lm</code> function to fit a linear model and then use the <code>tidy</code> function from the <code>broom</code> package to tidy the output up a little:</p>
<pre class="r"><code>library(broom)
regdata &lt;- cbind(FF_3Factors, portfolio_and_etfs_new)
#sapply(regdata, function(x) sum(is.na(x)))   # One column was causing problems since it consisted of just NA values. I remove it below.
regdata$JPST &lt;- NULL      # This ETF failed to download or does not exist on the Yahoo Finance site

myPortfolioReg &lt;- lm(myPortfolio ~ Mkt_Rf_3 + SMB_3 + HML_3, data = regdata, na.action = na.exclude)
tidy(myPortfolioReg)</code></pre>
<pre><code>## # A tibble: 4 x 5
##   term        estimate std.error statistic p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 (Intercept) 0.000170  0.000112     1.51  0.131  
## 2 Mkt_Rf_3    0.984     0.0136      72.6   0      
## 3 SMB_3       0.0156    0.0226       0.690 0.490  
## 4 HML_3       0.0630    0.0200       3.15  0.00167</code></pre>
<p>We can apply this to all our ETFs in the data using the <code>apply</code> command and applying our own custom <code>lm</code> function.</p>
<pre class="r"><code>regressionLists &lt;- apply(regdata, 2, function(y) lm(y ~ Mkt_Rf_3 + SMB_3 + HML_3, data = regdata, na.action = na.exclude))</code></pre>
<p>We can also apply the <code>tidy</code> command to individual ETFs and then use the <code>stars.pval</code> to make the data even more tidy <em><sub>awesome</sub></em>.</p>
<pre class="r"><code>library(gtools)
tidy(regressionLists$myPortfolio) %&gt;% 
  mutate(p.value = stars.pval(p.value))</code></pre>
<pre><code>## # A tibble: 4 x 5
##   term        estimate std.error statistic p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;  
## 1 (Intercept) 0.000170  0.000112     1.51  &quot; &quot;    
## 2 Mkt_Rf_3    0.984     0.0136      72.6   ***    
## 3 SMB_3       0.0156    0.0226       0.690 &quot; &quot;    
## 4 HML_3       0.0630    0.0200       3.15  **</code></pre>
<pre class="r"><code>tidy(regressionLists$VTV)%&gt;% 
  mutate(p.value = stars.pval(p.value))</code></pre>
<pre><code>## # A tibble: 4 x 5
##   term          estimate std.error statistic p.value
##   &lt;chr&gt;            &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;  
## 1 (Intercept)  0.0000514 0.0000446      1.15 &quot; &quot;    
## 2 Mkt_Rf_3     0.918     0.00539      170.   ***    
## 3 SMB_3       -0.131     0.00897      -14.7  ***    
## 4 HML_3        0.265     0.00794       33.4  ***</code></pre>
<pre class="r"><code>tidy(regressionLists$LQD) %&gt;% 
  mutate(p.value = stars.pval(p.value))</code></pre>
<pre><code>## # A tibble: 4 x 5
##   term         estimate std.error statistic p.value
##   &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;  
## 1 (Intercept)  0.000241 0.0000882      2.74 **     
## 2 Mkt_Rf_3    -0.0119   0.0106        -1.12 &quot; &quot;    
## 3 SMB_3       -0.0325   0.0177        -1.84 .      
## 4 HML_3       -0.157    0.0157       -10.0  ***</code></pre>
<p>Finally, we can apply this same method to all our ETFs using the <code>lapply</code> function to <code>tidy</code> the data and the <code>map</code> function to <code>mutate</code> or <em>convert</em> the p-value to <em>stars</em>. Then take a random sample of 5 ETFs regressions.</p>
<pre class="r"><code>library(purrr)
myTidyRegressions &lt;- lapply(regressionLists[4:length(regressionLists)], tidy)
myTidiedRegressions &lt;- map(myTidyRegressions, ~mutate(., p.value = stars.pval(p.value)))
library(rlist)
list.sample(myTidiedRegressions, 5)</code></pre>
<pre><code>## $DGRO
## # A tibble: 4 x 5
##   term         estimate std.error statistic p.value
##   &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;  
## 1 (Intercept)  0.000154 0.0000507      3.04 **     
## 2 Mkt_Rf_3     0.890    0.00612      146.   ***    
## 3 SMB_3       -0.145    0.0102       -14.2  ***    
## 4 HML_3        0.121    0.00902       13.4  ***    
## 
## $EFAV
## # A tibble: 4 x 5
##   term           estimate std.error statistic p.value
##   &lt;chr&gt;             &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;  
## 1 (Intercept) -0.00000220  0.000142   -0.0155 &quot; &quot;    
## 2 Mkt_Rf_3     0.572       0.0171     33.5    ***    
## 3 SMB_3       -0.112       0.0285     -3.94   ***    
## 4 HML_3       -0.0172      0.0252     -0.684  &quot; &quot;    
## 
## $XLE
## # A tibble: 4 x 5
##   term         estimate std.error statistic p.value
##   &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;  
## 1 (Intercept) -0.000264  0.000270    -0.978 &quot; &quot;    
## 2 Mkt_Rf_3     1.09      0.0326      33.5   ***    
## 3 SMB_3        0.0920    0.0543       1.69  .      
## 4 HML_3        0.716     0.0481      14.9   ***    
## 
## $IVW
## # A tibble: 4 x 5
##   term          estimate std.error statistic p.value
##   &lt;chr&gt;            &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;  
## 1 (Intercept)  0.0000434 0.0000407      1.07 &quot; &quot;    
## 2 Mkt_Rf_3     1.01      0.00491      206.   ***    
## 3 SMB_3       -0.180     0.00817      -22.0  ***    
## 4 HML_3       -0.312     0.00724      -43.1  ***    
## 
## $VEA
## # A tibble: 4 x 5
##   term         estimate std.error statistic p.value
##   &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;  
## 1 (Intercept) -0.000113  0.000154    -0.730 &quot; &quot;    
## 2 Mkt_Rf_3     0.852     0.0186      45.8   ***    
## 3 SMB_3       -0.0850    0.0310      -2.74  **     
## 4 HML_3        0.150     0.0274       5.45  ***</code></pre>
<p>A few notes here: We should be modelling the excess returns on the ETFs and not just the ETF returns. This is simple enough by replacing <em>for example</em> <code>myPortfolio</code> in the <code>lm</code> regressions with <span class="math inline">\((myPortfolio - RF_3)\)</span> where <span class="math inline">\(RF_3\)</span> is the risk free rate which comes with the Fama and French data. We should also probably use <span class="math inline">\(NeweyWest\)</span> adjusted standard errors by running <code>coeftest(myPortfolioReg, NeweyWest(myPortfolioReg, lag = N, prewhite = FALSE))</code>. Literature suggests that lags of <span class="math inline">\(4(N/100)^{2/9}\)</span> should be used, where <span class="math inline">\(N\)</span> is the number of observations.
We could rank the ETFs based on their alphas as before and go <em>long</em> on the high alphas and <em>short</em> on the low alphas. Run our hedge portfolio through a Fama French regression here and see if we are able to obtain better performances.</p>
<p>Finally, here I only used the 3 Factor model. There are more factors from the literature we could use. On the Kenneth French website we can collect data on <span class="math inline">\(Market\)</span>, <span class="math inline">\(SMB\)</span>, <span class="math inline">\(HML\)</span>, <span class="math inline">\(RMW\)</span>, <span class="math inline">\(CMA\)</span> and <span class="math inline">\(MOM\)</span>. Where the <span class="math inline">\(RMW\)</span> factor is a profitability factor, the <span class="math inline">\(CMA\)</span> is an investment factor and the <span class="math inline">\(MOM\)</span> is a momentum factor.</p>
<p>Below I pull in the daily Fama and French 5 Factor model and plot them.</p>
<pre class="r"><code>library(glue)
library(timetk)
library(plotly)
library(pipeR)

temp &lt;- tempfile()
base &lt;- &quot;http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/ftp/&quot;
factor &lt;- &quot;North_America_5_Factors&quot;
format&lt;-&quot;_CSV.zip&quot;
full_url &lt;-glue(base,factor,format,sep =&quot;&quot;)
download.file(full_url,temp,quiet = TRUE)

North_America_Factors &lt;- read_csv(unz(temp, &quot;North_America_5_Factors.csv&quot;), skip = 6) %&gt;%
  rename(date = X1) %&gt;%
  mutate_at(vars(-date), as.numeric) %&gt;%
  mutate(date = rollback(ymd(parse_date_time(date, &quot;%Y%m&quot;) + months(1)))) %&gt;%
  drop_na(date) %&gt;%
  rename(Mkt_Rf = `Mkt-RF`) %&gt;% 
  select(-RF) %&gt;% 
  mutate_at(vars(c(&quot;Mkt_Rf&quot;, &quot;SMB&quot;, &quot;HML&quot;, &quot;RMW&quot;, &quot;CMA&quot;)), funs(./100)) %&gt;% 
  tk_xts(date_var = date)

ax &lt;- list(
  zeroline = TRUE,
  showline = TRUE,
  mirror = &quot;ticks&quot;,
  gridcolor = toRGB(&#39;white&#39;),
  gridwidth = 2,
  zerolinecolor = toRGB(&#39;white&#39;),
  zerolinewidth = 4,
  linecolor = toRGB(&#39;white&#39;),
  linewidth = 6,
  color = &#39;white&#39;
)


North_America_Factors %&gt;&gt;% 
  (cumprod(1+.)) %&gt;&gt;%
  ROC(36, type = &quot;discrete&quot;) %&gt;&gt;%
  na.omit() %&gt;&gt;% 
  (
    plot_ly(
      x = colnames(.),
      y = as.Date(index(.)),
      z = data.matrix(.),
      type = &quot;surface&quot;,
      colors = c(&quot;darkblue&quot;, &quot;yellow&quot;, &quot;darkred&quot;)
    )
  ) %&gt;%
  plotly::layout(
    xaxis = ax, yaxis = ax,
    paper_bgcolor =&#39;rgb(0,0,0)&#39;,
    #plot_bgcolor =&#39;rgb(0,0,0)&#39;,
    title = &quot;Fama French Factors&quot;,
    scene = list(
      xaxis = c(ax, title = &quot;Factors&quot;, tickangle = -45),
      yaxis = c(ax, title = &quot;Date&quot;, tickangle = -45),
      zaxis = c(ax, title = &quot;Fama French Factor&quot;)
    ),
    titlefont = list(
      family = &quot;Agency FB&quot;,
      size = 50,
      color = &#39;white&#39;)
  )</code></pre>
<div id="htmlwidget-2" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"visdat":{"1b9c64f422fb":["function () ","plotlyVisDat"]},"cur_data":"1b9c64f422fb","attrs":{"1b9c64f422fb":{"x":["Mkt_Rf","SMB","HML","RMW","CMA"],"y":["1993-07-31","1993-08-31","1993-09-30","1993-10-31","1993-11-30","1993-12-31","1994-01-31","1994-02-28","1994-03-31","1994-04-30","1994-05-31","1994-06-30","1994-07-31","1994-08-31","1994-09-30","1994-10-31","1994-11-30","1994-12-31","1995-01-31","1995-02-28","1995-03-31","1995-04-30","1995-05-31","1995-06-30","1995-07-31","1995-08-31","1995-09-30","1995-10-31","1995-11-30","1995-12-31","1996-01-31","1996-02-29","1996-03-31","1996-04-30","1996-05-31","1996-06-30","1996-07-31","1996-08-31","1996-09-30","1996-10-31","1996-11-30","1996-12-31","1997-01-31","1997-02-28","1997-03-31","1997-04-30","1997-05-31","1997-06-30","1997-07-31","1997-08-31","1997-09-30","1997-10-31","1997-11-30","1997-12-31","1998-01-31","1998-02-28","1998-03-31","1998-04-30","1998-05-31","1998-06-30","1998-07-31","1998-08-31","1998-09-30","1998-10-31","1998-11-30","1998-12-31","1999-01-31","1999-02-28","1999-03-31","1999-04-30","1999-05-31","1999-06-30","1999-07-31","1999-08-31","1999-09-30","1999-10-31","1999-11-30","1999-12-31","2000-01-31","2000-02-29","2000-03-31","2000-04-30","2000-05-31","2000-06-30","2000-07-31","2000-08-31","2000-09-30","2000-10-31","2000-11-30","2000-12-31","2001-01-31","2001-02-28","2001-03-31","2001-04-30","2001-05-31","2001-06-30","2001-07-31","2001-08-31","2001-09-30","2001-10-31","2001-11-30","2001-12-31","2002-01-31","2002-02-28","2002-03-31","2002-04-30","2002-05-31","2002-06-30","2002-07-31","2002-08-31","2002-09-30","2002-10-31","2002-11-30","2002-12-31","2003-01-31","2003-02-28","2003-03-31","2003-04-30","2003-05-31","2003-06-30","2003-07-31","2003-08-31","2003-09-30","2003-10-31","2003-11-30","2003-12-31","2004-01-31","2004-02-29","2004-03-31","2004-04-30","2004-05-31","2004-06-30","2004-07-31","2004-08-31","2004-09-30","2004-10-31","2004-11-30","2004-12-31","2005-01-31","2005-02-28","2005-03-31","2005-04-30","2005-05-31","2005-06-30","2005-07-31","2005-08-31","2005-09-30","2005-10-31","2005-11-30","2005-12-31","2006-01-31","2006-02-28","2006-03-31","2006-04-30","2006-05-31","2006-06-30","2006-07-31","2006-08-31","2006-09-30","2006-10-31","2006-11-30","2006-12-31","2007-01-31","2007-02-28","2007-03-31","2007-04-30","2007-05-31","2007-06-30","2007-07-31","2007-08-31","2007-09-30","2007-10-31","2007-11-30","2007-12-31","2008-01-31","2008-02-29","2008-03-31","2008-04-30","2008-05-31","2008-06-30","2008-07-31","2008-08-31","2008-09-30","2008-10-31","2008-11-30","2008-12-31","2009-01-31","2009-02-28","2009-03-31","2009-04-30","2009-05-31","2009-06-30","2009-07-31","2009-08-31","2009-09-30","2009-10-31","2009-11-30","2009-12-31","2010-01-31","2010-02-28","2010-03-31","2010-04-30","2010-05-31","2010-06-30","2010-07-31","2010-08-31","2010-09-30","2010-10-31","2010-11-30","2010-12-31","2011-01-31","2011-02-28","2011-03-31","2011-04-30","2011-05-31","2011-06-30","2011-07-31","2011-08-31","2011-09-30","2011-10-31","2011-11-30","2011-12-31","2012-01-31","2012-02-29","2012-03-31","2012-04-30","2012-05-31","2012-06-30","2012-07-31","2012-08-31","2012-09-30","2012-10-31","2012-11-30","2012-12-31","2013-01-31","2013-02-28","2013-03-31","2013-04-30","2013-05-31","2013-06-30","2013-07-31","2013-08-31","2013-09-30","2013-10-31","2013-11-30","2013-12-31","2014-01-31","2014-02-28","2014-03-31","2014-04-30","2014-05-31","2014-06-30","2014-07-31","2014-08-31","2014-09-30","2014-10-31","2014-11-30","2014-12-31","2015-01-31","2015-02-28","2015-03-31","2015-04-30","2015-05-31","2015-06-30","2015-07-31","2015-08-31","2015-09-30","2015-10-31","2015-11-30","2015-12-31","2016-01-31","2016-02-29","2016-03-31","2016-04-30","2016-05-31","2016-06-30","2016-07-31","2016-08-31","2016-09-30","2016-10-31","2016-11-30","2016-12-31","2017-01-31","2017-02-28","2017-03-31","2017-04-30","2017-05-31","2017-06-30","2017-07-31","2017-08-31","2017-09-30","2017-10-31","2017-11-30","2017-12-31","2018-01-31","2018-02-28","2018-03-31","2018-04-30","2018-05-31","2018-06-30","2018-07-31","2018-08-31","2018-09-30","2018-10-31","2018-11-30","2018-12-31","2019-01-31","2019-02-28","2019-03-31","2019-04-30","2019-05-31","2019-06-30","2019-07-31","2019-08-31","2019-09-30"],"z":[[0.235656331824658,0.12719361125789,0.161546203443221,0.0304390482130936,0.0440128290737087],[0.416750972441865,0.168795189900192,0.152453640019518,0.0469779927089966,0.0104393828074874],[0.502715210710106,0.236251162933698,0.153373120334683,0.033770819843445,-0.030401149082101],[0.560093004360497,0.315955130282715,0.135474135913219,0.00331619536480243,-0.0335757459746789],[0.445501580890665,0.297007271192553,0.147597868297894,0.0124536827325159,0.00387471213061752],[0.433515663967857,0.292403873601807,0.172888642184766,-0.000455927336921125,0.0277961309077646],[0.414680750189819,0.257035205070242,0.194923524240401,-0.030846803386302,0.0913122279704728],[0.285437333389163,0.231085846540227,0.195646624708927,-0.00117080011257586,0.0815771584817113],[0.196963905678594,0.176869191257498,0.250480392793265,-0.00696748748434617,0.116952257012042],[0.206316122912184,0.164401858229985,0.255915652823187,-0.00209236544113756,0.132129148505063],[0.173240840144559,0.137403933873663,0.27084611862598,-0.0132756409134801,0.158457733354018],[0.192197832000845,0.121393688174807,0.291192799721722,-0.0234861521684404,0.169586821215297],[0.178556337576989,0.111213596190166,0.331600536630724,-0.0457818627558735,0.190034974625445],[0.200011899756623,0.104833001340247,0.320491446794146,-0.0486116911581397,0.184263942216673],[0.195251400917186,0.116459391106515,0.315437188637601,-0.047945586120943,0.189233378281525],[0.191952530614014,0.0854067246806089,0.298557393134282,-0.0224544740251954,0.189353188212845],[0.192698666783412,0.09064707096754,0.312498960238484,-0.0332841450482498,0.191021452378257],[0.0935238866937333,0.122519553524729,0.38232894820008,-0.0598284071391612,0.2507033517076],[0.116314809422852,0.012975203797587,0.351441890896562,-0.0305858683034936,0.227075146257368],[0.145383204955348,-0.00769368404727278,0.297172810768038,-0.0155752051975765,0.200554919569283],[0.204147981767266,-0.00298463751559075,0.2243748354899,-0.0139877433232731,0.174302345823063],[0.216173982573999,0.0518785863811539,0.200701694819175,-0.0225403920102994,0.151263457623384],[0.247936102134843,0.0360576911683621,0.204270255433855,-0.00513371332929846,0.146701740109274],[0.307373778299483,0.0932451049461138,0.137411887339277,0.00893226123481994,0.102296433544678],[0.306491014100766,0.126781584452029,0.11828128151939,-0.000410624446992025,0.0781126107690535],[0.344075368621888,0.146884533437943,0.146221482111235,-0.0507962731179592,0.0981855782968859],[0.377173441446655,0.125421832633012,0.147147160675428,-0.0573470234760132,0.118573646746753],[0.34252585288411,0.0567636068466464,0.177923990907149,-0.0606662240975765,0.144058109683463],[0.347973257562028,0.015993090589461,0.211250029744542,-0.0781897093423642,0.191187177023668],[0.340937352238925,0.00479867581857851,0.180283602301764,-0.0753131118981941,0.211623636183806],[0.363698945174488,-0.0434551990962814,0.122246069261056,-0.0522054100652527,0.205826393905415],[0.374287091473872,0.00300864221549735,0.0265709543179899,-0.027429641696892,0.129189274109536],[0.354009843983882,0.00958052451334535,0.013306725072691,-0.00471526492904928,0.0984404624529147],[0.417672353843713,0.0626683513919197,-0.0455355182360554,0.0309918575250425,0.0484722747166004],[0.408570566357946,0.0766604472046852,-0.0318064493521603,0.0307864192750624,0.0566584808769306],[0.39002935028702,0.0272743146978776,-0.0316164025270259,0.0683509152732753,0.0596804824494583],[0.314402377002984,-0.020985530963431,-0.00233727298283182,0.101119753015762,0.0765288717081505],[0.305265770404778,-0.00288086887943817,-0.00811620418896331,0.0909914769432321,0.0550887950998713],[0.37377781355228,-0.0462127535603084,-0.0375712486485237,0.098722826864678,0.0269038317890493],[0.368644215665075,-0.0881580452462788,0.0438375711391912,0.0917702600346066,0.0546054979661184],[0.482721143361634,-0.112487398406493,0.0749247953123675,0.0959931143578587,0.0602411191994521],[0.433715211414997,-0.0938713232568118,0.0698212948004988,0.0963223073237252,0.079280360806264],[0.4625567127525,-0.107299484281944,0.0335134803815706,0.129249927020376,0.0530448895850839],[0.496503289427253,-0.147471007489256,0.0944554606278381,0.109186262341304,0.120244659541414],[0.491953216519579,-0.145924079881878,0.11716021947087,0.124145094784313,0.130712176277564],[0.540740872640734,-0.191043444146704,0.0971618758155439,0.157880655455308,0.101399480135523],[0.630976837983005,-0.134348616976711,0.0438689897555926,0.172761331759985,0.056715509998446],[0.749363695711662,-0.121554453161668,0.0329368196563609,0.175797758231381,0.0425140164856161],[0.825763296856934,-0.130853958136341,0.0246124855212335,0.178273866627175,0.0176228226854103],[0.68360543177435,-0.0703607705168348,0.0539411900929401,0.160399991791368,0.0214453652680864],[0.813073864181017,-0.0718988597529627,0.0667291519545328,0.140103140360734,0.00345752031211677],[0.724902238088593,-0.0619771920960762,0.111577925074181,0.136499495507757,0.0288295196672432],[0.843960238465473,-0.115498012967471,0.134742826699399,0.159934797883648,0.0619744026420159],[0.8532814766617,-0.12872072753232,0.176825100517058,0.152208818019029,0.081229168659235],[0.827691240274222,-0.124987435403811,0.136248922290186,0.154601893400139,0.0696865645440461],[0.887303286902871,-0.12155359660131,0.121118508339388,0.143785411640161,0.0501572859297159],[0.935108817593125,-0.123583972169411,0.153935067989936,0.14113829305818,0.0534209326328559],[0.9102900144695,-0.121916947989936,0.141876992555499,0.125988916141387,0.032236205675334],[0.803028733299559,-0.131034780760477,0.160938352861888,0.138259741162324,0.0555397977875467],[0.809889037748211,-0.188802751954098,0.166913946607316,0.132932295650013,0.0542347825831937],[0.698780019600734,-0.246620609461188,0.174325200929141,0.144310058587335,0.0940803868824052],[0.414607543439043,-0.290243167968015,0.170876375082066,0.214962314879126,0.150848708843285],[0.452992087693615,-0.283403352686716,0.139697096988293,0.189029931507835,0.113228097261483],[0.580398323385506,-0.277350132493539,0.129961969539393,0.178876260125701,0.111671290412851],[0.609138367946255,-0.270808999226358,0.0838364584266291,0.19888971295085,0.0904494744831099],[0.687834967665635,-0.284445516499356,0.0367699777229393,0.212244129221552,0.0115937835210702],[0.702826962009956,-0.279676620628594,-0.00917271509803308,0.188382009571607,-0.0674121673897199],[0.612000553526612,-0.323578948490959,0.0294217605655285,0.165825308091227,-0.0076345512976107],[0.652128703773085,-0.356135756177754,-0.00273490886903516,0.137020932052855,-0.0273199800957551],[0.690196185426843,-0.361046533135117,0.0626527816422324,0.108618040537601,-0.00169952656337924],[0.619702395041897,-0.358815680181268,0.0931126962785895,0.112263720192583,0.0305425955790051],[0.713977716337787,-0.323253636220458,0.0355127043345604,0.091246951738569,-0.0171892917764586],[0.758191791185991,-0.283221939732876,-0.00713124401207743,0.0886661548483718,-0.0330456716695445],[0.685888162207606,-0.311140179292285,-0.024385517722365,0.10349662214449,-0.0114217568421809],[0.564353743343398,-0.277037513216707,-0.0399159937163092,0.0837014894776758,-0.00339362349416816],[0.631059973441547,-0.308438389272701,-0.116069707523365,0.0530774871879585,-0.0400044422104336],[0.577673134581722,-0.247744739467366,-0.208478638930302,0.0229063281991708,-0.0820782621637022],[0.719069882452169,-0.24570353903177,-0.282108532983297,-0.0352470893183078,-0.161594691409598],[0.567584730383172,-0.212201399236759,-0.270810616708794,-0.103333832248695,-0.115233611959491],[0.59921019769292,-0.0563562186936151,-0.403169664294586,-0.23732464638257,-0.195728091791677],[0.796651860548267,-0.181979153154105,-0.369999648526716,-0.159693838293407,-0.218299745422938],[0.645172839389433,-0.155284647540919,-0.323877439520509,-0.13472297471351,-0.148134988712772],[0.487968120396763,-0.209881413796043,-0.261646380980994,-0.108960905222514,-0.0905179370402545],[0.484816859456377,-0.159936337208494,-0.345560160234489,-0.161442647694013,-0.142697627835499],[0.352664007566271,-0.148787344152928,-0.282741812525804,-0.113863140162991,-0.0808413007066509],[0.510448957474189,-0.210437264675086,-0.298194412615014,-0.14678214764108,-0.0753562836885152],[0.3556082440527,-0.22398406145976,-0.231168824049575,-0.0999115840323502,0.0200672474965569],[0.36772069173982,-0.245012397056348,-0.198575357375914,-0.0207123655048754,0.0845104819375362],[0.196438787107622,-0.204457861271901,-0.0788898022838032,0.0839225444460361,0.204451013089104],[0.197618707016012,-0.150330528956728,-0.0110550704137208,0.0921669513093166,0.275044570509885],[0.236664981492182,-0.107691691218474,-0.0763389566949494,0.0129384959981884,0.148131602469016],[0.0427462973557569,-0.0844381921422784,0.0910158843671702,0.119735230787535,0.334276847377688],[-0.0781979507923356,-0.0646108564563991,0.192177523097374,0.174620891116606,0.445088766243454],[-0.0157571296469586,-0.0656389620298383,0.0886131875583314,0.150675913211874,0.359168498552319],[0.0215217275257378,-0.00508475424039256,0.0784599896563007,0.132467215148983,0.344759884825204],[-0.026630477533061,0.0831429934083177,0.106073160223084,0.142551215363916,0.359603015388057],[-0.0207245949923834,0.104381091318285,0.161354300458175,0.205426400379512,0.421195769440871],[0.0965356769743508,0.179299386318344,0.185071698052216,0.199527086837687,0.436464595439161],[-0.0623735408605962,0.120292946613076,0.248193651710127,0.263287706994205,0.557383581353241],[-0.103014239323061,0.221316260930201,0.175574235930518,0.235147945181147,0.45674641084667],[-0.0867393134064126,0.216690524070304,0.216529883661904,0.200948027066875,0.413118934389933],[-0.123631769646343,0.29846100734031,0.298603463454983,0.198206680835976,0.491379439638278],[-0.165771379793959,0.332450055912979,0.403263780271012,0.28113220690749,0.648040945270779],[-0.148971909458007,0.384255179324311,0.446371206242631,0.397503890060391,0.696651997860647],[-0.141395503000695,0.489390299668806,0.496118439869156,0.412290786445199,0.744410642550786],[-0.220063885129441,0.513715052377395,0.556044236512522,0.493161984893271,0.860425969886399],[-0.212254962034088,0.426669487850039,0.576574950149059,0.501170601022019,0.895059630729313],[-0.302824578698618,0.439047178368702,0.67129356120007,0.54558128692538,1.0130856172173],[-0.33882691081384,0.332874091428508,0.59654079824355,0.57764095407812,0.960505022737744],[-0.325687914009573,0.347089609925205,0.653665034533189,0.590205541069284,0.934265742569261],[-0.377174285388762,0.348789325049832,0.738747153300134,0.643645690950813,0.938604872408816],[-0.365853397648029,0.389617855498958,0.679903873658941,0.631359582468384,0.948748508287792],[-0.347046054812814,0.359258247310594,0.807110997316257,0.537612820457131,1.12637200878098],[-0.423796033058605,0.32483999460011,1.06512826988946,0.713190809930958,1.2562302907156],[-0.412900408527014,0.29957056691019,1.05542604790978,0.797365451448357,1.17373281079596],[-0.432135371529818,0.103543467341974,1.39222047766962,1.14307799338573,1.24693318363389],[-0.464028919885347,0.283133477929722,1.14053417319356,0.95571560910595,1.24468039319512],[-0.390849769888612,0.338524347884759,0.99231876105194,0.769299400454565,1.09564645493395],[-0.328513712126047,0.426226904053024,0.904288713171937,0.645360895833609,1.06525998920943],[-0.342440931100859,0.346748412894352,1.12636010088142,0.750073573425975,1.16133379250493],[-0.312842364316652,0.421134760403188,0.926119912009178,0.590147342521044,1.08417277318488],[-0.342478924033391,0.464065467235922,0.990127566577475,0.624730220735638,1.13844592301948],[-0.312673710425014,0.459563778138093,0.816812608882647,0.585091190277961,0.961567214065054],[-0.249468852368124,0.552656684260796,0.753794894045749,0.420663242579728,0.847001972471013],[-0.150809445181372,0.600678606693605,0.524401304265839,0.241381650405121,0.628579239646941],[-0.12554288877199,0.490465946572226,0.396098556989886,0.228681778534667,0.520950608872603],[-0.135367297963511,0.466677314227051,0.544950664442598,0.266077009849014,0.736428548196585],[-0.0272762320323171,0.430859269042255,0.329042228305028,0.172054545338931,0.516285454030384],[0.0371661928200955,0.444825064924655,0.205938280716681,0.142981372307737,0.390919414830308],[-0.0577259398129899,0.416497995531313,0.278826106105841,0.236931563143562,0.467093416369843],[-0.0538013552703623,0.365727948546277,0.261017602912055,0.222636805856705,0.446759181462919],[-0.0151967594021603,0.328950324263422,0.275750882275018,0.219120694455492,0.47746277392739],[-0.0317057782571175,0.339392861964417,0.286139934539788,0.178054857868906,0.389018680010861],[0.0338116749536603,0.296258538199118,0.255573537558038,0.142951776761723,0.277578785912568],[0.164421226738052,0.423210987313067,0.235684976012698,0.0953930050837164,0.187435085801423],[0.155893583733916,0.35759909774428,0.330502387538424,0.112030201394222,0.284070536586888],[0.122527804585852,0.41695585669518,0.356251450980353,0.146327421546198,0.32571606750322],[0.1407452814971,0.341720453589879,0.332619190021156,0.135836809511755,0.319284375690581],[0.128571457474619,0.322943025901922,0.314160787834695,0.117321261901983,0.265537164776865],[0.17970750694391,0.336385404736539,0.272866457232386,0.0630823656931492,0.181011054608512],[0.112496087499762,0.270235356774811,0.279542550476653,0.0840593256927322,0.19446381842],[0.13996222850788,0.153405883087138,0.187772568484328,0.0550687451543186,0.110135567569],[0.193351112970671,0.209112832526642,0.144717255749182,0.0351598209965953,0.0580863447091007],[0.29944965818947,0.220576418173703,0.146395070761516,0.0105060290974381,0.0234741239590555],[0.475139108920238,0.324776689988596,0.169619198293223,-0.0197094114861801,0.0224421879599033],[0.456074780044641,0.327040127549381,0.174121285613933,-0.0343290538432751,0.035277056486632],[0.634925086805798,0.289734811827267,0.178200118864204,-0.0479061497470602,0.0372783042303748],[0.481845629584651,0.317684889016272,0.252686926891501,-0.034547564826561,0.0337480277194804],[0.453717291540783,0.305421951667473,0.257769336575613,0.0379629450343124,-0.0160364346363264],[0.540306673167684,0.297137667591447,0.209166302474551,-0.0106776654006702,0.000973307697599068],[0.634433893223865,0.360707708046822,0.218031336127323,0.00145695218539332,-0.0141823793997248],[0.653552995829983,0.367849088831888,0.22557709380517,-0.0236489345469594,0.0176342758988879],[0.662900662274723,0.406083864201053,0.251198479102953,-0.0337740567072131,0.0160001783061157],[0.555711005231767,0.394251656651594,0.287954159309205,0.0180310749157169,0.00316627909735545],[0.413923574450204,0.307846575090108,0.309464875957375,0.0709240822509309,0.00504839219134667],[0.385230021466583,0.281645760450485,0.316662614132236,0.0790001122421069,0.0129501938838097],[0.346039470687939,0.20074903969079,0.362821628792156,0.139837950774987,0.00753549278801402],[0.341180596501066,0.175599400768869,0.333645198893981,0.145320184062586,0.00802914075116345],[0.373717071095249,0.144604092719545,0.342437585581326,0.130942832735518,0.0209422442355658],[0.337832534251286,0.137585399139505,0.289520191166643,0.15657033519462,-0.00430826568173326],[0.34126016983372,0.110126824568269,0.281973153047524,0.154827987597159,-0.0266800387877657],[0.291598125657902,0.132070134394331,0.288903418765788,0.145325138125712,-0.0173360130318683],[0.280717780980992,0.111371712591781,0.262819983341604,0.187078703524697,-0.0303495149193215],[0.239587449328957,0.130734752342554,0.256060911173852,0.163505178346562,-0.0242628155090754],[0.265678745570651,0.103244715891344,0.256936563636577,0.154672495833234,-0.0279926226724045],[0.343966818474265,0.110336279721683,0.276980305134897,0.12591947435253,-0.0122212830139099],[0.376218836733128,0.112450146386484,0.273805316807858,0.163121978334288,-0.0303384365152497],[0.325237778296718,0.0984762878253973,0.249287299161275,0.165204145973275,-0.0324697737514034],[0.330473149496976,0.0975747890253764,0.165552973984296,0.136287820604877,-0.0478227692065888],[0.33885177888705,0.0953545507548688,0.136833454617444,0.113586910959555,-0.0425600069019322],[0.361804273137171,0.0382707619138725,0.109557634452675,0.114818012067149,-0.0612417628648212],[0.370645418329681,0.0394064996208188,0.0638667053777624,0.111371038361376,-0.0764668766791181],[0.23846714946849,-0.0396051332587163,0.042616722733017,0.128550903819241,-0.0584276674640306],[0.19207857157028,-0.0308383629835175,0.0372892552588777,0.153249638588099,-0.0737911002106129],[0.146398963269919,-0.0341554050268595,0.069077316121344,0.114692498815554,-0.0475671132888651],[0.0967067185802344,-0.0338668347863537,0.0455349135642085,0.115895561755798,-0.0668398282013811],[0.100945414197205,-0.0221205349053366,0.0348304805054689,0.113582025691342,-0.0616771163242104],[0.187098473792538,-0.000742782701518285,0.0384600091974914,0.131587567818878,-0.0773693990856632],[0.17482486893257,0.00502423048645118,0.0161556851116724,0.161441151825378,-0.0819079895328878],[0.072149924977108,-0.0175518366584808,-0.0370861533998864,0.208476994599815,-0.0916739456903903],[0.0147446084134004,-0.0177433470217051,-0.00957711634779113,0.169178889837766,-0.0491362701555037],[0.0321186222547014,0.00719002643103983,-0.015127613286949,0.196491771463212,-0.0282214510627434],[-0.0792544633215342,-0.0026548391774025,0.0124410202877092,0.166632796774291,0.0378926459912741],[-0.229343164366065,-0.0206570922332457,0.00979704012223293,0.213872582420457,0.0768813813870892],[-0.315474526146099,-0.0758558915437424,-0.01152305093601,0.251276866552052,0.116032794970138],[-0.306247273128598,-0.0371231776876773,-0.0293680866212863,0.25002646496661,0.100860817749433],[-0.379919535843031,-0.103415434794105,-0.102431605524669,0.281571294645318,0.0814869144128898],[-0.438149492963744,-0.10980675046977,-0.157159211702211,0.317391205817944,0.0363322123115577],[-0.397035777360105,-0.13280290511433,-0.151434191863609,0.290701543664147,0.0202892729573176],[-0.341483913431637,-0.0803347102759999,-0.137466370535563,0.292101712991593,0.0181309094303606],[-0.272858672908575,-0.0748795469702124,-0.15635827754642,0.260065074268208,-0.0303371793982284],[-0.270518952197975,-0.0539176031704436,-0.187383765798862,0.234253223229426,-0.0267490681508772],[-0.20518461293785,-0.00776487250452607,-0.170488962686628,0.206246293341623,-0.015416428916567],[-0.19825828674099,-0.010331848953768,-0.118472039084559,0.20415787425752,-0.00982329991335051],[-0.172860172662618,0.0441777702383348,-0.113485724330944,0.225251730913683,-0.0329143771090472],[-0.221157385394722,-0.0134969200382707,-0.127072150011696,0.262992990510587,-0.036709922977292],[-0.190306827729504,-0.0323655449404027,-0.131601410458652,0.276585854117973,-0.033198537520344],[-0.171160580834285,0.0252629809057698,-0.147052436296615,0.303582357559303,-0.0556602517255865],[-0.210952733132471,0.0321411845425663,-0.132958390911491,0.283449309988389,-0.0440191215152251],[-0.167103388836322,0.0290938235016966,-0.115678039958058,0.285122814605224,-0.0355548577757483],[-0.122775789213438,0.0474245250511114,-0.106877065037258,0.260993248545182,-0.020069976667634],[-0.139161452307275,0.105508589852709,-0.0783875739473077,0.257263234992001,-0.00901997241291308],[-0.235050016545398,0.109378256883897,-0.102461597439412,0.241177788623636,0.00848921978856465],[-0.264321459022391,0.0829172370417046,-0.130374174572184,0.230950670937171,0.00495491292037586],[-0.18524572892663,0.113270050769876,-0.0944310745931531,0.220346382555001,0.047310906290732],[-0.226602581267794,0.107403014929191,-0.106418698807815,0.246337532690554,0.0136077170217317],[-0.184591973142496,0.164461280027677,-0.10165927776285,0.24883996725072,0.0497479590050935],[-0.17208033707754,0.166312018130433,-0.0780606264542125,0.259835256607204,0.0566069876877766],[-0.117171766244837,0.255609483570858,-0.0679212468036735,0.235212666147095,0.0498245015926055],[-0.051658720844001,0.264096704732172,-0.0311261943109282,0.170048190096305,0.0887934094599552],[0.0331358150660057,0.249668126183209,-0.063812873736634,0.175444442025764,0.0762492166932811],[0.0990739094304516,0.266589160149848,-0.0551549308721156,0.130398987077997,0.0922358262809522],[0.11833832547214,0.294355228825805,-0.076017831742057,0.143259679946415,0.0815044858773271],[0.0977272390687673,0.319408966955074,-0.0976087871417335,0.128751308373491,0.101117835672438],[0.0559274320743501,0.27128813806885,-0.0829161025135795,0.137610339538985,0.102228729372673],[0.125061443099413,0.253659340591667,-0.0565707146018506,0.109099884855266,0.118775017226122],[0.116605771071244,0.213206889652318,-0.0864913518418985,0.166161524461698,0.0572920091448565],[0.0400941170875524,0.151952999724667,-0.112413537131732,0.159877711015495,0.0277101744143315],[0.0561524401215596,0.11401095390376,-0.147428494292897,0.209707923463144,-0.0207538155561487],[0.444103030027715,0.194996276131678,-0.142277004832431,0.169963925977702,-0.0527949782223657],[0.557884638657838,0.243582523133574,-0.116430243780942,0.159597157013343,-0.0662710972225153],[0.539926756616166,0.183910571779305,-0.0739794063313113,0.160525113125787,-0.0255836805023775],[0.752519888313339,0.230444533924196,-0.0368387420892894,0.115750018411518,-0.0122410087744682],[1.02866039446125,0.227831596800887,0.0214235505846665,0.106483358183461,0.0123089999058841],[0.90897651528057,0.209715847989548,0.0216262340950513,0.118881562258044,0.0475548002906001],[0.716834780578181,0.128286095465304,-0.0235030964835055,0.114913506279195,0.062253984344748],[0.501224789390293,0.142739536704489,-0.0192077986973689,0.157546220441809,0.127332568504128],[0.560960806368137,0.129686086556018,0.0137855206323865,0.151494299723633,0.132050381166262],[0.45790708322927,0.0818967808967739,-0.0236328395668965,0.172999089290449,0.114677055100159],[0.454227643881186,0.0872933131239129,-0.0691120422775174,0.183410323810778,0.0742933518962967],[0.430022974851596,0.0628621219718795,-0.0746235162723219,0.143943909666966,0.0955966194976399],[0.446640888895018,0.0972368480064212,-0.0193814017921629,0.0917860660895147,0.132455952119656],[0.376613458138258,0.119640867363367,-0.0233156790166676,0.0945022220903349,0.15210712481584],[0.353498430645496,0.0816473668405155,0.00302864774619538,0.0676060121142743,0.164826091468765],[0.479339936701153,0.0803563614295262,0.0105844191039821,0.0716037271682393,0.168944105736945],[0.440113393205558,0.0573224088020681,-0.0129152478961886,0.0760047842466622,0.179203114543652],[0.405421661892805,0.0479664932783059,-0.0313963380518569,0.0970302903071669,0.194672684322997],[0.396458513538897,-0.019978697670004,-0.0490764441482607,0.0894361328386639,0.190192956475722],[0.553927625278306,-0.00825829142328305,-0.0140301214510221,0.0722762376150063,0.176773299313304],[0.619373466004313,0.0192059464847671,0.0288826633326094,0.0712028880278039,0.183158524209096],[0.600295293333294,0.0357974344780776,0.0197171244134828,0.0571869493210877,0.15627909044328],[0.632281103403058,0.0581702369344557,0.023058747350629,0.0580268197872813,0.166905777664413],[0.548035298760441,0.0433413315168953,0.0295212682202917,0.0617369629285052,0.152658129058022],[0.551015441793958,0.0188176881994795,0.0521090380461506,0.0702662393340601,0.158644169476579],[0.581478794385487,-0.00985097952281477,0.043288962278099,0.0757338921644755,0.157838035972322],[0.519451310078876,-0.0283282864807718,0.0105408878954112,0.108311603895654,0.124640807322442],[0.438993994189232,-0.00112505264974405,-0.0165689968572815,0.0723633732303763,0.0976467618681403],[0.44881695098064,-0.0175113116092227,-0.0247969056485153,0.0923636277453741,0.0936853299456086],[0.451557917033476,-0.0460938505897358,0.0383849872625808,0.0868072442334149,0.109095462596162],[0.415689086317793,-0.076505209940313,0.0796868032181168,0.105826908286145,0.126841882899351],[0.465407765151122,-0.0854539835191694,0.0903063144645331,0.077301245802369,0.123775491966245],[0.535445087260149,-0.0543138570038015,0.0956536279875801,0.0265306710245361,0.0980590347202901],[0.538901881357541,-0.0864178390920175,0.115157176446316,0.0143508111310304,0.120015734455566],[0.702329433124968,-0.0545968611049092,0.12287374182724,0.00435917587560253,0.121142964462063],[0.816476003077452,-0.0534152302678359,0.0950915306450977,-0.0106049836247348,0.108613727581226],[0.661303752187096,-0.0639542222824739,0.0590269547109399,0.00309910263989055,0.104841423063836],[0.706032444731414,-0.0788465023025495,0.0294268224364107,-0.00153255644489902,0.0938104835888018],[0.697020213138594,-0.0554006436589423,0.00598087329194885,-0.0187974107912291,0.0713989461992857],[0.556125782979657,-0.0880780766839334,0.00243538249771991,0.0178867863873573,0.0761868350508768],[0.583423618321421,-0.0709818509225358,-0.0135587999114977,0.00479532123840753,0.0526653862608426],[0.527756381739808,-0.0364832512350493,-0.0305849648569793,0.0121842663830034,0.0324118341818227],[0.554664329284541,-0.050974418648593,0.0038183356383219,-0.00522750448705533,0.0244978758710217],[0.682969959890018,-0.0432579890070085,-0.0190615686974176,-0.0391368813543788,-0.0075707558359116],[0.594554823188643,-0.0226726444134747,-0.0330651821222224,-0.032241663907053,-0.0249023242991862],[0.59518626753007,-0.0497540056981319,-0.0870184553199301,-0.03157034210023,-0.0474068265558438],[0.460287779160701,-0.0539043753377273,-0.0608554020992473,-0.0187415135852265,-0.0280584809755815],[0.372926204823753,-0.0901809042928746,-0.0606689529037142,0.0132147977981161,-0.0384721401079861],[0.500770100688199,-0.105894217322458,-0.0843587203490838,0.0246762721293343,-0.0591481374861739],[0.497787944502033,-0.0860351394080596,-0.0897990864618133,-0.00410905495152758,-0.0742629730402438],[0.442341697790457,-0.131051854480387,-0.135847242777663,0.00570417358054276,-0.0773873584796554],[0.290891026779706,-0.161683963971917,-0.112043723641189,0.0417018527115263,-0.0727828722561955],[0.281940712608293,-0.141222795972038,-0.105382053067326,0.0566664443705907,-0.0598577496648088],[0.322607812641861,-0.135344844669793,-0.0838206645089966,0.0506853135533987,-0.073691508498464],[0.320648780629456,-0.0891635915091824,-0.0498440018273528,0.00851979061354413,-0.0587362505631677],[0.30596488703814,-0.108987783578955,-0.085868873795984,0.0214927485197449,-0.0725099152789151],[0.324663206399673,-0.112695185311636,-0.0915105351362836,0.0271222175747132,-0.0522100623352892],[0.302478951736721,-0.109992114433556,-0.119455681963211,0.0545648109802113,-0.0659805574216004],[0.34203304732655,-0.101293523350928,-0.086110582239658,0.0383455665168322,-0.0466751315134004],[0.297048699371471,-0.107371816517835,-0.0850002579495777,0.0193741968410555,-0.0353743200024649],[0.22053914980724,-0.122511863911856,-0.0638100243845494,0.00372854801114531,-0.0376744706552161],[0.241318831801234,-0.083531726582407,0.00421827295787769,-0.0261812422873728,-0.0129798230949463],[0.230676191777997,-0.0768004473833441,0.0361588021437755,-0.0192211927808703,-0.00386276925204809],[0.301652236385612,-0.0906562402911183,0.0295430116770625,0.0111278162099226,-0.00940750639314081],[0.283504678468089,-0.10891031955822,0.00100204429830897,0.0164894744649628,-0.0182778889196537],[0.27814717533793,-0.0968637076555565,-0.0731002180315402,0.0148904348826759,-0.0507458021823892],[0.285669438015729,-0.0692670995690533,-0.117398899714761,0.00404232023520801,-0.0752857532155109],[0.272432009991445,-0.0769512668236559,-0.151784804615923,0.0267155380982336,-0.0825750620835444],[0.249661392423032,-0.0808066427854418,-0.141731257977406,0.0226237839611161,-0.0692518527171977],[0.301082011286262,-0.0530103890219149,-0.134955000669812,0.00750311870258624,-0.0703689739181772],[0.251194280890028,-0.0709279379251053,-0.146757029463099,0.0145191571336625,-0.0882213292350511],[0.314427369611584,-0.00221159171317864,-0.10293806014629,-0.00814605930684842,-0.0641157781008013],[0.313783231921879,-0.0390400849503172,-0.08631720441357,0.00471203924621411,-0.093250555042833],[0.322265886324818,-0.0175062446355847,-0.0684258583184014,0.0207763257008022,-0.0940654072649614],[0.340549723229911,-0.0392901736763341,-0.0774801344152769,0.0461088545322705,-0.0921793532898015],[0.461370013213338,-0.0550442977642412,-0.0677875819941745,0.0259263607174771,-0.0918121861930534],[0.322323031268404,-0.0618121094185707,-0.0789348322297531,0.0451993940568822,-0.0988545567521113],[0.30934071001,-0.0576932357526032,-0.0713111980562231,0.039868877147192,-0.0921458281001653],[0.299498963994694,-0.0306543042103539,-0.087674966277132,0.0254335180237324,-0.0794861441220276],[0.318927116822733,-0.0064279007807807,-0.102542760674734,0.0261614395962064,-0.0907910253800416],[0.347106452923331,-0.0296806851603626,-0.0989980136285842,0.0408870879516761,-0.0738960090873662],[0.374568494417859,-0.00172112135070224,-0.0461316510213025,0.0415055591863474,-0.046050378761296],[0.506370427230116,0.00345440224747962,-0.130464759066043,0.0471184633975312,-0.088849148536589],[0.559518106038752,0.0113116590546927,-0.144617575611614,0.0367979581403115,-0.0785242341547834],[0.337040585843138,-0.00584147626798848,-0.124013102066176,0.0376263196368782,-0.053211494607542],[0.352613880869882,-0.042330606775917,-0.111500271288274,0.0527811111503163,-0.0360353274063081],[0.254443647383888,-0.0340288287541604,-0.0984394341165215,0.0575467433806518,-0.0444844201541413],[0.445131856432483,0.0266933474729989,-0.146257964848876,0.0221339058723342,-0.0799324664950635],[0.490679598965165,0.0300290647582806,-0.177620609110782,0.00403948188954328,-0.112317838920501],[0.406532825341337,-0.0192905535148742,-0.221086238811634,0.0179775112496399,-0.133263744155052],[0.445201350405111,-0.0534279630697875,-0.241356765608826,0.0660301897036897,-0.165621672412058],[0.328176958583177,-0.0589551127870885,-0.233026015805885,0.0611264508310527,-0.137250758364619],[0.422581367492382,-0.0594232011710984,-0.242167632804993,0.0619723912004249,-0.163829341358765],[0.383567155624086,-0.0874368532573123,-0.226706446951865,0.0494108646411293,-0.150481217982387],[0.34333997157129,-0.128806382576314,-0.257963690293995,0.0724655425098955,-0.153632315218944],[0.359137671057578,-0.13774787435684,-0.204012420531773,0.106058483330912,-0.125581078244624]],"colors":["darkblue","yellow","darkred"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"surface"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"zeroline":true,"showline":true,"mirror":"ticks","gridcolor":"rgba(255,255,255,1)","gridwidth":2,"zerolinecolor":"rgba(255,255,255,1)","zerolinewidth":4,"linecolor":"rgba(255,255,255,1)","linewidth":6,"color":"white"},"yaxis":{"zeroline":true,"showline":true,"mirror":"ticks","gridcolor":"rgba(255,255,255,1)","gridwidth":2,"zerolinecolor":"rgba(255,255,255,1)","zerolinewidth":4,"linecolor":"rgba(255,255,255,1)","linewidth":6,"color":"white"},"paper_bgcolor":"rgb(0,0,0)","title":"Fama French Factors","scene":{"xaxis":{"zeroline":true,"showline":true,"mirror":"ticks","gridcolor":"rgba(255,255,255,1)","gridwidth":2,"zerolinecolor":"rgba(255,255,255,1)","zerolinewidth":4,"linecolor":"rgba(255,255,255,1)","linewidth":6,"color":"white","title":"Factors","tickangle":-45},"yaxis":{"zeroline":true,"showline":true,"mirror":"ticks","gridcolor":"rgba(255,255,255,1)","gridwidth":2,"zerolinecolor":"rgba(255,255,255,1)","zerolinewidth":4,"linecolor":"rgba(255,255,255,1)","linewidth":6,"color":"white","title":"Date","tickangle":-45},"zaxis":{"zeroline":true,"showline":true,"mirror":"ticks","gridcolor":"rgba(255,255,255,1)","gridwidth":2,"zerolinecolor":"rgba(255,255,255,1)","zerolinewidth":4,"linecolor":"rgba(255,255,255,1)","linewidth":6,"color":"white","title":"Fama French Factor"}},"titlefont":{"family":"Agency FB","size":50,"color":"white"},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"showSendToCloud":false},"data":[{"colorbar":{"title":"","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":[["0","rgba(0,0,139,1)"],["0.0416666666666667","rgba(61,23,136,1)"],["0.0833333333333334","rgba(89,44,132,1)"],["0.125","rgba(112,64,128,1)"],["0.166666666666667","rgba(131,84,124,1)"],["0.208333333333333","rgba(149,104,118,1)"],["0.25","rgba(166,124,112,1)"],["0.291666666666667","rgba(182,145,105,1)"],["0.333333333333333","rgba(197,167,97,1)"],["0.375","rgba(212,188,86,1)"],["0.416666666666667","rgba(227,210,72,1)"],["0.458333333333333","rgba(241,232,52,1)"],["0.5","rgba(255,255,0,1)"],["0.541666666666667","rgba(247,235,0,1)"],["0.583333333333333","rgba(238,216,0,1)"],["0.625","rgba(229,197,0,1)"],["0.666666666666667","rgba(220,177,0,1)"],["0.708333333333333","rgba(211,158,0,1)"],["0.75","rgba(202,140,0,1)"],["0.791666666666667","rgba(192,121,0,1)"],["0.833333333333333","rgba(182,102,0,1)"],["0.875","rgba(172,82,1,1)"],["0.916666666666667","rgba(161,62,1,1)"],["0.958333333333333","rgba(150,39,2,1)"],["1","rgba(139,0,0,1)"]],"showscale":true,"x":["Mkt_Rf","SMB","HML","RMW","CMA"],"y":["1993-07-31","1993-08-31","1993-09-30","1993-10-31","1993-11-30","1993-12-31","1994-01-31","1994-02-28","1994-03-31","1994-04-30","1994-05-31","1994-06-30","1994-07-31","1994-08-31","1994-09-30","1994-10-31","1994-11-30","1994-12-31","1995-01-31","1995-02-28","1995-03-31","1995-04-30","1995-05-31","1995-06-30","1995-07-31","1995-08-31","1995-09-30","1995-10-31","1995-11-30","1995-12-31","1996-01-31","1996-02-29","1996-03-31","1996-04-30","1996-05-31","1996-06-30","1996-07-31","1996-08-31","1996-09-30","1996-10-31","1996-11-30","1996-12-31","1997-01-31","1997-02-28","1997-03-31","1997-04-30","1997-05-31","1997-06-30","1997-07-31","1997-08-31","1997-09-30","1997-10-31","1997-11-30","1997-12-31","1998-01-31","1998-02-28","1998-03-31","1998-04-30","1998-05-31","1998-06-30","1998-07-31","1998-08-31","1998-09-30","1998-10-31","1998-11-30","1998-12-31","1999-01-31","1999-02-28","1999-03-31","1999-04-30","1999-05-31","1999-06-30","1999-07-31","1999-08-31","1999-09-30","1999-10-31","1999-11-30","1999-12-31","2000-01-31","2000-02-29","2000-03-31","2000-04-30","2000-05-31","2000-06-30","2000-07-31","2000-08-31","2000-09-30","2000-10-31","2000-11-30","2000-12-31","2001-01-31","2001-02-28","2001-03-31","2001-04-30","2001-05-31","2001-06-30","2001-07-31","2001-08-31","2001-09-30","2001-10-31","2001-11-30","2001-12-31","2002-01-31","2002-02-28","2002-03-31","2002-04-30","2002-05-31","2002-06-30","2002-07-31","2002-08-31","2002-09-30","2002-10-31","2002-11-30","2002-12-31","2003-01-31","2003-02-28","2003-03-31","2003-04-30","2003-05-31","2003-06-30","2003-07-31","2003-08-31","2003-09-30","2003-10-31","2003-11-30","2003-12-31","2004-01-31","2004-02-29","2004-03-31","2004-04-30","2004-05-31","2004-06-30","2004-07-31","2004-08-31","2004-09-30","2004-10-31","2004-11-30","2004-12-31","2005-01-31","2005-02-28","2005-03-31","2005-04-30","2005-05-31","2005-06-30","2005-07-31","2005-08-31","2005-09-30","2005-10-31","2005-11-30","2005-12-31","2006-01-31","2006-02-28","2006-03-31","2006-04-30","2006-05-31","2006-06-30","2006-07-31","2006-08-31","2006-09-30","2006-10-31","2006-11-30","2006-12-31","2007-01-31","2007-02-28","2007-03-31","2007-04-30","2007-05-31","2007-06-30","2007-07-31","2007-08-31","2007-09-30","2007-10-31","2007-11-30","2007-12-31","2008-01-31","2008-02-29","2008-03-31","2008-04-30","2008-05-31","2008-06-30","2008-07-31","2008-08-31","2008-09-30","2008-10-31","2008-11-30","2008-12-31","2009-01-31","2009-02-28","2009-03-31","2009-04-30","2009-05-31","2009-06-30","2009-07-31","2009-08-31","2009-09-30","2009-10-31","2009-11-30","2009-12-31","2010-01-31","2010-02-28","2010-03-31","2010-04-30","2010-05-31","2010-06-30","2010-07-31","2010-08-31","2010-09-30","2010-10-31","2010-11-30","2010-12-31","2011-01-31","2011-02-28","2011-03-31","2011-04-30","2011-05-31","2011-06-30","2011-07-31","2011-08-31","2011-09-30","2011-10-31","2011-11-30","2011-12-31","2012-01-31","2012-02-29","2012-03-31","2012-04-30","2012-05-31","2012-06-30","2012-07-31","2012-08-31","2012-09-30","2012-10-31","2012-11-30","2012-12-31","2013-01-31","2013-02-28","2013-03-31","2013-04-30","2013-05-31","2013-06-30","2013-07-31","2013-08-31","2013-09-30","2013-10-31","2013-11-30","2013-12-31","2014-01-31","2014-02-28","2014-03-31","2014-04-30","2014-05-31","2014-06-30","2014-07-31","2014-08-31","2014-09-30","2014-10-31","2014-11-30","2014-12-31","2015-01-31","2015-02-28","2015-03-31","2015-04-30","2015-05-31","2015-06-30","2015-07-31","2015-08-31","2015-09-30","2015-10-31","2015-11-30","2015-12-31","2016-01-31","2016-02-29","2016-03-31","2016-04-30","2016-05-31","2016-06-30","2016-07-31","2016-08-31","2016-09-30","2016-10-31","2016-11-30","2016-12-31","2017-01-31","2017-02-28","2017-03-31","2017-04-30","2017-05-31","2017-06-30","2017-07-31","2017-08-31","2017-09-30","2017-10-31","2017-11-30","2017-12-31","2018-01-31","2018-02-28","2018-03-31","2018-04-30","2018-05-31","2018-06-30","2018-07-31","2018-08-31","2018-09-30","2018-10-31","2018-11-30","2018-12-31","2019-01-31","2019-02-28","2019-03-31","2019-04-30","2019-05-31","2019-06-30","2019-07-31","2019-08-31","2019-09-30"],"z":[[0.235656331824658,0.12719361125789,0.161546203443221,0.0304390482130936,0.0440128290737087],[0.416750972441865,0.168795189900192,0.152453640019518,0.0469779927089966,0.0104393828074874],[0.502715210710106,0.236251162933698,0.153373120334683,0.033770819843445,-0.030401149082101],[0.560093004360497,0.315955130282715,0.135474135913219,0.00331619536480243,-0.0335757459746789],[0.445501580890665,0.297007271192553,0.147597868297894,0.0124536827325159,0.00387471213061752],[0.433515663967857,0.292403873601807,0.172888642184766,-0.000455927336921125,0.0277961309077646],[0.414680750189819,0.257035205070242,0.194923524240401,-0.030846803386302,0.0913122279704728],[0.285437333389163,0.231085846540227,0.195646624708927,-0.00117080011257586,0.0815771584817113],[0.196963905678594,0.176869191257498,0.250480392793265,-0.00696748748434617,0.116952257012042],[0.206316122912184,0.164401858229985,0.255915652823187,-0.00209236544113756,0.132129148505063],[0.173240840144559,0.137403933873663,0.27084611862598,-0.0132756409134801,0.158457733354018],[0.192197832000845,0.121393688174807,0.291192799721722,-0.0234861521684404,0.169586821215297],[0.178556337576989,0.111213596190166,0.331600536630724,-0.0457818627558735,0.190034974625445],[0.200011899756623,0.104833001340247,0.320491446794146,-0.0486116911581397,0.184263942216673],[0.195251400917186,0.116459391106515,0.315437188637601,-0.047945586120943,0.189233378281525],[0.191952530614014,0.0854067246806089,0.298557393134282,-0.0224544740251954,0.189353188212845],[0.192698666783412,0.09064707096754,0.312498960238484,-0.0332841450482498,0.191021452378257],[0.0935238866937333,0.122519553524729,0.38232894820008,-0.0598284071391612,0.2507033517076],[0.116314809422852,0.012975203797587,0.351441890896562,-0.0305858683034936,0.227075146257368],[0.145383204955348,-0.00769368404727278,0.297172810768038,-0.0155752051975765,0.200554919569283],[0.204147981767266,-0.00298463751559075,0.2243748354899,-0.0139877433232731,0.174302345823063],[0.216173982573999,0.0518785863811539,0.200701694819175,-0.0225403920102994,0.151263457623384],[0.247936102134843,0.0360576911683621,0.204270255433855,-0.00513371332929846,0.146701740109274],[0.307373778299483,0.0932451049461138,0.137411887339277,0.00893226123481994,0.102296433544678],[0.306491014100766,0.126781584452029,0.11828128151939,-0.000410624446992025,0.0781126107690535],[0.344075368621888,0.146884533437943,0.146221482111235,-0.0507962731179592,0.0981855782968859],[0.377173441446655,0.125421832633012,0.147147160675428,-0.0573470234760132,0.118573646746753],[0.34252585288411,0.0567636068466464,0.177923990907149,-0.0606662240975765,0.144058109683463],[0.347973257562028,0.015993090589461,0.211250029744542,-0.0781897093423642,0.191187177023668],[0.340937352238925,0.00479867581857851,0.180283602301764,-0.0753131118981941,0.211623636183806],[0.363698945174488,-0.0434551990962814,0.122246069261056,-0.0522054100652527,0.205826393905415],[0.374287091473872,0.00300864221549735,0.0265709543179899,-0.027429641696892,0.129189274109536],[0.354009843983882,0.00958052451334535,0.013306725072691,-0.00471526492904928,0.0984404624529147],[0.417672353843713,0.0626683513919197,-0.0455355182360554,0.0309918575250425,0.0484722747166004],[0.408570566357946,0.0766604472046852,-0.0318064493521603,0.0307864192750624,0.0566584808769306],[0.39002935028702,0.0272743146978776,-0.0316164025270259,0.0683509152732753,0.0596804824494583],[0.314402377002984,-0.020985530963431,-0.00233727298283182,0.101119753015762,0.0765288717081505],[0.305265770404778,-0.00288086887943817,-0.00811620418896331,0.0909914769432321,0.0550887950998713],[0.37377781355228,-0.0462127535603084,-0.0375712486485237,0.098722826864678,0.0269038317890493],[0.368644215665075,-0.0881580452462788,0.0438375711391912,0.0917702600346066,0.0546054979661184],[0.482721143361634,-0.112487398406493,0.0749247953123675,0.0959931143578587,0.0602411191994521],[0.433715211414997,-0.0938713232568118,0.0698212948004988,0.0963223073237252,0.079280360806264],[0.4625567127525,-0.107299484281944,0.0335134803815706,0.129249927020376,0.0530448895850839],[0.496503289427253,-0.147471007489256,0.0944554606278381,0.109186262341304,0.120244659541414],[0.491953216519579,-0.145924079881878,0.11716021947087,0.124145094784313,0.130712176277564],[0.540740872640734,-0.191043444146704,0.0971618758155439,0.157880655455308,0.101399480135523],[0.630976837983005,-0.134348616976711,0.0438689897555926,0.172761331759985,0.056715509998446],[0.749363695711662,-0.121554453161668,0.0329368196563609,0.175797758231381,0.0425140164856161],[0.825763296856934,-0.130853958136341,0.0246124855212335,0.178273866627175,0.0176228226854103],[0.68360543177435,-0.0703607705168348,0.0539411900929401,0.160399991791368,0.0214453652680864],[0.813073864181017,-0.0718988597529627,0.0667291519545328,0.140103140360734,0.00345752031211677],[0.724902238088593,-0.0619771920960762,0.111577925074181,0.136499495507757,0.0288295196672432],[0.843960238465473,-0.115498012967471,0.134742826699399,0.159934797883648,0.0619744026420159],[0.8532814766617,-0.12872072753232,0.176825100517058,0.152208818019029,0.081229168659235],[0.827691240274222,-0.124987435403811,0.136248922290186,0.154601893400139,0.0696865645440461],[0.887303286902871,-0.12155359660131,0.121118508339388,0.143785411640161,0.0501572859297159],[0.935108817593125,-0.123583972169411,0.153935067989936,0.14113829305818,0.0534209326328559],[0.9102900144695,-0.121916947989936,0.141876992555499,0.125988916141387,0.032236205675334],[0.803028733299559,-0.131034780760477,0.160938352861888,0.138259741162324,0.0555397977875467],[0.809889037748211,-0.188802751954098,0.166913946607316,0.132932295650013,0.0542347825831937],[0.698780019600734,-0.246620609461188,0.174325200929141,0.144310058587335,0.0940803868824052],[0.414607543439043,-0.290243167968015,0.170876375082066,0.214962314879126,0.150848708843285],[0.452992087693615,-0.283403352686716,0.139697096988293,0.189029931507835,0.113228097261483],[0.580398323385506,-0.277350132493539,0.129961969539393,0.178876260125701,0.111671290412851],[0.609138367946255,-0.270808999226358,0.0838364584266291,0.19888971295085,0.0904494744831099],[0.687834967665635,-0.284445516499356,0.0367699777229393,0.212244129221552,0.0115937835210702],[0.702826962009956,-0.279676620628594,-0.00917271509803308,0.188382009571607,-0.0674121673897199],[0.612000553526612,-0.323578948490959,0.0294217605655285,0.165825308091227,-0.0076345512976107],[0.652128703773085,-0.356135756177754,-0.00273490886903516,0.137020932052855,-0.0273199800957551],[0.690196185426843,-0.361046533135117,0.0626527816422324,0.108618040537601,-0.00169952656337924],[0.619702395041897,-0.358815680181268,0.0931126962785895,0.112263720192583,0.0305425955790051],[0.713977716337787,-0.323253636220458,0.0355127043345604,0.091246951738569,-0.0171892917764586],[0.758191791185991,-0.283221939732876,-0.00713124401207743,0.0886661548483718,-0.0330456716695445],[0.685888162207606,-0.311140179292285,-0.024385517722365,0.10349662214449,-0.0114217568421809],[0.564353743343398,-0.277037513216707,-0.0399159937163092,0.0837014894776758,-0.00339362349416816],[0.631059973441547,-0.308438389272701,-0.116069707523365,0.0530774871879585,-0.0400044422104336],[0.577673134581722,-0.247744739467366,-0.208478638930302,0.0229063281991708,-0.0820782621637022],[0.719069882452169,-0.24570353903177,-0.282108532983297,-0.0352470893183078,-0.161594691409598],[0.567584730383172,-0.212201399236759,-0.270810616708794,-0.103333832248695,-0.115233611959491],[0.59921019769292,-0.0563562186936151,-0.403169664294586,-0.23732464638257,-0.195728091791677],[0.796651860548267,-0.181979153154105,-0.369999648526716,-0.159693838293407,-0.218299745422938],[0.645172839389433,-0.155284647540919,-0.323877439520509,-0.13472297471351,-0.148134988712772],[0.487968120396763,-0.209881413796043,-0.261646380980994,-0.108960905222514,-0.0905179370402545],[0.484816859456377,-0.159936337208494,-0.345560160234489,-0.161442647694013,-0.142697627835499],[0.352664007566271,-0.148787344152928,-0.282741812525804,-0.113863140162991,-0.0808413007066509],[0.510448957474189,-0.210437264675086,-0.298194412615014,-0.14678214764108,-0.0753562836885152],[0.3556082440527,-0.22398406145976,-0.231168824049575,-0.0999115840323502,0.0200672474965569],[0.36772069173982,-0.245012397056348,-0.198575357375914,-0.0207123655048754,0.0845104819375362],[0.196438787107622,-0.204457861271901,-0.0788898022838032,0.0839225444460361,0.204451013089104],[0.197618707016012,-0.150330528956728,-0.0110550704137208,0.0921669513093166,0.275044570509885],[0.236664981492182,-0.107691691218474,-0.0763389566949494,0.0129384959981884,0.148131602469016],[0.0427462973557569,-0.0844381921422784,0.0910158843671702,0.119735230787535,0.334276847377688],[-0.0781979507923356,-0.0646108564563991,0.192177523097374,0.174620891116606,0.445088766243454],[-0.0157571296469586,-0.0656389620298383,0.0886131875583314,0.150675913211874,0.359168498552319],[0.0215217275257378,-0.00508475424039256,0.0784599896563007,0.132467215148983,0.344759884825204],[-0.026630477533061,0.0831429934083177,0.106073160223084,0.142551215363916,0.359603015388057],[-0.0207245949923834,0.104381091318285,0.161354300458175,0.205426400379512,0.421195769440871],[0.0965356769743508,0.179299386318344,0.185071698052216,0.199527086837687,0.436464595439161],[-0.0623735408605962,0.120292946613076,0.248193651710127,0.263287706994205,0.557383581353241],[-0.103014239323061,0.221316260930201,0.175574235930518,0.235147945181147,0.45674641084667],[-0.0867393134064126,0.216690524070304,0.216529883661904,0.200948027066875,0.413118934389933],[-0.123631769646343,0.29846100734031,0.298603463454983,0.198206680835976,0.491379439638278],[-0.165771379793959,0.332450055912979,0.403263780271012,0.28113220690749,0.648040945270779],[-0.148971909458007,0.384255179324311,0.446371206242631,0.397503890060391,0.696651997860647],[-0.141395503000695,0.489390299668806,0.496118439869156,0.412290786445199,0.744410642550786],[-0.220063885129441,0.513715052377395,0.556044236512522,0.493161984893271,0.860425969886399],[-0.212254962034088,0.426669487850039,0.576574950149059,0.501170601022019,0.895059630729313],[-0.302824578698618,0.439047178368702,0.67129356120007,0.54558128692538,1.0130856172173],[-0.33882691081384,0.332874091428508,0.59654079824355,0.57764095407812,0.960505022737744],[-0.325687914009573,0.347089609925205,0.653665034533189,0.590205541069284,0.934265742569261],[-0.377174285388762,0.348789325049832,0.738747153300134,0.643645690950813,0.938604872408816],[-0.365853397648029,0.389617855498958,0.679903873658941,0.631359582468384,0.948748508287792],[-0.347046054812814,0.359258247310594,0.807110997316257,0.537612820457131,1.12637200878098],[-0.423796033058605,0.32483999460011,1.06512826988946,0.713190809930958,1.2562302907156],[-0.412900408527014,0.29957056691019,1.05542604790978,0.797365451448357,1.17373281079596],[-0.432135371529818,0.103543467341974,1.39222047766962,1.14307799338573,1.24693318363389],[-0.464028919885347,0.283133477929722,1.14053417319356,0.95571560910595,1.24468039319512],[-0.390849769888612,0.338524347884759,0.99231876105194,0.769299400454565,1.09564645493395],[-0.328513712126047,0.426226904053024,0.904288713171937,0.645360895833609,1.06525998920943],[-0.342440931100859,0.346748412894352,1.12636010088142,0.750073573425975,1.16133379250493],[-0.312842364316652,0.421134760403188,0.926119912009178,0.590147342521044,1.08417277318488],[-0.342478924033391,0.464065467235922,0.990127566577475,0.624730220735638,1.13844592301948],[-0.312673710425014,0.459563778138093,0.816812608882647,0.585091190277961,0.961567214065054],[-0.249468852368124,0.552656684260796,0.753794894045749,0.420663242579728,0.847001972471013],[-0.150809445181372,0.600678606693605,0.524401304265839,0.241381650405121,0.628579239646941],[-0.12554288877199,0.490465946572226,0.396098556989886,0.228681778534667,0.520950608872603],[-0.135367297963511,0.466677314227051,0.544950664442598,0.266077009849014,0.736428548196585],[-0.0272762320323171,0.430859269042255,0.329042228305028,0.172054545338931,0.516285454030384],[0.0371661928200955,0.444825064924655,0.205938280716681,0.142981372307737,0.390919414830308],[-0.0577259398129899,0.416497995531313,0.278826106105841,0.236931563143562,0.467093416369843],[-0.0538013552703623,0.365727948546277,0.261017602912055,0.222636805856705,0.446759181462919],[-0.0151967594021603,0.328950324263422,0.275750882275018,0.219120694455492,0.47746277392739],[-0.0317057782571175,0.339392861964417,0.286139934539788,0.178054857868906,0.389018680010861],[0.0338116749536603,0.296258538199118,0.255573537558038,0.142951776761723,0.277578785912568],[0.164421226738052,0.423210987313067,0.235684976012698,0.0953930050837164,0.187435085801423],[0.155893583733916,0.35759909774428,0.330502387538424,0.112030201394222,0.284070536586888],[0.122527804585852,0.41695585669518,0.356251450980353,0.146327421546198,0.32571606750322],[0.1407452814971,0.341720453589879,0.332619190021156,0.135836809511755,0.319284375690581],[0.128571457474619,0.322943025901922,0.314160787834695,0.117321261901983,0.265537164776865],[0.17970750694391,0.336385404736539,0.272866457232386,0.0630823656931492,0.181011054608512],[0.112496087499762,0.270235356774811,0.279542550476653,0.0840593256927322,0.19446381842],[0.13996222850788,0.153405883087138,0.187772568484328,0.0550687451543186,0.110135567569],[0.193351112970671,0.209112832526642,0.144717255749182,0.0351598209965953,0.0580863447091007],[0.29944965818947,0.220576418173703,0.146395070761516,0.0105060290974381,0.0234741239590555],[0.475139108920238,0.324776689988596,0.169619198293223,-0.0197094114861801,0.0224421879599033],[0.456074780044641,0.327040127549381,0.174121285613933,-0.0343290538432751,0.035277056486632],[0.634925086805798,0.289734811827267,0.178200118864204,-0.0479061497470602,0.0372783042303748],[0.481845629584651,0.317684889016272,0.252686926891501,-0.034547564826561,0.0337480277194804],[0.453717291540783,0.305421951667473,0.257769336575613,0.0379629450343124,-0.0160364346363264],[0.540306673167684,0.297137667591447,0.209166302474551,-0.0106776654006702,0.000973307697599068],[0.634433893223865,0.360707708046822,0.218031336127323,0.00145695218539332,-0.0141823793997248],[0.653552995829983,0.367849088831888,0.22557709380517,-0.0236489345469594,0.0176342758988879],[0.662900662274723,0.406083864201053,0.251198479102953,-0.0337740567072131,0.0160001783061157],[0.555711005231767,0.394251656651594,0.287954159309205,0.0180310749157169,0.00316627909735545],[0.413923574450204,0.307846575090108,0.309464875957375,0.0709240822509309,0.00504839219134667],[0.385230021466583,0.281645760450485,0.316662614132236,0.0790001122421069,0.0129501938838097],[0.346039470687939,0.20074903969079,0.362821628792156,0.139837950774987,0.00753549278801402],[0.341180596501066,0.175599400768869,0.333645198893981,0.145320184062586,0.00802914075116345],[0.373717071095249,0.144604092719545,0.342437585581326,0.130942832735518,0.0209422442355658],[0.337832534251286,0.137585399139505,0.289520191166643,0.15657033519462,-0.00430826568173326],[0.34126016983372,0.110126824568269,0.281973153047524,0.154827987597159,-0.0266800387877657],[0.291598125657902,0.132070134394331,0.288903418765788,0.145325138125712,-0.0173360130318683],[0.280717780980992,0.111371712591781,0.262819983341604,0.187078703524697,-0.0303495149193215],[0.239587449328957,0.130734752342554,0.256060911173852,0.163505178346562,-0.0242628155090754],[0.265678745570651,0.103244715891344,0.256936563636577,0.154672495833234,-0.0279926226724045],[0.343966818474265,0.110336279721683,0.276980305134897,0.12591947435253,-0.0122212830139099],[0.376218836733128,0.112450146386484,0.273805316807858,0.163121978334288,-0.0303384365152497],[0.325237778296718,0.0984762878253973,0.249287299161275,0.165204145973275,-0.0324697737514034],[0.330473149496976,0.0975747890253764,0.165552973984296,0.136287820604877,-0.0478227692065888],[0.33885177888705,0.0953545507548688,0.136833454617444,0.113586910959555,-0.0425600069019322],[0.361804273137171,0.0382707619138725,0.109557634452675,0.114818012067149,-0.0612417628648212],[0.370645418329681,0.0394064996208188,0.0638667053777624,0.111371038361376,-0.0764668766791181],[0.23846714946849,-0.0396051332587163,0.042616722733017,0.128550903819241,-0.0584276674640306],[0.19207857157028,-0.0308383629835175,0.0372892552588777,0.153249638588099,-0.0737911002106129],[0.146398963269919,-0.0341554050268595,0.069077316121344,0.114692498815554,-0.0475671132888651],[0.0967067185802344,-0.0338668347863537,0.0455349135642085,0.115895561755798,-0.0668398282013811],[0.100945414197205,-0.0221205349053366,0.0348304805054689,0.113582025691342,-0.0616771163242104],[0.187098473792538,-0.000742782701518285,0.0384600091974914,0.131587567818878,-0.0773693990856632],[0.17482486893257,0.00502423048645118,0.0161556851116724,0.161441151825378,-0.0819079895328878],[0.072149924977108,-0.0175518366584808,-0.0370861533998864,0.208476994599815,-0.0916739456903903],[0.0147446084134004,-0.0177433470217051,-0.00957711634779113,0.169178889837766,-0.0491362701555037],[0.0321186222547014,0.00719002643103983,-0.015127613286949,0.196491771463212,-0.0282214510627434],[-0.0792544633215342,-0.0026548391774025,0.0124410202877092,0.166632796774291,0.0378926459912741],[-0.229343164366065,-0.0206570922332457,0.00979704012223293,0.213872582420457,0.0768813813870892],[-0.315474526146099,-0.0758558915437424,-0.01152305093601,0.251276866552052,0.116032794970138],[-0.306247273128598,-0.0371231776876773,-0.0293680866212863,0.25002646496661,0.100860817749433],[-0.379919535843031,-0.103415434794105,-0.102431605524669,0.281571294645318,0.0814869144128898],[-0.438149492963744,-0.10980675046977,-0.157159211702211,0.317391205817944,0.0363322123115577],[-0.397035777360105,-0.13280290511433,-0.151434191863609,0.290701543664147,0.0202892729573176],[-0.341483913431637,-0.0803347102759999,-0.137466370535563,0.292101712991593,0.0181309094303606],[-0.272858672908575,-0.0748795469702124,-0.15635827754642,0.260065074268208,-0.0303371793982284],[-0.270518952197975,-0.0539176031704436,-0.187383765798862,0.234253223229426,-0.0267490681508772],[-0.20518461293785,-0.00776487250452607,-0.170488962686628,0.206246293341623,-0.015416428916567],[-0.19825828674099,-0.010331848953768,-0.118472039084559,0.20415787425752,-0.00982329991335051],[-0.172860172662618,0.0441777702383348,-0.113485724330944,0.225251730913683,-0.0329143771090472],[-0.221157385394722,-0.0134969200382707,-0.127072150011696,0.262992990510587,-0.036709922977292],[-0.190306827729504,-0.0323655449404027,-0.131601410458652,0.276585854117973,-0.033198537520344],[-0.171160580834285,0.0252629809057698,-0.147052436296615,0.303582357559303,-0.0556602517255865],[-0.210952733132471,0.0321411845425663,-0.132958390911491,0.283449309988389,-0.0440191215152251],[-0.167103388836322,0.0290938235016966,-0.115678039958058,0.285122814605224,-0.0355548577757483],[-0.122775789213438,0.0474245250511114,-0.106877065037258,0.260993248545182,-0.020069976667634],[-0.139161452307275,0.105508589852709,-0.0783875739473077,0.257263234992001,-0.00901997241291308],[-0.235050016545398,0.109378256883897,-0.102461597439412,0.241177788623636,0.00848921978856465],[-0.264321459022391,0.0829172370417046,-0.130374174572184,0.230950670937171,0.00495491292037586],[-0.18524572892663,0.113270050769876,-0.0944310745931531,0.220346382555001,0.047310906290732],[-0.226602581267794,0.107403014929191,-0.106418698807815,0.246337532690554,0.0136077170217317],[-0.184591973142496,0.164461280027677,-0.10165927776285,0.24883996725072,0.0497479590050935],[-0.17208033707754,0.166312018130433,-0.0780606264542125,0.259835256607204,0.0566069876877766],[-0.117171766244837,0.255609483570858,-0.0679212468036735,0.235212666147095,0.0498245015926055],[-0.051658720844001,0.264096704732172,-0.0311261943109282,0.170048190096305,0.0887934094599552],[0.0331358150660057,0.249668126183209,-0.063812873736634,0.175444442025764,0.0762492166932811],[0.0990739094304516,0.266589160149848,-0.0551549308721156,0.130398987077997,0.0922358262809522],[0.11833832547214,0.294355228825805,-0.076017831742057,0.143259679946415,0.0815044858773271],[0.0977272390687673,0.319408966955074,-0.0976087871417335,0.128751308373491,0.101117835672438],[0.0559274320743501,0.27128813806885,-0.0829161025135795,0.137610339538985,0.102228729372673],[0.125061443099413,0.253659340591667,-0.0565707146018506,0.109099884855266,0.118775017226122],[0.116605771071244,0.213206889652318,-0.0864913518418985,0.166161524461698,0.0572920091448565],[0.0400941170875524,0.151952999724667,-0.112413537131732,0.159877711015495,0.0277101744143315],[0.0561524401215596,0.11401095390376,-0.147428494292897,0.209707923463144,-0.0207538155561487],[0.444103030027715,0.194996276131678,-0.142277004832431,0.169963925977702,-0.0527949782223657],[0.557884638657838,0.243582523133574,-0.116430243780942,0.159597157013343,-0.0662710972225153],[0.539926756616166,0.183910571779305,-0.0739794063313113,0.160525113125787,-0.0255836805023775],[0.752519888313339,0.230444533924196,-0.0368387420892894,0.115750018411518,-0.0122410087744682],[1.02866039446125,0.227831596800887,0.0214235505846665,0.106483358183461,0.0123089999058841],[0.90897651528057,0.209715847989548,0.0216262340950513,0.118881562258044,0.0475548002906001],[0.716834780578181,0.128286095465304,-0.0235030964835055,0.114913506279195,0.062253984344748],[0.501224789390293,0.142739536704489,-0.0192077986973689,0.157546220441809,0.127332568504128],[0.560960806368137,0.129686086556018,0.0137855206323865,0.151494299723633,0.132050381166262],[0.45790708322927,0.0818967808967739,-0.0236328395668965,0.172999089290449,0.114677055100159],[0.454227643881186,0.0872933131239129,-0.0691120422775174,0.183410323810778,0.0742933518962967],[0.430022974851596,0.0628621219718795,-0.0746235162723219,0.143943909666966,0.0955966194976399],[0.446640888895018,0.0972368480064212,-0.0193814017921629,0.0917860660895147,0.132455952119656],[0.376613458138258,0.119640867363367,-0.0233156790166676,0.0945022220903349,0.15210712481584],[0.353498430645496,0.0816473668405155,0.00302864774619538,0.0676060121142743,0.164826091468765],[0.479339936701153,0.0803563614295262,0.0105844191039821,0.0716037271682393,0.168944105736945],[0.440113393205558,0.0573224088020681,-0.0129152478961886,0.0760047842466622,0.179203114543652],[0.405421661892805,0.0479664932783059,-0.0313963380518569,0.0970302903071669,0.194672684322997],[0.396458513538897,-0.019978697670004,-0.0490764441482607,0.0894361328386639,0.190192956475722],[0.553927625278306,-0.00825829142328305,-0.0140301214510221,0.0722762376150063,0.176773299313304],[0.619373466004313,0.0192059464847671,0.0288826633326094,0.0712028880278039,0.183158524209096],[0.600295293333294,0.0357974344780776,0.0197171244134828,0.0571869493210877,0.15627909044328],[0.632281103403058,0.0581702369344557,0.023058747350629,0.0580268197872813,0.166905777664413],[0.548035298760441,0.0433413315168953,0.0295212682202917,0.0617369629285052,0.152658129058022],[0.551015441793958,0.0188176881994795,0.0521090380461506,0.0702662393340601,0.158644169476579],[0.581478794385487,-0.00985097952281477,0.043288962278099,0.0757338921644755,0.157838035972322],[0.519451310078876,-0.0283282864807718,0.0105408878954112,0.108311603895654,0.124640807322442],[0.438993994189232,-0.00112505264974405,-0.0165689968572815,0.0723633732303763,0.0976467618681403],[0.44881695098064,-0.0175113116092227,-0.0247969056485153,0.0923636277453741,0.0936853299456086],[0.451557917033476,-0.0460938505897358,0.0383849872625808,0.0868072442334149,0.109095462596162],[0.415689086317793,-0.076505209940313,0.0796868032181168,0.105826908286145,0.126841882899351],[0.465407765151122,-0.0854539835191694,0.0903063144645331,0.077301245802369,0.123775491966245],[0.535445087260149,-0.0543138570038015,0.0956536279875801,0.0265306710245361,0.0980590347202901],[0.538901881357541,-0.0864178390920175,0.115157176446316,0.0143508111310304,0.120015734455566],[0.702329433124968,-0.0545968611049092,0.12287374182724,0.00435917587560253,0.121142964462063],[0.816476003077452,-0.0534152302678359,0.0950915306450977,-0.0106049836247348,0.108613727581226],[0.661303752187096,-0.0639542222824739,0.0590269547109399,0.00309910263989055,0.104841423063836],[0.706032444731414,-0.0788465023025495,0.0294268224364107,-0.00153255644489902,0.0938104835888018],[0.697020213138594,-0.0554006436589423,0.00598087329194885,-0.0187974107912291,0.0713989461992857],[0.556125782979657,-0.0880780766839334,0.00243538249771991,0.0178867863873573,0.0761868350508768],[0.583423618321421,-0.0709818509225358,-0.0135587999114977,0.00479532123840753,0.0526653862608426],[0.527756381739808,-0.0364832512350493,-0.0305849648569793,0.0121842663830034,0.0324118341818227],[0.554664329284541,-0.050974418648593,0.0038183356383219,-0.00522750448705533,0.0244978758710217],[0.682969959890018,-0.0432579890070085,-0.0190615686974176,-0.0391368813543788,-0.0075707558359116],[0.594554823188643,-0.0226726444134747,-0.0330651821222224,-0.032241663907053,-0.0249023242991862],[0.59518626753007,-0.0497540056981319,-0.0870184553199301,-0.03157034210023,-0.0474068265558438],[0.460287779160701,-0.0539043753377273,-0.0608554020992473,-0.0187415135852265,-0.0280584809755815],[0.372926204823753,-0.0901809042928746,-0.0606689529037142,0.0132147977981161,-0.0384721401079861],[0.500770100688199,-0.105894217322458,-0.0843587203490838,0.0246762721293343,-0.0591481374861739],[0.497787944502033,-0.0860351394080596,-0.0897990864618133,-0.00410905495152758,-0.0742629730402438],[0.442341697790457,-0.131051854480387,-0.135847242777663,0.00570417358054276,-0.0773873584796554],[0.290891026779706,-0.161683963971917,-0.112043723641189,0.0417018527115263,-0.0727828722561955],[0.281940712608293,-0.141222795972038,-0.105382053067326,0.0566664443705907,-0.0598577496648088],[0.322607812641861,-0.135344844669793,-0.0838206645089966,0.0506853135533987,-0.073691508498464],[0.320648780629456,-0.0891635915091824,-0.0498440018273528,0.00851979061354413,-0.0587362505631677],[0.30596488703814,-0.108987783578955,-0.085868873795984,0.0214927485197449,-0.0725099152789151],[0.324663206399673,-0.112695185311636,-0.0915105351362836,0.0271222175747132,-0.0522100623352892],[0.302478951736721,-0.109992114433556,-0.119455681963211,0.0545648109802113,-0.0659805574216004],[0.34203304732655,-0.101293523350928,-0.086110582239658,0.0383455665168322,-0.0466751315134004],[0.297048699371471,-0.107371816517835,-0.0850002579495777,0.0193741968410555,-0.0353743200024649],[0.22053914980724,-0.122511863911856,-0.0638100243845494,0.00372854801114531,-0.0376744706552161],[0.241318831801234,-0.083531726582407,0.00421827295787769,-0.0261812422873728,-0.0129798230949463],[0.230676191777997,-0.0768004473833441,0.0361588021437755,-0.0192211927808703,-0.00386276925204809],[0.301652236385612,-0.0906562402911183,0.0295430116770625,0.0111278162099226,-0.00940750639314081],[0.283504678468089,-0.10891031955822,0.00100204429830897,0.0164894744649628,-0.0182778889196537],[0.27814717533793,-0.0968637076555565,-0.0731002180315402,0.0148904348826759,-0.0507458021823892],[0.285669438015729,-0.0692670995690533,-0.117398899714761,0.00404232023520801,-0.0752857532155109],[0.272432009991445,-0.0769512668236559,-0.151784804615923,0.0267155380982336,-0.0825750620835444],[0.249661392423032,-0.0808066427854418,-0.141731257977406,0.0226237839611161,-0.0692518527171977],[0.301082011286262,-0.0530103890219149,-0.134955000669812,0.00750311870258624,-0.0703689739181772],[0.251194280890028,-0.0709279379251053,-0.146757029463099,0.0145191571336625,-0.0882213292350511],[0.314427369611584,-0.00221159171317864,-0.10293806014629,-0.00814605930684842,-0.0641157781008013],[0.313783231921879,-0.0390400849503172,-0.08631720441357,0.00471203924621411,-0.093250555042833],[0.322265886324818,-0.0175062446355847,-0.0684258583184014,0.0207763257008022,-0.0940654072649614],[0.340549723229911,-0.0392901736763341,-0.0774801344152769,0.0461088545322705,-0.0921793532898015],[0.461370013213338,-0.0550442977642412,-0.0677875819941745,0.0259263607174771,-0.0918121861930534],[0.322323031268404,-0.0618121094185707,-0.0789348322297531,0.0451993940568822,-0.0988545567521113],[0.30934071001,-0.0576932357526032,-0.0713111980562231,0.039868877147192,-0.0921458281001653],[0.299498963994694,-0.0306543042103539,-0.087674966277132,0.0254335180237324,-0.0794861441220276],[0.318927116822733,-0.0064279007807807,-0.102542760674734,0.0261614395962064,-0.0907910253800416],[0.347106452923331,-0.0296806851603626,-0.0989980136285842,0.0408870879516761,-0.0738960090873662],[0.374568494417859,-0.00172112135070224,-0.0461316510213025,0.0415055591863474,-0.046050378761296],[0.506370427230116,0.00345440224747962,-0.130464759066043,0.0471184633975312,-0.088849148536589],[0.559518106038752,0.0113116590546927,-0.144617575611614,0.0367979581403115,-0.0785242341547834],[0.337040585843138,-0.00584147626798848,-0.124013102066176,0.0376263196368782,-0.053211494607542],[0.352613880869882,-0.042330606775917,-0.111500271288274,0.0527811111503163,-0.0360353274063081],[0.254443647383888,-0.0340288287541604,-0.0984394341165215,0.0575467433806518,-0.0444844201541413],[0.445131856432483,0.0266933474729989,-0.146257964848876,0.0221339058723342,-0.0799324664950635],[0.490679598965165,0.0300290647582806,-0.177620609110782,0.00403948188954328,-0.112317838920501],[0.406532825341337,-0.0192905535148742,-0.221086238811634,0.0179775112496399,-0.133263744155052],[0.445201350405111,-0.0534279630697875,-0.241356765608826,0.0660301897036897,-0.165621672412058],[0.328176958583177,-0.0589551127870885,-0.233026015805885,0.0611264508310527,-0.137250758364619],[0.422581367492382,-0.0594232011710984,-0.242167632804993,0.0619723912004249,-0.163829341358765],[0.383567155624086,-0.0874368532573123,-0.226706446951865,0.0494108646411293,-0.150481217982387],[0.34333997157129,-0.128806382576314,-0.257963690293995,0.0724655425098955,-0.153632315218944],[0.359137671057578,-0.13774787435684,-0.204012420531773,0.106058483330912,-0.125581078244624]],"type":"surface","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<div id="refs" class="references">
<div id="ref-sharpe1964capital">
<p>Sharpe, William F. 1964. “Capital Asset Prices: A Theory of Market Equilibrium Under Conditions of Risk.” <em>The Journal of Finance</em> 19 (3): 425–42.</p>
</div>
<div id="ref-sharpe1966mutual">
<p>———. 1966. “Mutual Fund Performance.” <em>The Journal of Business</em> 39 (1): 119–38.</p>
</div>
</div>
</div>

    </div>

    


    

<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/time-series/">time-series</a>
  
  <a class="badge badge-light" href="/tags/finance/">finance</a>
  
  <a class="badge badge-light" href="/tags/quant-finance/">quant finance</a>
  
  <a class="badge badge-light" href="/tags/yahoo-finance/">yahoo-finance</a>
  
  <a class="badge badge-light" href="/tags/factor-models/">factor models</a>
  
  <a class="badge badge-light" href="/tags/asset-pricing/">asset pricing</a>
  
</div>



    
      








  
  
    
  
  






  
  
  
    
  
  
  <div class="media author-card">
    
      
      <img class="portrait mr-3" src="/authors/admin/avatar_hu88685f9f250f5c15d78dab2d9552b11c_15179_250x250_fill_q90_lanczos_center.jpg" alt="Avatar">
    

    <div class="media-body">
      <h5 class="card-title"><a href="/">Matthew Smith</a></h5>
      <h6 class="card-subtitle">Researcher</h6>
      <p class="card-text">I am a researcher with a focus on Machine Learning methods applied to economics and finance.</p>
      <ul class="network-icon" aria-hidden="true">
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a href="/#contact" >
              <i class="fas fa-envelope"></i>
            </a>
          </li>
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a href="https://twitter.com/MatthewSmith786" target="_blank" rel="noopener">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
        
          
          
          
          
          
          
          
            
          
          <li>
            <a href="https://scholar.google.co.uk/" target="_blank" rel="noopener">
              <i class="ai ai-google-scholar"></i>
            </a>
          </li>
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a href="https://github.com/msmith01" target="_blank" rel="noopener">
              <i class="fab fa-github"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>



      
      
      <div class="article-widget">
        <div class="hr-light"></div>
        <h3>Related</h3>
        <ul>
          
          <li><a href="/post/yahoo-finance-ipo/">Scraping Yahoo Finance IPO Data</a></li>
          
          <li><a href="/post/nvidia-share-price/">Tracking NVDA&#39;s share price</a></li>
          
          <li><a href="/post/synth-real-time-series/financial-time-series/">Time Series Classification Synthetic vs Real Financial Time Series</a></li>
          
          <li><a href="/post/quantstrat-rolling-logistic/quantstrat/">Learning the Quantstrat and Blotter packages</a></li>
          
          <li><a href="/post/nfo-wc-calculations/nfo-wc-calculations-plots/">Need for Funds (NFO) and Working Capital (WC) Calculations</a></li>
          
        </ul>
      </div>
      
    

    

    
<section id="comments">
  
    
<div id="disqus_thread"></div>
<script>
  let disqus_config = function () {
    
    
    
  };
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
      return;
    }
    var d = document, s = d.createElement('script'); s.async = true;
    s.src = 'https://' + "lf0-com" + '.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  
</section>



  </div>
</article>

      

    
    
    
    <script src="/js/mathjax-config.js"></script>
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js" integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/r.min.js"></script>
        
      

      
      
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_CHTML-full" integrity="sha256-GhM+5JHb6QUzOQPXSJLEWP7R73CbkisjzK5Eyij4U9w=" crossorigin="anonymous" async></script>
      
    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.js" integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log==" crossorigin="anonymous"></script>
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Search...",
        'results': "results found",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    <script id="dsq-count-scr" src="https://lf0-com.disqus.com/count.js" async></script>
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.130521ecfc6f534c52c158217bbff718.js"></script>

    






  
  <div class="container">
    <footer class="site-footer">
  
  <p class="powered-by">
    
      <a href="/privacy/">Privacy Policy</a>
    
    
       &middot; 
      <a href="/terms/">Terms</a>
        
  </p>
  

  <p class="powered-by">
    

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" id="back_to_top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
